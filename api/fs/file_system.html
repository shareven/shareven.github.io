<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>fs（文件系统） | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/fs/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756309457" rel="stylesheet">')
  </script>
</head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-fs">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>fs（文件系统）</h1>
          <div id="gtoc">
            <ul>
              <li>v12.14.0</li>
              <li>
                <a href="../fs.html#fs_file_system" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/fs/file_system.md" rel="nofollow" target="_blank">提交修改</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>

        <div id="biz_item"></div>
  
        <div id="apicontent">
          <div id="content_left"><p></p><div class="api_stability api_stability_2"><a target="_blank" rel="nofollow" href="../documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 2</a> - &#x7A33;&#x5B9A;</div><p></p><p><code>fs</code> &#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A; API&#xFF0C;&#x7528;&#x4E8E;&#x4EE5;&#x6A21;&#x4EFF;&#x6807;&#x51C6; POSIX &#x51FD;&#x6570;&#x7684;&#x65B9;&#x5F0F;&#x4E0E;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p><p>&#x8981;&#x4F7F;&#x7528;&#x6B64;&#x6A21;&#x5757;&#xFF1A;</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);
</code></pre><p>&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x64CD;&#x4F5C;&#x90FD;&#x5177;&#x6709;&#x540C;&#x6B65;&#x548C;&#x5F02;&#x6B65;&#x7684;&#x5F62;&#x5F0F;&#x3002;</p><p>&#x5F02;&#x6B65;&#x7684;&#x5F62;&#x5F0F;&#x603B;&#x662F;&#x5C06;&#x5B8C;&#x6210;&#x56DE;&#x8C03;&#x4F5C;&#x4E3A;&#x5176;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;
&#x4F20;&#x7ED9;&#x5B8C;&#x6210;&#x56DE;&#x8C03;&#x7684;&#x53C2;&#x6570;&#x53D6;&#x51B3;&#x4E8E;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x59CB;&#x7EC8;&#x9884;&#x7559;&#x7528;&#x4E8E;&#x5F02;&#x5E38;&#x3002;
&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x6210;&#x529F;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5C06;&#x4E3A; <code>null</code> &#x6216; <code>undefined</code>&#x3002;</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);

fs.unlink(&apos;/tmp/hello&apos;, (err) =&gt; {
  if (err) throw err;
  console.log(&apos;&#x5DF2;&#x6210;&#x529F;&#x5220;&#x9664; /tmp/hello&apos;);
});
</code></pre><p>&#x4F7F;&#x7528;&#x540C;&#x6B65;&#x7684;&#x64CD;&#x4F5C;&#x53D1;&#x751F;&#x7684;&#x5F02;&#x5E38;&#x4F1A;&#x7ACB;&#x5373;&#x629B;&#x51FA;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>try&#x2026;catch</code> &#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;&#x5192;&#x6CE1;&#x3002;</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);

try {
  fs.unlinkSync(&apos;/tmp/hello&apos;);
  console.log(&apos;&#x5DF2;&#x6210;&#x529F;&#x5220;&#x9664; /tmp/hello&apos;);
} catch (err) {
  // &#x5904;&#x7406;&#x9519;&#x8BEF;
}
</code></pre><p>&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x987A;&#x5E8F;&#x3002;
&#x56E0;&#x6B64;&#xFF0C;&#x4EE5;&#x4E0B;&#x7684;&#x64CD;&#x4F5C;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#xFF0C;&#x56E0;&#x4E3A; <code>fs.stat()</code> &#x64CD;&#x4F5C;&#x53EF;&#x80FD;&#x5728; <code>fs.rename()</code> &#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x5B8C;&#x6210;&#xFF1A;</p><pre><code class="language-js">fs.rename(&apos;/tmp/hello&apos;, &apos;/tmp/world&apos;, (err) =&gt; {
  if (err) throw err;
  console.log(&apos;&#x91CD;&#x547D;&#x540D;&#x5B8C;&#x6210;&apos;);
});
fs.stat(&apos;/tmp/world&apos;, (err, stats) =&gt; {
  if (err) throw err;
  console.log(`&#x6587;&#x4EF6;&#x5C5E;&#x6027;: ${JSON.stringify(stats)}`);
});
</code></pre><p>&#x8981;&#x6B63;&#x786E;&#x5730;&#x6392;&#x5E8F;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x5C06; <code>fs.stat()</code> &#x8C03;&#x7528;&#x79FB;&#x52A8;&#x5230; <code>fs.rename()</code> &#x64CD;&#x4F5C;&#x7684;&#x56DE;&#x8C03;&#x4E2D;&#xFF1A;</p><pre><code class="language-js">fs.rename(&apos;/tmp/hello&apos;, &apos;/tmp/world&apos;, (err) =&gt; {
  if (err) throw err;
  fs.stat(&apos;/tmp/world&apos;, (err, stats) =&gt; {
    if (err) throw err;
    console.log(`&#x6587;&#x4EF6;&#x5C5E;&#x6027;: ${JSON.stringify(stats)}`);
  });
});
</code></pre><p>&#x5728;&#x7E41;&#x5FD9;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x8C03;&#x7528;&#x7684;&#x5F02;&#x6B65;&#x7248;&#x672C;&#x3002;
&#x540C;&#x6B65;&#x7684;&#x7248;&#x672C;&#x5C06;&#x963B;&#x585E;&#x6574;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;&#x5B83;&#x4EEC;&#x5B8C;&#x6210;&#xFF08;&#x505C;&#x6B62;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#xFF09;&#x3002;</p><p>&#x867D;&#x7136;&#x4E0D;&#x63A8;&#x8350;&#x8FD9;&#x6837;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5927;&#x591A;&#x6570; fs &#x51FD;&#x6570;&#x5141;&#x8BB8;&#x7701;&#x7565;&#x56DE;&#x8C03;&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x4F1A;&#x91CD;&#x65B0;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x7684;&#x9ED8;&#x8BA4;&#x56DE;&#x8C03;&#x3002;
&#x8981;&#x83B7;&#x53D6;&#x539F;&#x59CB;&#x8C03;&#x7528;&#x70B9;&#x7684;&#x8DDF;&#x8E2A;&#xFF0C;&#x5219;&#x8BBE;&#x7F6E; <code>NODE_DEBUG</code> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF1A;</p><p>&#x4E0D;&#x63A8;&#x8350;&#x5728;&#x5F02;&#x6B65;&#x7684; fs &#x51FD;&#x6570;&#x4E0A;&#x7701;&#x7565;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x5C06;&#x6765;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;</p><pre><code class="language-console">$ cat script.js
function bad() {
  require(&apos;fs&apos;).readFile(&apos;/&apos;);
}
bad();

$ env NODE_DEBUG=fs node script.js
fs.js:88
        throw backtrace;
        ^
Error: EISDIR: illegal operation on a directory, read
    &lt;stack trace.&gt;
</code></pre></div>
          <div id="content_right"><p></p><div class="api_stability api_stability_2"><a target="_blank" rel="nofollow" href="../documentation.html#documentation_stability_index">Stability: 2</a> - Stable</div><p></p><p>The <code>fs</code> module provides an API for interacting with the file system in a
manner closely modeled around standard POSIX functions.</p><p>To use this module:</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);
</code></pre><p>All file system operations have synchronous and asynchronous forms.</p><p>The asynchronous form always takes a completion callback as its last argument.
The arguments passed to the completion callback depend on the method, but the
first argument is always reserved for an exception. If the operation was
completed successfully, then the first argument will be <code>null</code> or <code>undefined</code>.</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);

fs.unlink(&apos;/tmp/hello&apos;, (err) =&gt; {
  if (err) throw err;
  console.log(&apos;successfully deleted /tmp/hello&apos;);
});
</code></pre><p>Exceptions that occur using synchronous operations are thrown immediately and
may be handled using <code>try&#x2026;catch</code>, or may be allowed to bubble up.</p><pre><code class="language-js">const fs = require(&apos;fs&apos;);

try {
  fs.unlinkSync(&apos;/tmp/hello&apos;);
  console.log(&apos;successfully deleted /tmp/hello&apos;);
} catch (err) {
  // handle the error
}
</code></pre><p>There is no guaranteed ordering when using asynchronous methods. So the
following is prone to error because the <code>fs.stat()</code> operation may complete
before the <code>fs.rename()</code> operation:</p><pre><code class="language-js">fs.rename(&apos;/tmp/hello&apos;, &apos;/tmp/world&apos;, (err) =&gt; {
  if (err) throw err;
  console.log(&apos;renamed complete&apos;);
});
fs.stat(&apos;/tmp/world&apos;, (err, stats) =&gt; {
  if (err) throw err;
  console.log(`stats: ${JSON.stringify(stats)}`);
});
</code></pre><p>To correctly order the operations, move the <code>fs.stat()</code> call into the callback
of the <code>fs.rename()</code> operation:</p><pre><code class="language-js">fs.rename(&apos;/tmp/hello&apos;, &apos;/tmp/world&apos;, (err) =&gt; {
  if (err) throw err;
  fs.stat(&apos;/tmp/world&apos;, (err, stats) =&gt; {
    if (err) throw err;
    console.log(`stats: ${JSON.stringify(stats)}`);
  });
});
</code></pre><p>In busy processes, use the asynchronous versions of these calls. The synchronous
versions will block the entire process until they complete, halting all
connections.</p><p>While it is not recommended, most fs functions allow the callback argument to
be omitted, in which case a default callback is used that rethrows errors. To
get a trace to the original call site, set the <code>NODE_DEBUG</code> environment
variable:</p><p>Omitting the callback function on asynchronous fs functions is deprecated and
may result in an error being thrown in the future.</p><pre><code class="language-console">$ cat script.js
function bad() {
  require(&apos;fs&apos;).readFile(&apos;/&apos;);
}
bad();

$ env NODE_DEBUG=fs node script.js
fs.js:88
        throw backtrace;
        ^
Error: EISDIR: illegal operation on a directory, read
    &lt;stack trace.&gt;
</code></pre></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="http://nodejs.cn/api/fs/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756309457"><\/script>');
  </script>
</body>
</html>