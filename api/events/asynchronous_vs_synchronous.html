<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>异步 VS 同步 | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/events/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756306993" rel="stylesheet">')
  </script>
</head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-events">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>异步 VS 同步</h1>
          <div id="gtoc">
            <ul>
              <li>v12.14.0</li>
              <li>
                <a href="../events.html#events_asynchronous_vs_synchronous" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/events/asynchronous_vs_synchronous.md" rel="nofollow" target="_blank">提交修改</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>

        <div id="biz_item"></div>
  
        <div id="apicontent">
          <div id="content_left"><p><code>EventEmitter</code> &#x4EE5;&#x6CE8;&#x518C;&#x7684;&#x987A;&#x5E8F;&#x540C;&#x6B65;&#x5730;&#x8C03;&#x7528;&#x6240;&#x6709;&#x76D1;&#x542C;&#x5668;&#x3002;
&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x4E8B;&#x4EF6;&#x7684;&#x6B63;&#x786E;&#x6392;&#x5E8F;&#xFF0C;&#x5E76;&#x6709;&#x52A9;&#x4E8E;&#x907F;&#x514D;&#x7ADE;&#x6001;&#x6761;&#x4EF6;&#x548C;&#x903B;&#x8F91;&#x9519;&#x8BEF;&#x3002;
&#x5F53;&#x9002;&#x5F53;&#x65F6;&#xFF0C;&#x76D1;&#x542C;&#x5668;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>setImmediate()</code> &#x548C; <code>process.nextTick()</code> &#x65B9;&#x6CD5;&#x5207;&#x6362;&#x5230;&#x5F02;&#x6B65;&#x7684;&#x64CD;&#x4F5C;&#x6A21;&#x5F0F;&#xFF1A;</p><pre><code class="language-js">const myEmitter = new MyEmitter();
myEmitter.on(&apos;event&apos;, (a, b) =&gt; {
  setImmediate(() =&gt; {
    console.log(&apos;&#x5F02;&#x6B65;&#x5730;&#x53D1;&#x751F;&apos;);
  });
});
myEmitter.emit(&apos;event&apos;, &apos;a&apos;, &apos;b&apos;);
</code></pre></div>
          <div id="content_right"><p>The <code>EventEmitter</code> calls all listeners synchronously in the order in which
they were registered. This ensures the proper sequencing of
events and helps avoid race conditions and logic errors. When appropriate,
listener functions can switch to an asynchronous mode of operation using
the <code>setImmediate()</code> or <code>process.nextTick()</code> methods:</p><pre><code class="language-js">const myEmitter = new MyEmitter();
myEmitter.on(&apos;event&apos;, (a, b) =&gt; {
  setImmediate(() =&gt; {
    console.log(&apos;this happens asynchronously&apos;);
  });
});
myEmitter.emit(&apos;event&apos;, &apos;a&apos;, &apos;b&apos;);
</code></pre></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="http://nodejs.cn/api/events/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756306993"><\/script>');
  </script>
</body>
</html>