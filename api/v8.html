<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>v8 | Node.js API &#x6587;&#x6863;</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756329101" rel="stylesheet">')
  </script>
  
</head>
<body class="alt apidoc" id="page_api">
  <div id="api-section-v8">
    <div id="content" class="clearfix">
      <div id="column2" class="interior">
        <div id="intro" class="interior">
          <a href="http://nodejs.cn/" rel="nofollow">
            Node.js &#x4E2D;&#x6587;&#x7F51;
          </a>
          <a href="index.html" rel="nofollow">
            v12.14.0
          </a>
          <div id="biz_nav"><a title="&#x5F00;&#x8BFE;&#x5427;" target="_blank" href="https://datayi.cn/w/LPd57bYo" rel="nofollow"><img></a></div>
        </div>
        <div class="line"></div>
        <ul>
<li><a href="assert.html" class="nav-assert" rel="nofollow">assert - &#x65AD;&#x8A00;</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks" rel="nofollow">async_hooks - &#x5F02;&#x6B65;&#x94A9;&#x5B50;</a></li>
<li><a href="buffer.html" class="nav-buffer" rel="nofollow">Buffer - &#x7F13;&#x51B2;&#x5668;</a></li>
<li><a href="child_process.html" class="nav-child_process" rel="nofollow">child_process - &#x5B50;&#x8FDB;&#x7A0B;</a></li>
<li><a href="cluster.html" class="nav-cluster" rel="nofollow">cluster - &#x96C6;&#x7FA4;</a></li>
<li><a href="console.html" class="nav-console" rel="nofollow">console - &#x63A7;&#x5236;&#x53F0;</a></li>
<li><a href="crypto.html" class="nav-crypto" rel="nofollow">crypto - &#x52A0;&#x5BC6;</a></li>
<li><a href="debugger.html" class="nav-debugger" rel="nofollow">debugger - &#x8C03;&#x8BD5;&#x5668;</a></li>
<li><a href="dgram.html" class="nav-dgram" rel="nofollow">dgram - &#x6570;&#x636E;&#x62A5;</a></li>
<li><a href="dns.html" class="nav-dns" rel="nofollow">dns - &#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;</a></li>
<li><a href="domain.html" class="nav-domain" rel="nofollow">domain - &#x57DF;</a></li>
<li><a href="errors.html" class="nav-errors" rel="nofollow">Error - &#x5F02;&#x5E38;</a></li>
<li><a href="events.html" class="nav-events" rel="nofollow">events - &#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x5668;</a></li>
<li><a href="fs.html" class="nav-fs" rel="nofollow">fs - &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</a></li>
<li><a href="globals.html" class="nav-globals" rel="nofollow">global - &#x5168;&#x5C40;&#x53D8;&#x91CF;</a></li>
<li><a href="http.html" class="nav-http" rel="nofollow">http - HTTP</a></li>
<li><a href="http2.html" class="nav-http2" rel="nofollow">http2 - HTTP/2</a></li>
<li><a href="https.html" class="nav-https" rel="nofollow">https - HTTPS</a></li>
<li><a href="inspector.html" class="nav-inspector" rel="nofollow">inspector - &#x68C0;&#x67E5;&#x5668;</a></li>
<li><a href="modules.html" class="nav-modules" rel="nofollow">module - &#x6A21;&#x5757;</a></li>
<li><a href="net.html" class="nav-net" rel="nofollow">net - &#x7F51;&#x7EDC;</a></li>
<li><a href="os.html" class="nav-os" rel="nofollow">os - &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</a></li>
<li><a href="path.html" class="nav-path" rel="nofollow">path - &#x8DEF;&#x5F84;</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks" rel="nofollow">perf_hooks - &#x6027;&#x80FD;&#x94A9;&#x5B50;</a></li>
<li><a href="process.html" class="nav-process" rel="nofollow">process - &#x8FDB;&#x7A0B;</a></li>
<li><a href="punycode.html" class="nav-punycode" rel="nofollow">punycode - &#x57DF;&#x540D;&#x4EE3;&#x7801;</a></li>
<li><a href="querystring.html" class="nav-querystring" rel="nofollow">querystring - &#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;</a></li>
<li><a href="readline.html" class="nav-readline" rel="nofollow">readline - &#x9010;&#x884C;&#x8BFB;&#x53D6;</a></li>
<li><a href="repl.html" class="nav-repl" rel="nofollow">repl - &#x4EA4;&#x4E92;&#x5F0F;&#x89E3;&#x91CA;&#x5668;</a></li>
<li><a href="stream.html" class="nav-stream" rel="nofollow">stream - &#x6D41;</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder" rel="nofollow">string_decoder - &#x5B57;&#x7B26;&#x4E32;&#x89E3;&#x7801;&#x5668;</a></li>
<li><a href="timers.html" class="nav-timers" rel="nofollow">timer - &#x5B9A;&#x65F6;&#x5668;</a></li>
<li><a href="tls.html" class="nav-tls" rel="nofollow">tls - &#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;</a></li>
<li><a href="tracing.html" class="nav-tracing" rel="nofollow">trace_events - &#x8DDF;&#x8E2A;&#x4E8B;&#x4EF6;</a></li>
<li><a href="tty.html" class="nav-tty" rel="nofollow">tty - &#x7EC8;&#x7AEF;</a></li>
<li><a href="url.html" class="nav-url" rel="nofollow">url - URL</a></li>
<li><a href="util.html" class="nav-util" rel="nofollow">util - &#x5B9E;&#x7528;&#x5DE5;&#x5177;</a></li>
<li><a href="v8.html" class="nav-v8 active" rel="nofollow">v8 - V8&#x5F15;&#x64CE;</a></li>
<li><a href="vm.html" class="nav-vm" rel="nofollow">vm - &#x865A;&#x62DF;&#x673A;</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads" rel="nofollow">worker_threads - &#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;</a></li>
<li><a href="zlib.html" class="nav-zlib" rel="nofollow">zlib - &#x538B;&#x7F29;</a></li>
</ul>
<div class="line"></div>
<ul>
<li><a href="documentation.html" class="nav-documentation" rel="nofollow">&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6863;</a></li>
<li><a href="synopsis.html" class="nav-synopsis" rel="nofollow">&#x7528;&#x6CD5;&#x4E0E;&#x793A;&#x4F8B;</a></li>
<li><a href="addons.html" class="nav-addons" rel="nofollow">C++&#x63D2;&#x4EF6;</a></li>
<li><a href="n-api.html" class="nav-n-api" rel="nofollow">N-API</a></li>
<li><a href="cli.html" class="nav-cli" rel="nofollow">&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</a></li>
<li><a href="esm.html" class="nav-esm" rel="nofollow">ECMAScript &#x6A21;&#x5757;</a></li>
<li><a href="policy.html" class="nav-policy" rel="nofollow">&#x5B89;&#x5168;&#x7B56;&#x7565;</a></li>
<li><a href="report.html" class="nav-report" rel="nofollow">&#x8BCA;&#x65AD;&#x62A5;&#x8868;</a></li>
<li><a href="intl.html" class="nav-intl" rel="nofollow">&#x56FD;&#x9645;&#x5316;&#x652F;&#x6301;</a></li>
<li><a href="deprecations.html" class="nav-deprecations" rel="nofollow">&#x5E9F;&#x5F03;&#x7684; API</a></li>
</ul>
        
      </div>
  
      <div id="column1" data-id="v8" class="interior">
        <header>
          <h1>Node.js v12.14.0 &#x6587;&#x6863;</h1>
          <div id="gtoc">
            <ul>
              <li>
                <a href="index.html" name="toc">&#x8FD4;&#x56DE;&#x6587;&#x6863;&#x9996;&#x9875;</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">&#x641C;&#x7D22;</a>
              </li>
              <!-- 
    <li class="version-picker">
      <a href="#">查看其他版本 <span>&#x25bc;</span></a>
      <ol class="version-picker"><li><a href="/latest-api/v8.html">12.x</a></li>
<li><a href="/api/v8.html">10.x</a></li></ol>
    </li>
   -->
            </ul>
          </div>
          <hr>
        </header>

        
        
        <div id="toc">
          <h2>&#x76EE;&#x5F55;</h2>
          <ul>
<li>
<p><a href="v8.html#v8_v8">v8&#xFF08;V8&#x5F15;&#x64CE;&#xFF09;</a></p>
<ul>
<li><a href="v8.html#v8_v8_cacheddataversiontag">v8.cachedDataVersionTag()</a></li>
<li><a href="v8.html#v8_v8_getheapspacestatistics">v8.getHeapSpaceStatistics()</a></li>
<li><a href="v8.html#v8_v8_getheapsnapshot">v8.getHeapSnapshot()</a></li>
<li><a href="v8.html#v8_v8_getheapstatistics">v8.getHeapStatistics()</a></li>
<li><a href="v8.html#v8_v8_getheapcodestatistics">v8.getHeapCodeStatistics()</a></li>
<li><a href="v8.html#v8_v8_setflagsfromstring_flags">v8.setFlagsFromString(flags)</a></li>
<li><a href="v8.html#v8_v8_writeheapsnapshot_filename">v8.writeHeapSnapshot([filename])</a></li>
<li>
<p><a href="v8.html#v8_serialization_api">&#x5E8F;&#x5217;&#x5316;&#x7684; API</a></p>
<ul>
<li><a href="v8.html#v8_v8_serialize_value">v8.serialize(value)</a></li>
<li><a href="v8.html#v8_v8_deserialize_buffer">v8.deserialize(buffer)</a></li>
<li>
<p><a href="v8.html#v8_class_v8_serializer">v8.Serializer &#x7C7B;</a></p>
<ul>
<li><a href="v8.html#v8_new_serializer">new Serializer()</a></li>
<li><a href="v8.html#v8_serializer_writeheader">serializer.writeHeader()</a></li>
<li><a href="v8.html#v8_serializer_writevalue_value">serializer.writeValue(value)</a></li>
<li><a href="v8.html#v8_serializer_releasebuffer">serializer.releaseBuffer()</a></li>
<li><a href="v8.html#v8_serializer_transferarraybuffer_id_arraybuffer">serializer.transferArrayBuffer(id, arrayBuffer)</a></li>
<li><a href="v8.html#v8_serializer_writeuint32_value">serializer.writeUint32(value)</a></li>
<li><a href="v8.html#v8_serializer_writeuint64_hi_lo">serializer.writeUint64(hi, lo)</a></li>
<li><a href="v8.html#v8_serializer_writedouble_value">serializer.writeDouble(value)</a></li>
<li><a href="v8.html#v8_serializer_writerawbytes_buffer">serializer.writeRawBytes(buffer)</a></li>
<li><a href="v8.html#v8_serializer_writehostobject_object">serializer._writeHostObject(object)</a></li>
<li><a href="v8.html#v8_serializer_getdatacloneerror_message">serializer._getDataCloneError(message)</a></li>
<li><a href="v8.html#v8_serializer_getsharedarraybufferid_sharedarraybuffer">serializer._getSharedArrayBufferId(sharedArrayBuffer)</a></li>
<li><a href="v8.html#v8_serializer_settreatarraybufferviewsashostobjects_flag">serializer._setTreatArrayBufferViewsAsHostObjects(flag)</a></li>
</ul>
</li>
<li>
<p><a href="v8.html#v8_class_v8_deserializer">v8.Deserializer &#x7C7B;</a></p>
<ul>
<li><a href="v8.html#v8_new_deserializer_buffer">new Deserializer(buffer)</a></li>
<li><a href="v8.html#v8_deserializer_readheader">deserializer.readHeader()</a></li>
<li><a href="v8.html#v8_deserializer_readvalue">deserializer.readValue()</a></li>
<li><a href="v8.html#v8_deserializer_transferarraybuffer_id_arraybuffer">deserializer.transferArrayBuffer(id, arrayBuffer)</a></li>
<li><a href="v8.html#v8_deserializer_getwireformatversion">deserializer.getWireFormatVersion()</a></li>
<li><a href="v8.html#v8_deserializer_readuint32">deserializer.readUint32()</a></li>
<li><a href="v8.html#v8_deserializer_readuint64">deserializer.readUint64()</a></li>
<li><a href="v8.html#v8_deserializer_readdouble">deserializer.readDouble()</a></li>
<li><a href="v8.html#v8_deserializer_readrawbytes_length">deserializer.readRawBytes(length)</a></li>
<li><a href="v8.html#v8_deserializer_readhostobject">deserializer._readHostObject()</a></li>
</ul>
</li>
<li><a href="v8.html#v8_class_v8_defaultserializer">v8.DefaultSerializer &#x7C7B;</a></li>
<li><a href="v8.html#v8_class_v8_defaultdeserializer">v8.DefaultDeserializer &#x7C7B;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
        </div>

        <!-- <div id="biz_content">
          <a href="http://www.tp-shop.cn/index.php?http_referer=node" target="_blank">
            <img src="//static.nodejs.cn/_static/img/ad/api_content_tpshop.jpg" />
          </a>
        </div> -->
  
        <div id="apicontent">
          <h1>v8&#xFF08;V8&#x5F15;&#x64CE;&#xFF09;<span><a class="mark" href="v8.html#v8_v8" id="v8_v8">#</a></span></h1><p class="tip_wrap"><a href="v8/v8.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<!--introduced_in=v4.0.0-->
<p><code>v8</code> &#x6A21;&#x5757;&#x66B4;&#x9732;&#x4E86;&#x7279;&#x5B9A;&#x4E8E;&#x5185;&#x7F6E;&#x5230; Node.js &#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x4E2D;&#x7684; <a href="http://nodejs.cn/s/Nt1LnB" rel="nofollow">V8</a> &#x7248;&#x672C;&#x7684; API&#x3002;
&#x5B83;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#xFF1A;</p>
<pre><code class="language-js">const v8 = require(&apos;v8&apos;);
</code></pre>
<p>API &#x548C;&#x5B9E;&#x73B0;&#x968F;&#x65F6;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;</p>
<h2>v8.cachedDataVersionTag()<span><a class="mark" href="v8.html#v8_v8_cacheddataversiontag" id="v8_v8_cacheddataversiontag">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_cacheddataversiontag.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_cacheddataversiontag.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x4ECE; V8 &#x7248;&#x672C;&#x3001;&#x547D;&#x4EE4;&#x884C;&#x6807;&#x5FD7;&#x3001;&#x4EE5;&#x53CA;&#x68C0;&#x6D4B;&#x5230;&#x7684; CPU &#x7279;&#x6027;&#x6D3E;&#x751F;&#x7684;&#x7248;&#x672C;&#x6807;&#x8BB0;&#x3002;
&#x8FD9;&#x5BF9;&#x4E8E;&#x5224;&#x65AD; <a href="http://nodejs.cn/s/hEzeEn" rel="nofollow"><code>vm.Script</code></a> &#x7684; <code>cachedData</code> buffer &#x662F;&#x5426;&#x4E0E;&#x6B64; V8 &#x5B9E;&#x4F8B;&#x517C;&#x5BB9;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<h2>v8.getHeapSpaceStatistics()<span><a class="mark" href="v8.html#v8_v8_getheapspacestatistics" id="v8_v8_getheapspacestatistics">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_getheapspacestatistics.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_getheapspacestatistics.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v7.5.0</td>
<td><p>Support values exceeding the 32-bit unsigned integer range.</p></td></tr>
<tr><td>v6.0.0</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v6.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object[]&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x6709;&#x5173; V8 &#x5806;&#x7A7A;&#x95F4;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x5373;&#x7EC4;&#x6210; V8 &#x5806;&#x7684;&#x7247;&#x6BB5;&#x3002;
&#x7531;&#x4E8E;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x662F;&#x901A;&#x8FC7; V8 &#x7684; <a href="http://nodejs.cn/s/Cqpe5o" rel="nofollow"><code>GetHeapSpaceStatistics</code></a> &#x51FD;&#x6570;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5806;&#x7A7A;&#x95F4;&#x7684;&#x6392;&#x5E8F;&#x4EE5;&#x53CA;&#x5806;&#x7A7A;&#x95F4;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4ECE;&#x4E00;&#x4E2A; V8 &#x7248;&#x672C;&#x66F4;&#x6539;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>
<p>&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x662F;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;&#x7684;&#x5BF9;&#x8C61;&#x6570;&#x7EC4;&#xFF1A;</p>
<ul>
<li><code>space_name</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
<li><code>space_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>space_used_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>space_available_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>physical_space_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<pre><code class="language-json">[
  {
    &quot;space_name&quot;: &quot;new_space&quot;,
    &quot;space_size&quot;: 2063872,
    &quot;space_used_size&quot;: 951112,
    &quot;space_available_size&quot;: 80824,
    &quot;physical_space_size&quot;: 2063872
  },
  {
    &quot;space_name&quot;: &quot;old_space&quot;,
    &quot;space_size&quot;: 3090560,
    &quot;space_used_size&quot;: 2493792,
    &quot;space_available_size&quot;: 0,
    &quot;physical_space_size&quot;: 3090560
  },
  {
    &quot;space_name&quot;: &quot;code_space&quot;,
    &quot;space_size&quot;: 1260160,
    &quot;space_used_size&quot;: 644256,
    &quot;space_available_size&quot;: 960,
    &quot;physical_space_size&quot;: 1260160
  },
  {
    &quot;space_name&quot;: &quot;map_space&quot;,
    &quot;space_size&quot;: 1094160,
    &quot;space_used_size&quot;: 201608,
    &quot;space_available_size&quot;: 0,
    &quot;physical_space_size&quot;: 1094160
  },
  {
    &quot;space_name&quot;: &quot;large_object_space&quot;,
    &quot;space_size&quot;: 0,
    &quot;space_used_size&quot;: 0,
    &quot;space_available_size&quot;: 1490980608,
    &quot;physical_space_size&quot;: 0
  }
]
</code></pre>
<h2>v8.getHeapSnapshot()<span><a class="mark" href="v8.html#v8_v8_getheapsnapshot" id="v8_v8_getheapsnapshot">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_getheapsnapshot.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_getheapsnapshot.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.13.0</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/YuDKX1" target="_blank" rel="nofollow" class="type">&lt;stream.Readable&gt;</a> &#x5305;&#x542B; V8 &#x5806;&#x5FEB;&#x7167;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x3002;</li>
</ul>
<p>&#x751F;&#x6210;&#x5F53;&#x524D; V8 &#x5806;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x53EF;&#x8BFB;&#x6D41;&#xFF0C;&#x8BE5;&#x53EF;&#x8BFB;&#x6D41;&#x53EF;&#x7528;&#x4E8E;&#x8BFB;&#x53D6; JSON &#x5E8F;&#x5217;&#x5316;&#x8868;&#x793A;&#x3002;
&#x6B64; JSON &#x6D41;&#x683C;&#x5F0F;&#x65E8;&#x5728;&#x4E0E; Chrome DevTools &#x7B49;&#x5DE5;&#x5177;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;
JSON &#x6A21;&#x5F0F;&#x672A;&#x8BB0;&#x5F55;&#x4E14;&#x7279;&#x5B9A;&#x4E8E;V8&#x5F15;&#x64CE;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x4ECE; V8 &#x7684;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x66F4;&#x6539;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>
<pre><code class="language-js">const stream = v8.getHeapSnapshot();
stream.pipe(process.stdout);
</code></pre>
<h2>v8.getHeapStatistics()<span><a class="mark" href="v8.html#v8_v8_getheapstatistics" id="v8_v8_getheapstatistics">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_getheapstatistics.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_getheapstatistics.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v7.5.0</td>
<td><p>Support values exceeding the 32-bit unsigned integer range.</p></td></tr>
<tr><td>v7.2.0</td>
<td><p>Added <code>malloced_memory</code>, <code>peak_malloced_memory</code>, and <code>does_zap_garbage</code>.</p></td></tr>
<tr><td>v1.0.0</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v1.0.0</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;&#x7684;&#x5BF9;&#x8C61;&#xFF1A;</p>
<ul>
<li><code>total_heap_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>total_heap_size_executable</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>total_physical_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>total_available_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>used_heap_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>heap_size_limit</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>malloced_memory</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>peak_malloced_memory</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>does_zap_garbage</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>number_of_native_contexts</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>number_of_detached_contexts</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p><code>does_zap_garbage</code> &#x662F;&#x4E00;&#x4E2A; 0/1 &#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x662F;&#x5426;&#x542F;&#x7528;&#x4E86; <code>--zap_code_space</code> &#x9009;&#x9879;&#x3002;
&#x8FD9;&#x4F7F;&#x5F97; V8 &#x7528;&#x4F4D;&#x6A21;&#x5F0F;&#x8986;&#x76D6;&#x5806;&#x5783;&#x573E;&#x3002;
RSS &#x5360;&#x7528;&#x7A7A;&#x95F4;&#xFF08;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x96C6;&#xFF09;&#x4F1A;&#x53D8;&#x5F97;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x65AD;&#x89E6;&#x53CA;&#x6240;&#x6709;&#x5806;&#x9875;&#x9762;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x5B83;&#x4EEC;&#x4E0D;&#x592A;&#x53EF;&#x80FD;&#x88AB;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4EA4;&#x6362;&#x51FA;&#x3002;</p>
<p><code>number_of_native_contexts</code> native_context &#x7684;&#x503C;&#x662F;&#x5F53;&#x524D;&#x6D3B;&#x52A8;&#x7684;&#x9876;&#x5C42;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x6570;&#x91CF;&#x3002;
&#x968F;&#x7740;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x79FB;&#xFF0C;&#x6B64;&#x6570;&#x5B57;&#x7684;&#x589E;&#x52A0;&#x8868;&#x793A;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3002;</p>
<p><code>number_of_detached_contexts</code> detached_context &#x7684;&#x503C;&#x662F;&#x5DF2;&#x5206;&#x79BB;&#x4F46;&#x5C1A;&#x672A;&#x56DE;&#x6536;&#x5783;&#x573E;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x6570;&#x3002;
&#x8BE5;&#x6570;&#x5B57;&#x4E0D;&#x4E3A;&#x96F6;&#x8868;&#x793A;&#x6F5C;&#x5728;&#x7684;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3002;</p>
<!-- eslint-skip -->
<pre><code class="language-js">{
  total_heap_size: 7326976,
  total_heap_size_executable: 4194304,
  total_physical_size: 7326976,
  total_available_size: 1152656,
  used_heap_size: 3476208,
  heap_size_limit: 1535115264,
  malloced_memory: 16384,
  peak_malloced_memory: 1127496,
  does_zap_garbage: 0,
  number_of_native_contexts: 1,
  number_of_detached_contexts: 0
}
</code></pre>
<h2>v8.getHeapCodeStatistics()<span><a class="mark" href="v8.html#v8_v8_getheapcodestatistics" id="v8_v8_getheapcodestatistics">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_getheapcodestatistics.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_getheapcodestatistics.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.8.0</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;&#x7684;&#x5BF9;&#x8C61;&#xFF1A;</p>
<ul>
<li><code>code_and_metadata_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>bytecode_and_metadata_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
<li><code>external_script_source_size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<!-- eslint-skip -->
<pre><code class="language-js">{
  code_and_metadata_size: 212208,
  bytecode_and_metadata_size: 161368,
  external_script_source_size: 1410794
}
</code></pre>
<h2>v8.setFlagsFromString(flags)<span><a class="mark" href="v8.html#v8_v8_setflagsfromstring_flags" id="v8_v8_setflagsfromstring_flags">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_setflagsfromstring_flags.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_setflagsfromstring_flags.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v1.0.0</span>
</div>
<ul>
<li><code>flags</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p><code>v8.setFlagsFromString()</code> &#x65B9;&#x6CD5;&#x53EF;&#x7528;&#x4E8E;&#x4EE5;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E; V8 &#x7684;&#x547D;&#x4EE4;&#x884C;&#x6807;&#x5FD7;&#x3002;
&#x5E94;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;
&#x865A;&#x62DF;&#x673A;&#x542F;&#x52A8;&#x540E;&#x66F4;&#x6539;&#x8BBE;&#x7F6E;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x53EF;&#x9884;&#x6D4B;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5305;&#x62EC;&#x5D29;&#x6E83;&#x548C;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x6216;&#x8005;&#x5B83;&#x53EF;&#x80FD;&#x6839;&#x672C;&#x5C31;&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x505A;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD0;&#x884C; <code>node --v8-options</code> &#x6765;&#x68C0;&#x6D4B;&#x53EF;&#x7528;&#x4E8E; Node.js &#x7248;&#x672C;&#x7684; V8 &#x9009;&#x9879;&#x3002; </p>
<p>&#x7528;&#x6CD5;:</p>
<pre><code class="language-js">// &#x5C06; GC &#x4E8B;&#x4EF6;&#x6253;&#x5370;&#x5230; stdout &#x4E00;&#x5206;&#x949F;&#x3002;
const v8 = require(&apos;v8&apos;);
v8.setFlagsFromString(&apos;--trace_gc&apos;);
setTimeout(() =&gt; { v8.setFlagsFromString(&apos;--notrace_gc&apos;); }, 60e3);
</code></pre>
<h2>v8.writeHeapSnapshot([filename])<span><a class="mark" href="v8.html#v8_v8_writeheapsnapshot_filename" id="v8_v8_writeheapsnapshot_filename">#</a></span></h2><p class="tip_wrap"><a href="v8/v8_writeheapsnapshot_filename.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/v8/v8_writeheapsnapshot_filename.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.13.0</span>
</div>
<ul>
<li><code>filename</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x8981;&#x4FDD;&#x5B58; V8 &#x5806;&#x5FEB;&#x7167;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x3002; 
&#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A;&#xFF0C;&#x5219;&#x5C06;&#x4F1A;&#x751F;&#x6210;&#x5177;&#x6709; <code>&apos;Heap-${yyyymmdd}-${hhmmss}-${pid}-${thread_id}.heapsnapshot&apos;</code> &#x6A21;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;
&#x5176;&#x4E2D; <code>{pid}</code> &#x5C06;&#x4F1A;&#x662F; Node.js &#x8FDB;&#x7A0B;&#x7684; PID&#xFF0C; <code>{thread_id}</code> &#x5C06;&#x4F1A;&#x4E3A; <code>0</code>&#xFF08;&#x5F53;&#x4ECE;&#x4E3B; Node.js &#x7EBF;&#x7A0B;&#x8C03;&#x7528; <code>writeHeapSnapshot()</code> &#x65F6;&#xFF09;&#x6216;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x7684; id&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x4FDD;&#x5B58;&#x5FEB;&#x7167;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x3002;</li>
</ul>
<p>&#x751F;&#x6210;&#x5F53;&#x524D; V8 &#x5806;&#x7684;&#x5FEB;&#x7167;&#x5E76;&#x5C06;&#x5176;&#x5199;&#x5165; JSON &#x6587;&#x4EF6;&#x3002;
&#x6B64;&#x6587;&#x4EF6;&#x65E8;&#x5728;&#x4E0E; Chrome DevTools &#x7B49;&#x5DE5;&#x5177;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;
JSON &#x6A21;&#x5F0F;&#x672A;&#x8BB0;&#x5F55;&#x4E14;&#x7279;&#x5B9A;&#x4E8E;V8&#x5F15;&#x64CE;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x4ECE; V8 &#x7684;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x66F4;&#x6539;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>
<p>&#x5806;&#x5FEB;&#x7167;&#x7279;&#x5B9A;&#x4E8E;&#x5355;&#x4E2A; V8 &#x9694;&#x79BB;&#x3002;
&#x4F7F;&#x7528;<a href="http://nodejs.cn/s/CpVvo4" rel="nofollow">&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;</a>&#x65F6;&#xFF0C;&#x4ECE;&#x4E3B;&#x7EBF;&#x7A0B;&#x751F;&#x6210;&#x7684;&#x5806;&#x5FEB;&#x7167;&#x5C06;&#x4E0D;&#x5305;&#x542B;&#x6709;&#x5173;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x7684;&#x4EFB;&#x4F55;&#x4FE1;&#x606F;&#xFF0C;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;&#x3002;</p>
<pre><code class="language-js">const { writeHeapSnapshot } = require(&apos;v8&apos;);
const {
  Worker,
  isMainThread,
  parentPort
} = require(&apos;worker_threads&apos;);

if (isMainThread) {
  const worker = new Worker(__filename);

  worker.once(&apos;message&apos;, (filename) =&gt; {
    console.log(`&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x8F6C;&#x50A8;: ${filename}`);
    // &#x83B7;&#x53D6;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x8F6C;&#x50A8;&#x3002;
    console.log(`&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x8F6C;&#x50A8;: ${writeHeapSnapshot()}`);
  });

  // &#x901A;&#x77E5;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5806;&#x8F6C;&#x50A8;&#x3002;
  worker.postMessage(&apos;heapdump&apos;);
} else {
  parentPort.once(&apos;message&apos;, (message) =&gt; {
    if (message === &apos;heapdump&apos;) {
      // &#x4E3A;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5806;&#x8F6C;&#x50A8;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x6587;&#x4EF6;&#x540D;&#x5230;&#x7236;&#x7EBF;&#x7A0B;&#x3002;
      parentPort.postMessage(writeHeapSnapshot());
    }
  });
}
</code></pre>
<h2>&#x5E8F;&#x5217;&#x5316;&#x7684; API<span><a class="mark" href="v8.html#v8_serialization_api" id="v8_serialization_api">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p></p><div class="api_stability api_stability_1"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 1</a> - &#x8BD5;&#x9A8C;</div><p></p>
<p>The serialization API provides means of serializing JavaScript values in a way
that is compatible with the <a href="http://nodejs.cn/s/SLsDHc" rel="nofollow">HTML structured clone algorithm</a>.
The format is backward-compatible (i.e. safe to store to disk).</p>
<p>This API is under development, and changes (including incompatible
changes to the API or wire format) may occur until this warning is removed.</p>
<h3>v8.serialize(value)<span><a class="mark" href="v8.html#v8_v8_serialize_value" id="v8_v8_serialize_value">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>value</code> <a href="http://nodejs.cn/s/6sTGdS" target="_blank" rel="nofollow" class="type">&lt;any&gt;</a></li>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>Uses a <a href="http://nodejs.cn/s/8yqbWh" rel="nofollow"><code>DefaultSerializer</code></a> to serialize <code>value</code> into a buffer.</p>
<h3>v8.deserialize(buffer)<span><a class="mark" href="v8.html#v8_v8_deserialize_buffer" id="v8_v8_deserialize_buffer">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>buffer</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView&gt;</a> A buffer returned by <a href="http://nodejs.cn/s/5qB2AA" rel="nofollow"><code>serialize()</code></a>.</li>
</ul>
<p>Uses a <a href="http://nodejs.cn/s/4eUrSF" rel="nofollow"><code>DefaultDeserializer</code></a> with default options to read a JS value
from a buffer.</p>
<h3>v8.Serializer &#x7C7B;<span><a class="mark" href="v8.html#v8_class_v8_serializer" id="v8_class_v8_serializer">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<h4>new Serializer()<span><a class="mark" href="v8.html#v8_new_serializer" id="v8_new_serializer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p>Creates a new <code>Serializer</code> object.</p>
<h4>serializer.writeHeader()<span><a class="mark" href="v8.html#v8_serializer_writeheader" id="v8_serializer_writeheader">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p>Writes out a header, which includes the serialization format version.</p>
<h4>serializer.writeValue(value)<span><a class="mark" href="v8.html#v8_serializer_writevalue_value" id="v8_serializer_writevalue_value">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>value</code> <a href="http://nodejs.cn/s/6sTGdS" target="_blank" rel="nofollow" class="type">&lt;any&gt;</a></li>
</ul>
<p>Serializes a JavaScript value and adds the serialized representation to the
internal buffer.</p>
<p>This throws an error if <code>value</code> cannot be serialized.</p>
<h4>serializer.releaseBuffer()<span><a class="mark" href="v8.html#v8_serializer_releasebuffer" id="v8_serializer_releasebuffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>Returns the stored internal buffer. This serializer should not be used once
the buffer is released. Calling this method results in undefined behavior
if a previous write has failed.</p>
<h4>serializer.transferArrayBuffer(id, arrayBuffer)<span><a class="mark" href="v8.html#v8_serializer_transferarraybuffer_id_arraybuffer" id="v8_serializer_transferarraybuffer_id_arraybuffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>id</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a> A 32-bit unsigned integer.</li>
<li><code>arrayBuffer</code> <a href="http://nodejs.cn/s/mUbfvF" target="_blank" rel="nofollow" class="type">&lt;ArrayBuffer&gt;</a> An <code>ArrayBuffer</code> instance.</li>
</ul>
<p>Marks an <code>ArrayBuffer</code> as having its contents transferred out of band.
Pass the corresponding <code>ArrayBuffer</code> in the deserializing context to
<a href="http://nodejs.cn/s/38Wv5D" rel="nofollow"><code>deserializer.transferArrayBuffer()</code></a>.</p>
<h4>serializer.writeUint32(value)<span><a class="mark" href="v8.html#v8_serializer_writeuint32_value" id="v8_serializer_writeuint32_value">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>value</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>Write a raw 32-bit unsigned integer.
For use inside of a custom <a href="http://nodejs.cn/s/3pXBbJ" rel="nofollow"><code>serializer._writeHostObject()</code></a>.</p>
<h4>serializer.writeUint64(hi, lo)<span><a class="mark" href="v8.html#v8_serializer_writeuint64_hi_lo" id="v8_serializer_writeuint64_hi_lo">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>hi</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li><code>lo</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>Write a raw 64-bit unsigned integer, split into high and low 32-bit parts.
For use inside of a custom <a href="http://nodejs.cn/s/3pXBbJ" rel="nofollow"><code>serializer._writeHostObject()</code></a>.</p>
<h4>serializer.writeDouble(value)<span><a class="mark" href="v8.html#v8_serializer_writedouble_value" id="v8_serializer_writedouble_value">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>value</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>Write a JS <code>number</code> value.
For use inside of a custom <a href="http://nodejs.cn/s/3pXBbJ" rel="nofollow"><code>serializer._writeHostObject()</code></a>.</p>
<h4>serializer.writeRawBytes(buffer)<span><a class="mark" href="v8.html#v8_serializer_writerawbytes_buffer" id="v8_serializer_writerawbytes_buffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>buffer</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView&gt;</a></li>
</ul>
<p>Write raw bytes into the serializer&#x2019;s internal buffer. The deserializer
will require a way to compute the length of the buffer.
For use inside of a custom <a href="http://nodejs.cn/s/3pXBbJ" rel="nofollow"><code>serializer._writeHostObject()</code></a>.</p>
<h4>serializer._writeHostObject(object)<span><a class="mark" href="v8.html#v8_serializer_writehostobject_object" id="v8_serializer_writehostobject_object">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>object</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>This method is called to write some kind of host object, i.e. an object created
by native C++ bindings. If it is not possible to serialize <code>object</code>, a suitable
exception should be thrown.</p>
<p>This method is not present on the <code>Serializer</code> class itself but can be provided
by subclasses.</p>
<h4>serializer._getDataCloneError(message)<span><a class="mark" href="v8.html#v8_serializer_getdatacloneerror_message" id="v8_serializer_getdatacloneerror_message">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>message</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>This method is called to generate error objects that will be thrown when an
object can not be cloned.</p>
<p>This method defaults to the <a href="http://nodejs.cn/s/FLTm19" rel="nofollow"><code>Error</code></a> constructor and can be overridden on
subclasses.</p>
<h4>serializer._getSharedArrayBufferId(sharedArrayBuffer)<span><a class="mark" href="v8.html#v8_serializer_getsharedarraybufferid_sharedarraybuffer" id="v8_serializer_getsharedarraybufferid_sharedarraybuffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>sharedArrayBuffer</code> <a href="http://nodejs.cn/s/6J6LBy" target="_blank" rel="nofollow" class="type">&lt;SharedArrayBuffer&gt;</a></li>
</ul>
<p>This method is called when the serializer is going to serialize a
<code>SharedArrayBuffer</code> object. It must return an unsigned 32-bit integer ID for
the object, using the same ID if this <code>SharedArrayBuffer</code> has already been
serialized. When deserializing, this ID will be passed to
<a href="http://nodejs.cn/s/38Wv5D" rel="nofollow"><code>deserializer.transferArrayBuffer()</code></a>.</p>
<p>If the object cannot be serialized, an exception should be thrown.</p>
<p>This method is not present on the <code>Serializer</code> class itself but can be provided
by subclasses.</p>
<h4>serializer._setTreatArrayBufferViewsAsHostObjects(flag)<span><a class="mark" href="v8.html#v8_serializer_settreatarraybufferviewsashostobjects_flag" id="v8_serializer_settreatarraybufferviewsashostobjects_flag">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>flag</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> <strong>Default:</strong> <code>false</code></li>
</ul>
<p>Indicate whether to treat <code>TypedArray</code> and <code>DataView</code> objects as
host objects, i.e. pass them to <a href="http://nodejs.cn/s/3pXBbJ" rel="nofollow"><code>serializer._writeHostObject()</code></a>.</p>
<h3>v8.Deserializer &#x7C7B;<span><a class="mark" href="v8.html#v8_class_v8_deserializer" id="v8_class_v8_deserializer">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<h4>new Deserializer(buffer)<span><a class="mark" href="v8.html#v8_new_deserializer_buffer" id="v8_new_deserializer_buffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>buffer</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView&gt;</a> A buffer returned by
<a href="http://nodejs.cn/s/SnjfXU" rel="nofollow"><code>serializer.releaseBuffer()</code></a>.</li>
</ul>
<p>Creates a new <code>Deserializer</code> object.</p>
<h4>deserializer.readHeader()<span><a class="mark" href="v8.html#v8_deserializer_readheader" id="v8_deserializer_readheader">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p>Reads and validates a header (including the format version).
May, for example, reject an invalid or unsupported wire format. In that case,
an <code>Error</code> is thrown.</p>
<h4>deserializer.readValue()<span><a class="mark" href="v8.html#v8_deserializer_readvalue" id="v8_deserializer_readvalue">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p>Deserializes a JavaScript value from the buffer and returns it.</p>
<h4>deserializer.transferArrayBuffer(id, arrayBuffer)<span><a class="mark" href="v8.html#v8_deserializer_transferarraybuffer_id_arraybuffer" id="v8_deserializer_transferarraybuffer_id_arraybuffer">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>id</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a> A 32-bit unsigned integer.</li>
<li><code>arrayBuffer</code> <a href="http://nodejs.cn/s/mUbfvF" target="_blank" rel="nofollow" class="type">&lt;ArrayBuffer&gt;</a> | <a href="http://nodejs.cn/s/6J6LBy" target="_blank" rel="nofollow" class="type">&lt;SharedArrayBuffer&gt;</a> An <code>ArrayBuffer</code> instance.</li>
</ul>
<p>Marks an <code>ArrayBuffer</code> as having its contents transferred out of band.
Pass the corresponding <code>ArrayBuffer</code> in the serializing context to
<a href="http://nodejs.cn/s/wGu2eG" rel="nofollow"><code>serializer.transferArrayBuffer()</code></a> (or return the <code>id</code> from
<a href="http://nodejs.cn/s/ihHeFi" rel="nofollow"><code>serializer._getSharedArrayBufferId()</code></a> in the case of <code>SharedArrayBuffer</code>s).</p>
<h4>deserializer.getWireFormatVersion()<span><a class="mark" href="v8.html#v8_deserializer_getwireformatversion" id="v8_deserializer_getwireformatversion">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>Reads the underlying wire format version. Likely mostly to be useful to
legacy code reading old wire format versions. May not be called before
<code>.readHeader()</code>.</p>
<h4>deserializer.readUint32()<span><a class="mark" href="v8.html#v8_deserializer_readuint32" id="v8_deserializer_readuint32">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
</ul>
<p>Read a raw 32-bit unsigned integer and return it.
For use inside of a custom <a href="http://nodejs.cn/s/bykuJq" rel="nofollow"><code>deserializer._readHostObject()</code></a>.</p>
<h4>deserializer.readUint64()<span><a class="mark" href="v8.html#v8_deserializer_readuint64" id="v8_deserializer_readuint64">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer[]&gt;</a></li>
</ul>
<p>Read a raw 64-bit unsigned integer and return it as an array <code>[hi, lo]</code>
with two 32-bit unsigned integer entries.
For use inside of a custom <a href="http://nodejs.cn/s/bykuJq" rel="nofollow"><code>deserializer._readHostObject()</code></a>.</p>
<h4>deserializer.readDouble()<span><a class="mark" href="v8.html#v8_deserializer_readdouble" id="v8_deserializer_readdouble">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>Read a JS <code>number</code> value.
For use inside of a custom <a href="http://nodejs.cn/s/bykuJq" rel="nofollow"><code>deserializer._readHostObject()</code></a>.</p>
<h4>deserializer.readRawBytes(length)<span><a class="mark" href="v8.html#v8_deserializer_readrawbytes_length" id="v8_deserializer_readrawbytes_length">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<ul>
<li><code>length</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;integer&gt;</a></li>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>Read raw bytes from the deserializer&#x2019;s internal buffer. The <code>length</code> parameter
must correspond to the length of the buffer that was passed to
<a href="http://nodejs.cn/s/CUrQtv" rel="nofollow"><code>serializer.writeRawBytes()</code></a>.
For use inside of a custom <a href="http://nodejs.cn/s/bykuJq" rel="nofollow"><code>deserializer._readHostObject()</code></a>.</p>
<h4>deserializer._readHostObject()<span><a class="mark" href="v8.html#v8_deserializer_readhostobject" id="v8_deserializer_readhostobject">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<p>This method is called to read some kind of host object, i.e. an object that is
created by native C++ bindings. If it is not possible to deserialize the data,
a suitable exception should be thrown.</p>
<p>This method is not present on the <code>Deserializer</code> class itself but can be
provided by subclasses.</p>
<h3>v8.DefaultSerializer &#x7C7B;<span><a class="mark" href="v8.html#v8_class_v8_defaultserializer" id="v8_class_v8_defaultserializer">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<p>A subclass of <a href="http://nodejs.cn/s/jXp5uM" rel="nofollow"><code>Serializer</code></a> that serializes <code>TypedArray</code>
(in particular <a href="http://nodejs.cn/s/FP4oTy" rel="nofollow"><code>Buffer</code></a>) and <code>DataView</code> objects as host objects, and only
stores the part of their underlying <code>ArrayBuffer</code>s that they are referring to.</p>
<h3>v8.DefaultDeserializer &#x7C7B;<span><a class="mark" href="v8.html#v8_class_v8_defaultdeserializer" id="v8_class_v8_defaultdeserializer">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<p>A subclass of <a href="http://nodejs.cn/s/Lxf2oz" rel="nofollow"><code>Deserializer</code></a> corresponding to the format written by
<a href="http://nodejs.cn/s/8yqbWh" rel="nofollow"><code>DefaultSerializer</code></a>.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- 搜索弹窗 -->
  <!-- <div id="search_modal"></div> -->
  <!-- js -->
  <!--[if lt IE 10]><script src="/static/lib/placeholders.js?20170426"></script><![endif]-->
  
  <script>
    document.write('<script src="http://nodejs.cn/api/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756329101"><\/script>');
  </script>

</body></html>