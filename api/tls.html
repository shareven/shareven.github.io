<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>tls | Node.js API &#x6587;&#x6863;</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756325981" rel="stylesheet">')
  </script>
  
</head>
<body class="alt apidoc" id="page_api">
  <div id="api-section-tls">
    <div id="content" class="clearfix">
      <div id="column2" class="interior">
        <div id="intro" class="interior">
          <a href="http://nodejs.cn/" rel="nofollow">
            Node.js &#x4E2D;&#x6587;&#x7F51;
          </a>
          <a href="index.html" rel="nofollow">
            v12.14.0
          </a>
          <div id="biz_nav"><a title="&#x5F00;&#x8BFE;&#x5427;" target="_blank" href="https://datayi.cn/w/LPd57bYo" rel="nofollow"><img></a></div>
        </div>
        <div class="line"></div>
        <ul>
<li><a href="assert.html" class="nav-assert" rel="nofollow">assert - &#x65AD;&#x8A00;</a></li>
<li><a href="async_hooks.html" class="nav-async_hooks" rel="nofollow">async_hooks - &#x5F02;&#x6B65;&#x94A9;&#x5B50;</a></li>
<li><a href="buffer.html" class="nav-buffer" rel="nofollow">Buffer - &#x7F13;&#x51B2;&#x5668;</a></li>
<li><a href="child_process.html" class="nav-child_process" rel="nofollow">child_process - &#x5B50;&#x8FDB;&#x7A0B;</a></li>
<li><a href="cluster.html" class="nav-cluster" rel="nofollow">cluster - &#x96C6;&#x7FA4;</a></li>
<li><a href="console.html" class="nav-console" rel="nofollow">console - &#x63A7;&#x5236;&#x53F0;</a></li>
<li><a href="crypto.html" class="nav-crypto" rel="nofollow">crypto - &#x52A0;&#x5BC6;</a></li>
<li><a href="debugger.html" class="nav-debugger" rel="nofollow">debugger - &#x8C03;&#x8BD5;&#x5668;</a></li>
<li><a href="dgram.html" class="nav-dgram" rel="nofollow">dgram - &#x6570;&#x636E;&#x62A5;</a></li>
<li><a href="dns.html" class="nav-dns" rel="nofollow">dns - &#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;</a></li>
<li><a href="domain.html" class="nav-domain" rel="nofollow">domain - &#x57DF;</a></li>
<li><a href="errors.html" class="nav-errors" rel="nofollow">Error - &#x5F02;&#x5E38;</a></li>
<li><a href="events.html" class="nav-events" rel="nofollow">events - &#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x5668;</a></li>
<li><a href="fs.html" class="nav-fs" rel="nofollow">fs - &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</a></li>
<li><a href="globals.html" class="nav-globals" rel="nofollow">global - &#x5168;&#x5C40;&#x53D8;&#x91CF;</a></li>
<li><a href="http.html" class="nav-http" rel="nofollow">http - HTTP</a></li>
<li><a href="http2.html" class="nav-http2" rel="nofollow">http2 - HTTP/2</a></li>
<li><a href="https.html" class="nav-https" rel="nofollow">https - HTTPS</a></li>
<li><a href="inspector.html" class="nav-inspector" rel="nofollow">inspector - &#x68C0;&#x67E5;&#x5668;</a></li>
<li><a href="modules.html" class="nav-modules" rel="nofollow">module - &#x6A21;&#x5757;</a></li>
<li><a href="net.html" class="nav-net" rel="nofollow">net - &#x7F51;&#x7EDC;</a></li>
<li><a href="os.html" class="nav-os" rel="nofollow">os - &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</a></li>
<li><a href="path.html" class="nav-path" rel="nofollow">path - &#x8DEF;&#x5F84;</a></li>
<li><a href="perf_hooks.html" class="nav-perf_hooks" rel="nofollow">perf_hooks - &#x6027;&#x80FD;&#x94A9;&#x5B50;</a></li>
<li><a href="process.html" class="nav-process" rel="nofollow">process - &#x8FDB;&#x7A0B;</a></li>
<li><a href="punycode.html" class="nav-punycode" rel="nofollow">punycode - &#x57DF;&#x540D;&#x4EE3;&#x7801;</a></li>
<li><a href="querystring.html" class="nav-querystring" rel="nofollow">querystring - &#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;</a></li>
<li><a href="readline.html" class="nav-readline" rel="nofollow">readline - &#x9010;&#x884C;&#x8BFB;&#x53D6;</a></li>
<li><a href="repl.html" class="nav-repl" rel="nofollow">repl - &#x4EA4;&#x4E92;&#x5F0F;&#x89E3;&#x91CA;&#x5668;</a></li>
<li><a href="stream.html" class="nav-stream" rel="nofollow">stream - &#x6D41;</a></li>
<li><a href="string_decoder.html" class="nav-string_decoder" rel="nofollow">string_decoder - &#x5B57;&#x7B26;&#x4E32;&#x89E3;&#x7801;&#x5668;</a></li>
<li><a href="timers.html" class="nav-timers" rel="nofollow">timer - &#x5B9A;&#x65F6;&#x5668;</a></li>
<li><a href="tls.html" class="nav-tls active" rel="nofollow">tls - &#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;</a></li>
<li><a href="tracing.html" class="nav-tracing" rel="nofollow">trace_events - &#x8DDF;&#x8E2A;&#x4E8B;&#x4EF6;</a></li>
<li><a href="tty.html" class="nav-tty" rel="nofollow">tty - &#x7EC8;&#x7AEF;</a></li>
<li><a href="url.html" class="nav-url" rel="nofollow">url - URL</a></li>
<li><a href="util.html" class="nav-util" rel="nofollow">util - &#x5B9E;&#x7528;&#x5DE5;&#x5177;</a></li>
<li><a href="v8.html" class="nav-v8" rel="nofollow">v8 - V8&#x5F15;&#x64CE;</a></li>
<li><a href="vm.html" class="nav-vm" rel="nofollow">vm - &#x865A;&#x62DF;&#x673A;</a></li>
<li><a href="worker_threads.html" class="nav-worker_threads" rel="nofollow">worker_threads - &#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;</a></li>
<li><a href="zlib.html" class="nav-zlib" rel="nofollow">zlib - &#x538B;&#x7F29;</a></li>
</ul>
<div class="line"></div>
<ul>
<li><a href="documentation.html" class="nav-documentation" rel="nofollow">&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6863;</a></li>
<li><a href="synopsis.html" class="nav-synopsis" rel="nofollow">&#x7528;&#x6CD5;&#x4E0E;&#x793A;&#x4F8B;</a></li>
<li><a href="addons.html" class="nav-addons" rel="nofollow">C++&#x63D2;&#x4EF6;</a></li>
<li><a href="n-api.html" class="nav-n-api" rel="nofollow">N-API</a></li>
<li><a href="cli.html" class="nav-cli" rel="nofollow">&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</a></li>
<li><a href="esm.html" class="nav-esm" rel="nofollow">ECMAScript &#x6A21;&#x5757;</a></li>
<li><a href="policy.html" class="nav-policy" rel="nofollow">&#x5B89;&#x5168;&#x7B56;&#x7565;</a></li>
<li><a href="report.html" class="nav-report" rel="nofollow">&#x8BCA;&#x65AD;&#x62A5;&#x8868;</a></li>
<li><a href="intl.html" class="nav-intl" rel="nofollow">&#x56FD;&#x9645;&#x5316;&#x652F;&#x6301;</a></li>
<li><a href="deprecations.html" class="nav-deprecations" rel="nofollow">&#x5E9F;&#x5F03;&#x7684; API</a></li>
</ul>
        
      </div>
  
      <div id="column1" data-id="tls" class="interior">
        <header>
          <h1>Node.js v12.14.0 &#x6587;&#x6863;</h1>
          <div id="gtoc">
            <ul>
              <li>
                <a href="index.html" name="toc">&#x8FD4;&#x56DE;&#x6587;&#x6863;&#x9996;&#x9875;</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">&#x641C;&#x7D22;</a>
              </li>
              <!-- 
    <li class="version-picker">
      <a href="#">查看其他版本 <span>&#x25bc;</span></a>
      <ol class="version-picker"><li><a href="/latest-api/tls.html">12.x</a></li>
<li><a href="/api/tls.html">10.x</a></li></ol>
    </li>
   -->
            </ul>
          </div>
          <hr>
        </header>

        
        
        <div id="toc">
          <h2>&#x76EE;&#x5F55;</h2>
          <ul>
<li>
<p><span class="stability_2"><a href="tls.html#tls_tls_ssl">tls&#xFF08;&#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;&#xFF09;</a></span></p>
<ul>
<li>
<p><a href="tls.html#tls_tls_ssl_concepts">TLS/SSL &#x6982;&#x5FF5;</a></p>
<ul>
<li><a href="tls.html#tls_perfect_forward_secrecy">&#x5B8C;&#x5168;&#x524D;&#x5411;&#x4FDD;&#x5BC6;</a></li>
<li><a href="tls.html#tls_alpn_and_sni">ALPN &#x548C; SNI</a></li>
<li><a href="tls.html#tls_client_initiated_renegotiation_attack_mitigation">&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x7684;&#x91CD;&#x534F;&#x5546;&#x653B;&#x51FB;&#x7F13;&#x89E3;</a></li>
<li><a href="tls.html#tls_session_resumption">&#x4F1A;&#x8BDD;&#x6062;&#x590D;</a></li>
</ul>
</li>
<li><a href="tls.html#tls_modifying_the_default_tls_cipher_suite">&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684; TLS &#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;</a></li>
<li>
<p><a href="tls.html#tls_class_tls_server">tls.Server &#x7C7B;</a></p>
<ul>
<li><a href="tls.html#tls_event_keylog">&apos;keylog&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_newsession">&apos;newSession&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_ocsprequest">&apos;OCSPRequest&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_resumesession">&apos;resumeSession&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_secureconnection">&apos;secureConnection&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_tlsclienterror">&apos;tlsClientError&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_server_addcontext_hostname_context">server.addContext(hostname, context)</a></li>
<li><a href="tls.html#tls_server_address">server.address()</a></li>
<li><a href="tls.html#tls_server_close_callback">server.close([callback])</a></li>
<li><span class="stability_0"><a href="tls.html#tls_server_connections">server.connections</a></span></li>
<li><a href="tls.html#tls_server_getticketkeys">server.getTicketKeys()</a></li>
<li><a href="tls.html#tls_server_listen">server.listen()</a></li>
<li><a href="tls.html#tls_server_setsecurecontext_options">server.setSecureContext(options)</a></li>
<li><a href="tls.html#tls_server_setticketkeys_keys">server.setTicketKeys(keys)</a></li>
</ul>
</li>
<li>
<p><a href="tls.html#tls_class_tls_tlssocket">tls.TLSSocket &#x7C7B;</a></p>
<ul>
<li><a href="tls.html#tls_new_tls_tlssocket_socket_options">new tls.TLSSocket(socket[, options])</a></li>
<li><a href="tls.html#tls_event_keylog_1">&apos;keylog&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_ocspresponse">&apos;OCSPResponse&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_secureconnect">&apos;secureConnect&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_event_session">&apos;session&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="tls.html#tls_tlssocket_address">tlsSocket.address()</a></li>
<li><a href="tls.html#tls_tlssocket_authorizationerror">tlsSocket.authorizationError</a></li>
<li><a href="tls.html#tls_tlssocket_authorized">tlsSocket.authorized</a></li>
<li><a href="tls.html#tls_tlssocket_disablerenegotiation">tlsSocket.disableRenegotiation()</a></li>
<li><a href="tls.html#tls_tlssocket_enabletrace">tlsSocket.enableTrace()</a></li>
<li><a href="tls.html#tls_tlssocket_encrypted">tlsSocket.encrypted</a></li>
<li><a href="tls.html#tls_tlssocket_getcertificate">tlsSocket.getCertificate()</a></li>
<li><a href="tls.html#tls_tlssocket_getcipher">tlsSocket.getCipher()</a></li>
<li><a href="tls.html#tls_tlssocket_getephemeralkeyinfo">tlsSocket.getEphemeralKeyInfo()</a></li>
<li><a href="tls.html#tls_tlssocket_getfinished">tlsSocket.getFinished()</a></li>
<li>
<p><a href="tls.html#tls_tlssocket_getpeercertificate_detailed">tlsSocket.getPeerCertificate([detailed])</a></p>
<ul>
<li><a href="tls.html#tls_certificate_object">&#x8BC1;&#x4E66;&#x5BF9;&#x8C61;</a></li>
</ul>
</li>
<li><a href="tls.html#tls_tlssocket_getpeerfinished">tlsSocket.getPeerFinished()</a></li>
<li><a href="tls.html#tls_tlssocket_getprotocol">tlsSocket.getProtocol()</a></li>
<li><a href="tls.html#tls_tlssocket_getsession">tlsSocket.getSession()</a></li>
<li><a href="tls.html#tls_tlssocket_getsharedsigalgs">tlsSocket.getSharedSigalgs()</a></li>
<li><a href="tls.html#tls_tlssocket_gettlsticket">tlsSocket.getTLSTicket()</a></li>
<li><a href="tls.html#tls_tlssocket_issessionreused">tlsSocket.isSessionReused()</a></li>
<li><a href="tls.html#tls_tlssocket_localaddress">tlsSocket.localAddress</a></li>
<li><a href="tls.html#tls_tlssocket_localport">tlsSocket.localPort</a></li>
<li><a href="tls.html#tls_tlssocket_remoteaddress">tlsSocket.remoteAddress</a></li>
<li><a href="tls.html#tls_tlssocket_remotefamily">tlsSocket.remoteFamily</a></li>
<li><a href="tls.html#tls_tlssocket_remoteport">tlsSocket.remotePort</a></li>
<li><a href="tls.html#tls_tlssocket_renegotiate_options_callback">tlsSocket.renegotiate(options, callback)</a></li>
<li><a href="tls.html#tls_tlssocket_setmaxsendfragment_size">tlsSocket.setMaxSendFragment(size)</a></li>
</ul>
</li>
<li><a href="tls.html#tls_tls_checkserveridentity_hostname_cert">tls.checkServerIdentity(hostname, cert)</a></li>
<li><a href="tls.html#tls_tls_connect_options_callback">tls.connect(options[, callback])</a></li>
<li><a href="tls.html#tls_tls_connect_path_options_callback">tls.connect(path[, options][, callback])</a></li>
<li><a href="tls.html#tls_tls_connect_port_host_options_callback">tls.connect(port[, host][, options][, callback])</a></li>
<li><a href="tls.html#tls_tls_createsecurecontext_options">tls.createSecureContext([options])</a></li>
<li><a href="tls.html#tls_tls_createserver_options_secureconnectionlistener">tls.createServer([options][, secureConnectionListener])</a></li>
<li><a href="tls.html#tls_tls_getciphers">tls.getCiphers()</a></li>
<li><a href="tls.html#tls_tls_rootcertificates">tls.rootCertificates</a></li>
<li><a href="tls.html#tls_tls_default_ecdh_curve">tls.DEFAULT_ECDH_CURVE</a></li>
<li><a href="tls.html#tls_tls_default_max_version">tls.DEFAULT_MAX_VERSION</a></li>
<li><a href="tls.html#tls_tls_default_min_version">tls.DEFAULT_MIN_VERSION</a></li>
<li>
<p><a href="tls.html#tls_deprecated_apis">&#x5E9F;&#x5F03;&#x7684; API</a></p>
<ul>
<li>
<p><span class="stability_0"><a href="tls.html#tls_class_cryptostream">CryptoStream &#x7C7B;</a></span></p>
<ul>
<li><a href="tls.html#tls_cryptostream_byteswritten">cryptoStream.bytesWritten</a></li>
</ul>
</li>
<li>
<p><span class="stability_0"><a href="tls.html#tls_class_securepair">SecurePair &#x7C7B;</a></span></p>
<ul>
<li><a href="tls.html#tls_event_secure">&apos;secure&apos; &#x4E8B;&#x4EF6;</a></li>
</ul>
</li>
<li><span class="stability_0"><a href="tls.html#tls_tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options">tls.createSecurePair([context][, isServer][, requestCert][, rejectUnauthorized][, options])</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
        </div>

        <!-- <div id="biz_content">
          <a href="http://www.tp-shop.cn/index.php?http_referer=node" target="_blank">
            <img src="//static.nodejs.cn/_static/img/ad/api_content_tpshop.jpg" />
          </a>
        </div> -->
  
        <div id="apicontent">
          <h1>tls&#xFF08;&#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;&#xFF09;<span><a class="mark" href="tls.html#tls_tls_ssl" id="tls_tls_ssl">#</a></span></h1><p class="tip_wrap"><a href="tls/tls_ssl.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_ssl.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<!--introduced_in=v0.10.0-->
<p></p><div class="api_stability api_stability_2"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 2</a> - &#x7A33;&#x5B9A;</div><p></p>
<p><code>tls</code> &#x6A21;&#x5757;&#x662F;&#x5BF9;&#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;&#xFF08;TLS&#xFF09;&#x53CA;&#x5B89;&#x5168;&#x5957;&#x63A5;&#x5C42;&#xFF08;SSL&#xFF09;&#x534F;&#x8BAE;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5EFA;&#x7ACB;&#x5728;OpenSSL&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x3002;
&#x6309;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x5F15;&#x7528;&#x6B64;&#x6A21;&#x5757;:</p>
<pre><code class="language-js">const tls = require(&apos;tls&apos;);
</code></pre>
<h2>TLS/SSL &#x6982;&#x5FF5;<span><a class="mark" href="tls.html#tls_tls_ssl_concepts" id="tls_tls_ssl_concepts">#</a></span></h2><p class="tip_wrap"><a href="tls/tls_ssl_concepts.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_ssl_concepts.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<p>TLS/SSL &#x662F;&#x516C;&#x5171;/&#x79C1;&#x4EBA;&#x7684;&#x5BC6;&#x94A5;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#xFF08;PKI&#xFF09;&#x3002;
&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x5E94;&#x8BE5;&#x6709;&#x4E00;&#x4E2A;&#x79C1;&#x94A5;&#x3002;</p>
<p>&#x79C1;&#x94A5;&#x80FD;&#x6709;&#x591A;&#x79CD;&#x751F;&#x6210;&#x65B9;&#x5F0F;&#xFF0C;&#x4E0B;&#x9762;&#x4E3E;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;
&#x7528; OpenSSL &#x7684;&#x547D;&#x4EE4;&#x884C;&#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A; 2048 &#x4F4D;&#x7684; RSA &#x79C1;&#x94A5;&#xFF1A;</p>
<pre><code class="language-sh">openssl genrsa -out ryans-key.pem 2048
</code></pre>
<p>&#x901A;&#x8FC7; TLS/SSL&#xFF0C;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x548C;&#x4E00;&#x4E9B;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;&#x5FC5;&#x987B;&#x8981;&#x4E00;&#x4E2A;&#x8BC1;&#x4E66;&#x3002;
&#x8BC1;&#x4E66;&#x662F;&#x76F8;&#x4F3C;&#x4E8E;&#x79C1;&#x94A5;&#x7684;&#x516C;&#x94A5;,&#x5B83;&#x7531; CA &#x6216;&#x8005;&#x79C1;&#x94A5;&#x62E5;&#x6709;&#x8005;&#x6570;&#x5B57;&#x7B7E;&#x540D;&#xFF0C;&#x7279;&#x522B;&#x5730;&#xFF0C;&#x79C1;&#x94A5;&#x62E5;&#x6709;&#x8005;&#x6240;&#x7B7E;&#x540D;&#x7684;&#x88AB;&#x79F0;&#x4E3A;&#x81EA;&#x7B7E;&#x540D;&#x3002;
&#x83B7;&#x53D6;&#x8BC1;&#x4E66;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#x662F;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x8BC1;&#x4E66;&#x7533;&#x8BF7;&#x6587;&#x4EF6;&#xFF08;CSR)&#x3002;</p>
<p>&#x7528; OpenSSL &#x80FD;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x79C1;&#x94A5;&#x7684; CSR &#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-sh">openssl req -new -sha256 -key ryans-key.pem -out ryans-csr.pem
</code></pre>
<p>CSR &#x6587;&#x4EF6;&#x88AB;&#x751F;&#x6210;&#x4EE5;&#x540E;&#xFF0C;&#x5B83;&#x65E2;&#x80FD;&#x88AB; CA &#x7B7E;&#x540D;&#x4E5F;&#x80FD;&#x88AB;&#x7528;&#x6237;&#x81EA;&#x7B7E;&#x540D;&#x3002;
&#x7528; OpenSSL &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x81EA;&#x7B7E;&#x540D;&#x8BC1;&#x4E66;&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="language-sh">openssl x509 -req -in ryans-csr.pem -signkey ryans-key.pem -out ryans-cert.pem
</code></pre>
<p>&#x8BC1;&#x4E66;&#x88AB;&#x751F;&#x6210;&#x4EE5;&#x540E;&#xFF0C;&#x5B83;&#x53C8;&#x80FD;&#x7528;&#x6765;&#x751F;&#x6210;&#x4E00;&#x4E2A; <code>.pfx</code> &#x6216;&#x8005; <code>.p12</code> &#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-sh">openssl pkcs12 -export -in ryans-cert.pem -inkey ryans-key.pem \
      -certfile ca-cert.pem -out ryans.pfx
</code></pre>
<p>&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;:</p>
<ul>
<li><code>in</code>: &#x88AB;&#x7B7E;&#x540D;&#x7684;&#x8BC1;&#x4E66;&#x3002;</li>
<li><code>inkey</code>: &#x6709;&#x5173;&#x7684;&#x79C1;&#x94A5;&#x3002;</li>
<li><code>certfile</code>: &#x7B7E;&#x5165;&#x6587;&#x4EF6;&#x7684;&#x8BC1;&#x4E66;&#x4E32;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A; <code>cat ca1-cert.pem ca2-cert.pem &gt; ca-cert.pem</code>&#x3002;</li>
</ul>
<h3>&#x5B8C;&#x5168;&#x524D;&#x5411;&#x4FDD;&#x5BC6;<span><a class="mark" href="tls.html#tls_perfect_forward_secrecy" id="tls_perfect_forward_secrecy">#</a></span></h3><p class="tip_wrap"><a href="tls/perfect_forward_secrecy.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/perfect_forward_secrecy.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<!-- type=misc -->
<p>&#x672F;&#x8BED;&#x201C;<a href="http://nodejs.cn/s/wybzZg" rel="nofollow">&#x524D;&#x5411;&#x4FDD;&#x5BC6;</a>&#x201D;&#x6216;&#x201C;&#x5B8C;&#x5168;&#x524D;&#x5411;&#x4FDD;&#x5BC6;&#x201D;&#x662F;&#x4E00;&#x79CD;&#x5BC6;&#x94A5;&#x534F;&#x5546;&#xFF08;&#x6216;&#x79F0;&#x505A;&#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#xFF09;&#x65B9;&#x6CD5;&#x3002;
&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;,&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5728;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x4E2D;&#xFF0C;&#x534F;&#x5546;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x751F;&#x6210;&#x7684;&#x5BC6;&#x94A5;&#x8FDB;&#x884C;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x7684;&#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x3002;
&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5373;&#x4F7F;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x79C1;&#x94A5;&#x53D1;&#x751F;&#x6CC4;&#x6F0F;&#xFF0C;&#x7A83;&#x5BC6;&#x8005;&#x4E0E;&#x653B;&#x51FB;&#x8005;&#x4E5F;&#x65E0;&#x6CD5;&#x89E3;&#x5BC6;&#x901A;&#x4FE1;&#x5185;&#x5BB9;&#xFF0C;&#x9664;&#x975E;&#x4ED6;&#x4EEC;&#x80FD;&#x5F97;&#x5230;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x7684;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x3002;</p>
<p>TLS/SSL &#x63E1;&#x624B;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x5B8C;&#x5168;&#x524D;&#x5411;&#x5373;&#x6BCF;&#x6B21;&#x4F1A;&#x8BDD;&#x90FD;&#x4F1A;&#x968F;&#x673A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x5BF9;&#x7528;&#x4E8E;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x5BC6;&#x94A5;&#x534F;&#x5546;(&#x533A;&#x522B;&#x4E8E;&#x6BCF;&#x6B21;&#x4F1A;&#x8BDD;&#x90FD;&#x662F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x5BC6;&#x94A5;)&#x3002;
&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x6280;&#x672F;&#x7684;&#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x7B97;&#x6CD5;&#x79F0;&#x4E3A;&#x201C;ephemeral&#x201D;&#x3002;</p>
<p>&#x5F53;&#x524D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x5B8C;&#x5168;&#x524D;&#x5411;&#x4FDD;&#x5BC6;&#x7684;&#x7B97;&#x6CD5;&#xFF08;&#x6CE8;&#x610F;&#x7B97;&#x6CD5;&#x7ED3;&#x5C3E;&#x7684;&quot;E&quot;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="http://nodejs.cn/s/iDZV96" rel="nofollow">DHE</a> - &#x4F7F;&#x7528;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x7684; Diffie Hellman &#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x7B97;&#x6CD5;&#x3002;</li>
<li><a href="http://nodejs.cn/s/p9zTGn" rel="nofollow">ECDHE</a> - &#x4F7F;&#x7528;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x7684;&#x692D;&#x5706;&#x66F2;&#x7EBF; Diffie Hellman &#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x7B97;&#x6CD5;&#x3002;</li>
</ul>
<p>&#x4F7F;&#x7528;&#x4E34;&#x65F6;&#x5BC6;&#x94A5;&#x4F1A;&#x5E26;&#x6765;&#x6027;&#x80FD;&#x635F;&#x5931;&#xFF0C;&#x56E0;&#x4E3A;&#x5BC6;&#x94A5;&#x751F;&#x6210;&#x7684;&#x8FC7;&#x7A0B;&#x5341;&#x5206;&#x6D88;&#x8017; CPU &#x8BA1;&#x7B97;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x5982;&#x9700;&#x4F7F;&#x7528;&#x5B8C;&#x5168;&#x524D;&#x5411;&#x52A0;&#x5BC6;&#xFF0C;&#x4F8B;&#x5982;&#x4F7F;&#x7528; <code>tls</code> &#x6A21;&#x5757;&#x7684; <code>DHE</code> &#x7B97;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x751F;&#x6210;&#x4E00;&#x4E2A; Diffie-Hellman &#x53C2;&#x6570;&#x5E76;&#x5C06;&#x5176;&#x7528; <code>dhparam</code> &#x58F0;&#x660E;&#x5728; <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> &#x4E2D;&#x3002;
&#x5982;&#x4E0B;&#x4F8B;&#x5B50;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528; OpenSSL &#x547D;&#x4EE4;&#x751F;&#x6210;&#x53C2;&#x6570;&#xFF1A;</p>
<pre><code class="language-sh">openssl dhparam -outform PEM -out dhparam.pem 2048
</code></pre>
<p>&#x5982;&#x9700;&#x4F7F;&#x7528; <code>ECDHE</code> &#x7B97;&#x6CD5;&#xFF0C;&#x5219;&#x4E0D;&#x9700;&#x8981;&#x751F;&#x6210; Diffie-Hellman &#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684; ECDHE &#x66F2;&#x7EBF;&#x3002;
&#x5728;&#x521B;&#x5EFA; TLS Server &#x65F6;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; <code>ecdhCurve</code> &#x5C5E;&#x6027;&#x58F0;&#x660E;&#x670D;&#x52A1;&#x5668;&#x652F;&#x6301;&#x7684;&#x66F2;&#x7EBF;&#x540D;&#x8BCD;&#xFF0C;&#x8BE6;&#x8BF7;&#x53C2;&#x9605; <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a>&#x3002;</p>
<p>&#x5B8C;&#x5168;&#x524D;&#x5411;&#x4FDD;&#x5BC6;&#x5728; TLSv1.2 &#x4E4B;&#x524D;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x4F46;&#x5B83;&#x4E0D;&#x662F; TLSv1.3 &#x7684;&#x53EF;&#x9009;&#x9879;&#xFF0C;&#x56E0;&#x4E3A;&#x6240;&#x6709; TLSv1.3 &#x5BC6;&#x7801;&#x5957;&#x4EF6;&#x90FD;&#x4F7F;&#x7528; ECDHE&#x3002;</p>
<h3>ALPN &#x548C; SNI<span><a class="mark" href="tls.html#tls_alpn_and_sni" id="tls_alpn_and_sni">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/alpn_and_sni.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<!-- type=misc -->
<p>ALPN (Application-Layer Protocol Negotiation Extension) and
SNI (Server Name Indication) are TLS handshake extensions:</p>
<ul>
<li>ALPN: Allows the use of one TLS server for multiple protocols (HTTP, HTTP/2)</li>
<li>SNI: Allows the use of one TLS server for multiple hostnames with different
SSL certificates.</li>
</ul>
<h3>&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x7684;&#x91CD;&#x534F;&#x5546;&#x653B;&#x51FB;&#x7F13;&#x89E3;<span><a class="mark" href="tls.html#tls_client_initiated_renegotiation_attack_mitigation" id="tls_client_initiated_renegotiation_attack_mitigation">#</a></span></h3><p class="tip_wrap"><a href="tls/client_initiated_renegotiation_attack_mitigation.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/client_initiated_renegotiation_attack_mitigation.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<!-- type=misc -->
<p>TLS &#x534F;&#x8BAE;&#x5141;&#x8BB8;&#x5BA2;&#x6237;&#x7AEF;&#x5728; TLS &#x4F1A;&#x8BDD;&#x4E2D;&#x8FDB;&#x884C;&#x91CD;&#x534F;&#x5546;&#xFF0C;&#x7528;&#x4E8E;&#x5B89;&#x5168;&#x56E0;&#x7D20;&#x7684;&#x8003;&#x91CF;&#x3002;
&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x4F1A;&#x8BDD;&#x91CD;&#x534F;&#x5546;&#x9700;&#x8981;&#x6D88;&#x8017;&#x5927;&#x91CF;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x5668;&#x5B58;&#x5728;&#x6F5C;&#x5728;&#x7684;&#x88AB; DDoS &#x653B;&#x51FB;&#x7684;&#x53EF;&#x80FD;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x8FD9;&#x4E2A;&#x98CE;&#x9669;&#xFF0C;&#x9650;&#x5236;&#x6BCF;&#x5341;&#x5206;&#x949F;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E09;&#x6B21;&#x91CD;&#x534F;&#x5546;&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#x5C06;&#x4F1A;&#x5728; <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> &#x5B9E;&#x4F8B;&#x4E2D;&#x4EA7;&#x751F;&#x4E00;&#x4E2A; <code>error</code> &#x4E8B;&#x4EF6;&#x3002;
&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#x662F;&#x53EF;&#x914D;&#x7F6E;&#x7684;:</p>
<ul>
<li><code>tls.CLIENT_RENEG_LIMIT</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> &#x6307;&#x5B9A;&#x91CD;&#x534F;&#x5546;&#x8BF7;&#x6C42;&#x7684;&#x6B21;&#x6570;&#x9650;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>3</code>&#x3002;</li>
<li><code>tls.CLIENT_RENEG_WINDOW</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> &#x6307;&#x5B9A;&#x9650;&#x5236;&#x6B21;&#x6570;&#x7684;&#x751F;&#x6548;&#x65F6;&#x95F4;&#x6BB5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; <code>600</code>&#xFF08;10 &#x5206;&#x949F;&#xFF09;&#x3002;</li>
</ul>
<p>&#x4E0D;&#x5E94;&#x5728;&#x672A;&#x5145;&#x5206;&#x7406;&#x89E3;&#x5176;&#x542B;&#x4E49;&#x4E0E;&#x5F71;&#x54CD;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4FEE;&#x6539;&#x4E0A;&#x8FF0;&#x53C2;&#x6570;&#x3002;</p>
<p>TLSv1.3 &#x4E0D;&#x652F;&#x6301;&#x91CD;&#x534F;&#x5546;&#x3002;</p>
<h3>&#x4F1A;&#x8BDD;&#x6062;&#x590D;<span><a class="mark" href="tls.html#tls_session_resumption" id="tls_session_resumption">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/session_resumption.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<p>Establishing a TLS session can be relatively slow. The process can be sped
up by saving and later reusing the session state. There are several mechanisms
to do so, discussed here from oldest to newest (and preferred).</p>
<p><strong><em>Session Identifiers</em></strong> Servers generate a unique ID for new connections and
send it to the client. Clients and servers save the session state. When
reconnecting, clients send the ID of their saved session state and if the server
also has the state for that ID, it can agree to use it. Otherwise, the server
will create a new session. See <a href="http://nodejs.cn/s/uEXxgB" rel="nofollow">RFC 2246</a> for more information, page 23 and
30.</p>
<p>Resumption using session identifiers is supported by most web browsers when
making HTTPS requests.</p>
<p>For Node.js, clients wait for the <a href="http://nodejs.cn/s/GHDdMj" rel="nofollow"><code>&apos;session&apos;</code></a> event to get the session data,
and provide the data to the <code>session</code> option of a subsequent <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>
to reuse the session. Servers must
implement handlers for the <a href="http://nodejs.cn/s/BoHJ4Z" rel="nofollow"><code>&apos;newSession&apos;</code></a> and <a href="http://nodejs.cn/s/GHghQC" rel="nofollow"><code>&apos;resumeSession&apos;</code></a> events
to save and restore the session data using the session ID as the lookup key to
reuse sessions. To reuse sessions across load balancers or cluster workers,
servers must use a shared session cache (such as Redis) in their session
handlers.</p>
<p><strong><em>Session Tickets</em></strong> The servers encrypt the entire session state and send it
to the client as a &quot;ticket&quot;. When reconnecting, the state is sent to the server
in the initial connection. This mechanism avoids the need for server-side
session cache. If the server doesn&apos;t use the ticket, for any reason (failure
to decrypt it, it&apos;s too old, etc.), it will create a new session and send a new
ticket. See <a href="http://nodejs.cn/s/ZpmZTP" rel="nofollow">RFC 5077</a> for more information.</p>
<p>Resumption using session tickets is becoming commonly supported by many web
browsers when making HTTPS requests.</p>
<p>For Node.js, clients use the same APIs for resumption with session identifiers
as for resumption with session tickets. For debugging, if
<a href="http://nodejs.cn/s/nmL5aV" rel="nofollow"><code>tls.TLSSocket.getTLSTicket()</code></a> returns a value, the session data contains a
ticket, otherwise it contains client-side session state.</p>
<p>With TLSv1.3, be aware that multiple tickets may be sent by the server,
resulting in multiple <code>&apos;session&apos;</code> events, see <a href="http://nodejs.cn/s/GHDdMj" rel="nofollow"><code>&apos;session&apos;</code></a> for more
information.</p>
<p>Single process servers need no specific implementation to use session tickets.
To use session tickets across server restarts or load balancers, servers must
all have the same ticket keys. There are three 16-byte keys internally, but the
tls API exposes them as a single 48-byte buffer for convenience.</p>
<p>Its possible to get the ticket keys by calling <a href="http://nodejs.cn/s/pNCRCh" rel="nofollow"><code>server.getTicketKeys()</code></a> on
one server instance and then distribute them, but it is more reasonable to
securely generate 48 bytes of secure random data and set them with the
<code>ticketKeys</code> option of <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a>. The keys should be regularly
regenerated and server&apos;s keys can be reset with
<a href="http://nodejs.cn/s/5TNwiX" rel="nofollow"><code>server.setTicketKeys()</code></a>.</p>
<p>Session ticket keys are cryptographic keys, and they <strong><em>must be stored
securely</em></strong>. With TLS 1.2 and below, if they are compromised all sessions that
used tickets encrypted with them can be decrypted. They should not be stored
on disk, and they should be regenerated regularly.</p>
<p>If clients advertise support for tickets, the server will send them. The
server can disable tickets by supplying
<code>require(&apos;constants&apos;).SSL_OP_NO_TICKET</code> in <code>secureOptions</code>.</p>
<p>Both session identifiers and session tickets timeout, causing the server to
create new sessions. The timeout can be configured with the <code>sessionTimeout</code>
option of <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a>.</p>
<p>For all the mechanisms, when resumption fails, servers will create new sessions.
Since failing to resume the session does not cause TLS/HTTPS connection
failures, it is easy to not notice unnecessarily poor TLS performance. The
OpenSSL CLI can be used to verify that servers are resuming sessions. Use the
<code>-reconnect</code> option to <code>openssl s_client</code>, for example:</p>
<pre><code class="language-sh">$ openssl s_client -connect localhost:443 -reconnect
</code></pre>
<p>Read through the debug output. The first connection should say &quot;New&quot;, for
example:</p>
<pre><code class="language-text">New, TLSv1.2, Cipher is ECDHE-RSA-AES128-GCM-SHA256
</code></pre>
<p>Subsequent connections should say &quot;Reused&quot;, for example:</p>
<pre><code class="language-text">Reused, TLSv1.2, Cipher is ECDHE-RSA-AES128-GCM-SHA256
</code></pre>
<h2>&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684; TLS &#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;<span><a class="mark" href="tls.html#tls_modifying_the_default_tls_cipher_suite" id="tls_modifying_the_default_tls_cipher_suite">#</a></span></h2><p class="tip_wrap"><a href="tls/modifying_the_default_tls_cipher_suite.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/modifying_the_default_tls_cipher_suite.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<p>Node.js &#x6784;&#x9020;&#x65F6;&#x5305;&#x542B;&#x4E86;&#x9ED8;&#x8BA4;&#x7684; TLS &#x5F00;&#x542F;&#x548C;&#x5173;&#x95ED;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x3002;
&#x76EE;&#x524D;&#x9ED8;&#x8BA4;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x662F;&#xFF1A;</p>
<pre><code class="language-txt">TLS_AES_256_GCM_SHA384:
TLS_CHACHA20_POLY1305_SHA256:
TLS_AES_128_GCM_SHA256:
ECDHE-RSA-AES128-GCM-SHA256:
ECDHE-ECDSA-AES128-GCM-SHA256:
ECDHE-RSA-AES256-GCM-SHA384:
ECDHE-ECDSA-AES256-GCM-SHA384:
DHE-RSA-AES128-GCM-SHA256:
ECDHE-RSA-AES128-SHA256:
DHE-RSA-AES128-SHA256:
ECDHE-RSA-AES256-SHA384:
DHE-RSA-AES256-SHA384:
ECDHE-RSA-AES256-SHA256:
DHE-RSA-AES256-SHA256:
HIGH:
!aNULL:
!eNULL:
!EXPORT:
!DES:
!RC4:
!MD5:
!PSK:
!SRP:
!CAMELLIA
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="http://nodejs.cn/s/wBRnsF" rel="nofollow"><code>--tls-cipher-list</code></a> &#x547D;&#x4EE4;&#x8FDB;&#x884C;&#x66FF;&#x6362;&#xFF08;&#x76F4;&#x63A5;&#x6216;&#x901A;&#x8FC7; <a href="http://nodejs.cn/s/WsPs4q" rel="nofollow"><code>NODE_OPTIONS</code></a> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF09;&#x3002;
&#x6BD4;&#x5982;&#xFF0C;&#x751F;&#x6210; <code>ECDHE-RSA-AES128-GCM-SHA256:!RC4</code> &#x7684; TLS &#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-sh">node --tls-cipher-list=&quot;ECDHE-RSA-AES128-GCM-SHA256:!RC4&quot; server.js

export NODE_OPTIONS=--tls-cipher-list=&quot;ECDHE-RSA-AES128-GCM-SHA256:!RC4&quot;
node server.js
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x670D;&#x52A1;&#x5668;&#x7684; <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> &#x65B9;&#x6CD5;&#x7684; <code>ciphers</code> &#x9009;&#x9879;&#x6765;&#x8FDB;&#x884C;&#x66FF;&#x6362;&#xFF0C;<a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a> &#x65B9;&#x6CD5;&#x548C; <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> &#x65B9;&#x6CD5;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>ciphers</code> &#x9009;&#x9879;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> &#x65F6;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>&#x5BC6;&#x7801;&#x5217;&#x8868;&#x53EF;&#x4EE5;&#x5305;&#x542B; TLSv1.3 &#x5BC6;&#x7801;&#x5957;&#x4EF6;&#x540D;&#x79F0;&#x7684;&#x6DF7;&#x5408;&#xFF0C;&#x4EE5; <code>&apos;TLS_&apos;</code> &#x5F00;&#x5934;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x4EE5;&#x53CA; TLSv1.2 &#x53CA;&#x4EE5;&#x4E0B;&#x5BC6;&#x7801;&#x5957;&#x4EF6;&#x7684;&#x89C4;&#x8303;&#x3002;
TLSv1.2 &#x5BC6;&#x7801;&#x652F;&#x6301;&#x4F20;&#x7EDF;&#x89C4;&#x8303;&#x683C;&#x5F0F;&#xFF0C;&#x6709;&#x5173;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; OpenSSL <a href="http://nodejs.cn/s/XcPHdc" rel="nofollow">&#x5BC6;&#x7801;&#x5217;&#x8868;&#x683C;&#x5F0F;</a>&#x6587;&#x6863;&#xFF0C;&#x4F46;&#x8FD9;&#x4E9B;&#x89C4;&#x8303;&#x4E0D;&#x9002;&#x7528;&#x4E8E; TLSv1.3 &#x5BC6;&#x7801;&#x3002;
&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x5728;&#x5BC6;&#x7801;&#x5217;&#x8868;&#x4E2D;&#x5305;&#x542B;&#x5176;&#x5168;&#x540D;&#x6765;&#x542F;&#x7528; TLSv1.3 &#x5957;&#x4EF6;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4F20;&#x7EDF;&#x7684; TLSv1.2 <code>&apos;EECDH&apos;</code>&#x6216; <code>&apos;!EECDH&apos;</code> &#x89C4;&#x8303;&#x6765;&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x3002;</p>
<p>&#x5C3D;&#x7BA1; TLSv1.3 &#x548C; TLSv1.2 &#x5BC6;&#x7801;&#x5957;&#x4EF6;&#x7684;&#x76F8;&#x5BF9;&#x987A;&#x5E8F;&#xFF0C;TLSv1.3 &#x534F;&#x8BAE;&#x660E;&#x663E;&#x6BD4; TLSv1.2 &#x66F4;&#x5B89;&#x5168;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x63E1;&#x624B;&#x8868;&#x660E;&#x5B83;&#x53D7;&#x652F;&#x6301;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x6709;&#x4EFB;&#x4F55; TLSv1.3 &#x5BC6;&#x7801;&#x5957;&#x4EF6;&#x5DF2;&#x542F;&#x7528;&#xFF0C;&#x5C06;&#x59CB;&#x7EC8;&#x9009;&#x62E9; TLSv1.2 &#x4EE5;&#x4E0A;&#x3002;</p>
<p>Node.js &#x5305;&#x542B;&#x7684;&#x9ED8;&#x8BA4;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x662F;&#x7ECF;&#x8FC7;&#x7CBE;&#x5FC3;&#x6311;&#x9009;&#xFF0C;&#x80FD;&#x4F53;&#x73B0;&#x76EE;&#x524D;&#x6700;&#x597D;&#x7684;&#x5B89;&#x5168;&#x5B9E;&#x8DF5;&#x548C;&#x6700;&#x4F4E;&#x98CE;&#x9669;&#x3002;
&#x6539;&#x53D8;&#x9ED8;&#x8BA4;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x5BF9;&#x5E94;&#x7528;&#x7684;&#x5B89;&#x5168;&#x6027;&#x6709;&#x91CD;&#x5927;&#x7684;&#x5F71;&#x54CD;&#x3002;
<code>--tls-cipher-list</code> &#x5F00;&#x5173;&#x548C; <code>ciphers</code> &#x9009;&#x9879;&#x5E94;&#x8BE5;&#x53EA;&#x5728;&#x5FC5;&#x8981;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x503E;&#x5411;&#x4F7F;&#x7528; GCM &#x52A0;&#x5BC6;&#x4F5C;&#x4E3A; <a href="http://nodejs.cn/s/phZkVM" rel="nofollow">Chrome &#x73B0;&#x4EE3;&#x52A0;&#x5BC6;&#x8BBE;&#x7F6E;</a>&#x7684;&#x9009;&#x9879;&#xFF0C;&#x4E5F;&#x503E;&#x5411;&#x4F7F;&#x7528; ECDHE &#x548C; DHE &#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x5B8C;&#x7F8E;&#x7684;&#x524D;&#x5411;&#x5B89;&#x5168;&#xFF0C;&#x540C;&#x65F6;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x3002;</p>
<p>&#x4F9D;&#x636E;<a href="http://nodejs.cn/s/Ai7HeQ" rel="nofollow">&#x7279;&#x6B8A;&#x653B;&#x51FB;&#x5F71;&#x54CD;&#x66F4;&#x5927;&#x4F4D;&#x6570;&#x7684; AES &#x5BC6;&#x94A5;</a>&#xFF0C;128 &#x4F4D;&#x7684; AES &#x5BC6;&#x94A5;&#x4F18;&#x5148;&#x4E8E; 192 &#x4F4D;&#x548C; 256 &#x4F4D;&#x7684; AES &#x5BC6;&#x94A5;&#x3002;</p>
<p>&#x8001;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4F9D;&#x8D56;&#x4E0D;&#x5B89;&#x5168;&#x7684; RC4 &#x6216;&#x8005;&#x57FA;&#x4E8E; DES &#x7684;&#x52A0;&#x5BC6;&#xFF08;&#x6BD4;&#x5982; IE6&#xFF09;&#x4E0D;&#x80FD;&#x7528;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x63E1;&#x624B;&#x7684;&#x8FC7;&#x7A0B;&#x3002;
&#x5982;&#x679C;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x8FD9;&#x4E9B;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;<a href="http://nodejs.cn/s/PLgT7T" rel="nofollow">TLS &#x63A8;&#x8350;&#x89C4;&#x8303;</a>&#x4E5F;&#x8BB8;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x517C;&#x5BB9;&#x7684;&#x52A0;&#x5BC6;&#x7EC4;&#x4EF6;&#x3002;
&#x6B32;&#x77E5;&#x66F4;&#x591A;&#x7684;&#x683C;&#x5F0F;&#x7684;&#x7EC6;&#x8282;&#x8BF7;&#x53C2;&#x9605; OpenSSL <a href="http://nodejs.cn/s/XcPHdc" rel="nofollow">&#x52A0;&#x5BC6;&#x5217;&#x8868;&#x683C;&#x5F0F;</a>&#x6587;&#x6863;&#x3002;</p>
<p>&#x53EA;&#x6709; 5 &#x79CD; TLSv1.3 &#x5BC6;&#x7801;&#x5957;&#x4EF6;&#xFF1A;</p>
<ul>
<li><code>&apos;TLS_AES_256_GCM_SHA384&apos;</code></li>
<li><code>&apos;TLS_CHACHA20_POLY1305_SHA256&apos;</code></li>
<li><code>&apos;TLS_AES_128_GCM_SHA256&apos;</code></li>
<li><code>&apos;TLS_AES_128_CCM_SHA256&apos;</code></li>
<li><code>&apos;TLS_AES_128_CCM_8_SHA256&apos;</code></li>
</ul>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x542F;&#x7528;&#x524D; 3 &#x4E2A;&#x3002;
TLSv1.3 &#x652F;&#x6301;&#x6700;&#x540E; 2 &#x4E2A;&#x57FA;&#x4E8E; <code>CCM</code> &#x7684;&#x5957;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x5728;&#x53D7;&#x7EA6;&#x675F;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;&#x53EF;&#x80FD;&#x66F4;&#x5177;&#x6027;&#x80FD;&#xFF0C;&#x4F46;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x542F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x63D0;&#x4F9B;&#x7684;&#x5B89;&#x5168;&#x6027;&#x8F83;&#x4F4E;&#x3002;</p>
<h2>tls.Server &#x7C7B;<span><a class="mark" href="tls.html#tls_class_tls_server" id="tls_class_tls_server">#</a></span></h2><p class="tip_wrap"><a href="tls/class_tls_server.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/class_tls_server.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span>
</div>
<ul>
<li>&#x7EE7;&#x627F;&#x81EA;: <a href="http://nodejs.cn/s/gBYjux" target="_blank" rel="nofollow" class="type">&lt;net.Server&gt;</a></li>
</ul>
<p>&#x63A5;&#x53D7;&#x4F7F;&#x7528; TLS &#x6216; SSL &#x7684;&#x52A0;&#x5BC6;&#x8FDE;&#x63A5;&#x3002;</p>
<h3>&apos;keylog&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_keylog" id="tls_event_keylog">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_keylog.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.3.0</span>
</div>
<ul>
<li><code>line</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> Line of ASCII text, in NSS <code>SSLKEYLOGFILE</code> format.</li>
<li><code>tlsSocket</code> <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a> The <code>tls.TLSSocket</code> instance on which it was
generated.</li>
</ul>
<p>The <code>keylog</code> event is emitted when key material is generated or received by
a connection to this server (typically before handshake has completed, but not
necessarily). This keying material can be stored for debugging, as it allows
captured TLS traffic to be decrypted. It may be emitted multiple times for
each socket.</p>
<p>A typical use case is to append received lines to a common text file, which
is later used by software (such as Wireshark) to decrypt the traffic:</p>
<pre><code class="language-js">const logFile = fs.createWriteStream(&apos;/tmp/ssl-keys.log&apos;, { flags: &apos;a&apos; });
// ...
server.on(&apos;keylog&apos;, (line, tlsSocket) =&gt; {
  if (tlsSocket.remoteAddress !== &apos;...&apos;)
    return; // Only log keys for a particular IP
  logFile.write(line);
});
</code></pre>
<h3>&apos;newSession&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_newsession" id="tls_event_newsession">#</a></span></h3><p class="tip_wrap"><a href="tls/event_newsession.html" class="tip_trans">&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_newsession.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.2</span>
</div>
<p><code>&apos;newSession&apos;</code> &#x4E8B;&#x4EF6;&#x5728;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; TLS &#x4F1A;&#x8BDD;&#x65F6;&#x89E6;&#x53D1;&#x3002;
&#x8FD9;&#x53EF;&#x80FD;&#x7528;&#x4E8E;&#x5728;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x4FDD;&#x5B58;&#x4F1A;&#x8BDD;&#x3002;
&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x63D0;&#x4F9B;&#x7ED9; <a href="http://nodejs.cn/s/GHghQC" rel="nofollow"><code>&apos;resumeSession&apos;</code></a> &#x56DE;&#x8C03;&#x3002;</p>
<p>&#x76D1;&#x542C;&#x5668;&#x56DE;&#x8C03;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#x4F20;&#x5165;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li><code>sessionId</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> TLS &#x4F1A;&#x8BDD;&#x8BC6;&#x522B;&#x7B26;&#x3002;</li>
<li><code>sessionData</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> TLS &#x4F1A;&#x8BDD;&#x6570;&#x636E;&#x3002;</li>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> &#x5728;&#x5B89;&#x5168;&#x8FDE;&#x63A5;&#x65F6;&#x4E3A;&#x4E86;&#x53D1;&#x9001;&#x6216;&#x8005;&#x63A5;&#x6536;&#x6570;&#x636E;&#xFF0C;&#x65E0;&#x53C2;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x88AB;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<p>&#x6DFB;&#x52A0;&#x76D1;&#x542C;&#x5668;&#x540E;&#xFF0C;&#x76D1;&#x542C;&#x5668;&#x53EA;&#x5728;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x540E;&#x751F;&#x6548;&#x3002;</p>
<h3>&apos;OCSPRequest&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_ocsprequest" id="tls_event_ocsprequest">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_ocsprequest.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.13</span>
</div>
<p>The <code>&apos;OCSPRequest&apos;</code> event is emitted when the client sends a certificate status
request. The listener callback is passed three arguments when called:</p>
<ul>
<li><code>certificate</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The server certificate</li>
<li><code>issuer</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The issuer&apos;s certificate</li>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> A callback function that must be invoked to provide
the results of the OCSP request.</li>
</ul>
<p>The server&apos;s current certificate can be parsed to obtain the OCSP URL
and certificate ID; after obtaining an OCSP response, <code>callback(null, resp)</code> is
then invoked, where <code>resp</code> is a <code>Buffer</code> instance containing the OCSP response.
Both <code>certificate</code> and <code>issuer</code> are <code>Buffer</code> DER-representations of the
primary and issuer&apos;s certificates. These can be used to obtain the OCSP
certificate ID and OCSP endpoint URL.</p>
<p>Alternatively, <code>callback(null, null)</code> may be called, indicating that there was
no OCSP response.</p>
<p>Calling <code>callback(err)</code> will result in a <code>socket.destroy(err)</code> call.</p>
<p>The typical flow of an OCSP Request is as follows:</p>
<ol>
<li>Client connects to the server and sends an <code>&apos;OCSPRequest&apos;</code> (via the status
info extension in ClientHello).</li>
<li>Server receives the request and emits the <code>&apos;OCSPRequest&apos;</code> event, calling the
listener if registered.</li>
<li>Server extracts the OCSP URL from either the <code>certificate</code> or <code>issuer</code> and
performs an <a href="http://nodejs.cn/s/ughRFP" rel="nofollow">OCSP request</a> to the CA.</li>
<li>Server receives <code>&apos;OCSPResponse&apos;</code> from the CA and sends it back to the client
via the <code>callback</code> argument</li>
<li>Client validates the response and either destroys the socket or performs a
handshake.</li>
</ol>
<p>The <code>issuer</code> can be <code>null</code> if the certificate is either self-signed or the
issuer is not in the root certificates list. (An issuer may be provided
via the <code>ca</code> option when establishing the TLS connection.)</p>
<p>Listening for this event will have an effect only on connections established
after the addition of the event listener.</p>
<p>An npm module like <a href="http://nodejs.cn/s/2C7nRg" rel="nofollow">asn1.js</a> may be used to parse the certificates.</p>
<h3>&apos;resumeSession&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_resumesession" id="tls_event_resumesession">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_resumesession.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.2</span>
</div>
<p>The <code>&apos;resumeSession&apos;</code> event is emitted when the client requests to resume a
previous TLS session. The listener callback is passed two arguments when
called:</p>
<ul>
<li><code>sessionId</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The TLS session identifier</li>
<li>
<p><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> A callback function to be called when the prior session
has been recovered: <code>callback([err[, sessionData]])</code></p>
<ul>
<li><code>err</code> <a href="http://nodejs.cn/s/qZ873x" target="_blank" rel="nofollow" class="type">&lt;Error&gt;</a></li>
<li><code>sessionData</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
</li>
</ul>
<p>The event listener should perform a lookup in external storage for the
<code>sessionData</code> saved by the <a href="http://nodejs.cn/s/BoHJ4Z" rel="nofollow"><code>&apos;newSession&apos;</code></a> event handler using the given
<code>sessionId</code>. If found, call <code>callback(null, sessionData)</code> to resume the session.
If not found, the session cannot be resumed. <code>callback()</code> must be called
without <code>sessionData</code> so that the handshake can continue and a new session can
be created. It is possible to call <code>callback(err)</code> to terminate the incoming
connection and destroy the socket.</p>
<p>Listening for this event will have an effect only on connections established
after the addition of the event listener.</p>
<p>The following illustrates resuming a TLS session:</p>
<pre><code class="language-js">const tlsSessionStore = {};
server.on(&apos;newSession&apos;, (id, data, cb) =&gt; {
  tlsSessionStore[id.toString(&apos;hex&apos;)] = data;
  cb();
});
server.on(&apos;resumeSession&apos;, (id, cb) =&gt; {
  cb(null, tlsSessionStore[id.toString(&apos;hex&apos;)] || null);
});
</code></pre>
<h3>&apos;secureConnection&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_secureconnection" id="tls_event_secureconnection">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_secureconnection.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span>
</div>
<p>The <code>&apos;secureConnection&apos;</code> event is emitted after the handshaking process for a
new connection has successfully completed. The listener callback is passed a
single argument when called:</p>
<ul>
<li><code>tlsSocket</code> <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a> The established TLS socket.</li>
</ul>
<p>The <code>tlsSocket.authorized</code> property is a <code>boolean</code> indicating whether the
client has been verified by one of the supplied Certificate Authorities for the
server. If <code>tlsSocket.authorized</code> is <code>false</code>, then <code>socket.authorizationError</code>
is set to describe how authorization failed. Depending on the settings
of the TLS server, unauthorized connections may still be accepted.</p>
<p>The <code>tlsSocket.alpnProtocol</code> property is a string that contains the selected
ALPN protocol. When ALPN has no selected protocol, <code>tlsSocket.alpnProtocol</code>
equals <code>false</code>.</p>
<p>The <code>tlsSocket.servername</code> property is a string containing the server name
requested via SNI.</p>
<h3>&apos;tlsClientError&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_tlsclienterror" id="tls_event_tlsclienterror">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_tlsclienterror.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v6.0.0</span>
</div>
<p>The <code>&apos;tlsClientError&apos;</code> event is emitted when an error occurs before a secure
connection is established. The listener callback is passed two arguments when
called:</p>
<ul>
<li><code>exception</code> <a href="http://nodejs.cn/s/qZ873x" target="_blank" rel="nofollow" class="type">&lt;Error&gt;</a> The <code>Error</code> object describing the error</li>
<li><code>tlsSocket</code> <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a> The <code>tls.TLSSocket</code> instance from which the
error originated.</li>
</ul>
<h3>server.addContext(hostname, context)<span><a class="mark" href="tls.html#tls_server_addcontext_hostname_context" id="tls_server_addcontext_hostname_context">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_addcontext_hostname_context.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.5.3</span>
</div>
<ul>
<li><code>hostname</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> A SNI hostname or wildcard (e.g. <code>&apos;*&apos;</code>)</li>
<li><code>context</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> An object containing any of the possible properties
from the <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> <code>options</code> arguments (e.g. <code>key</code>,
<code>cert</code>, <code>ca</code>, etc).</li>
</ul>
<p>The <code>server.addContext()</code> method adds a secure context that will be used if
the client request&apos;s SNI name matches the supplied <code>hostname</code> (or wildcard).</p>
<h3>server.address()<span><a class="mark" href="tls.html#tls_server_address" id="tls_server_address">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_address.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.6.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>Returns the bound address, the address family name, and port of the
server as reported by the operating system. See <a href="http://nodejs.cn/s/7YbQvX" rel="nofollow"><code>net.Server.address()</code></a> for
more information.</p>
<h3>server.close([callback])<span><a class="mark" href="tls.html#tls_server_close_callback" id="tls_server_close_callback">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_close_callback.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span>
</div>
<ul>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> A listener callback that will be registered to listen
for the server instance&apos;s <code>&apos;close&apos;</code> event.</li>
<li>Returns: <a href="http://nodejs.cn/s/eaRaiL" target="_blank" rel="nofollow" class="type">&lt;tls.Server&gt;</a></li>
</ul>
<p>The <code>server.close()</code> method stops the server from accepting new connections.</p>
<p>This function operates asynchronously. The <code>&apos;close&apos;</code> event will be emitted
when the server has no more open connections.</p>
<h3>server.connections<span><a class="mark" href="tls.html#tls_server_connections" id="tls_server_connections">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.9.7</span>
</div>
<p></p><div class="api_stability api_stability_0"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 0</a> - &#x5E9F;&#x5F03;: &#x6539;&#x4E3A;&#x4F7F;&#x7528; <a href="http://nodejs.cn/s/9mG95C" rel="nofollow"><code>server.getConnections()</code></a> &#x3002;</div><p></p>
<ul>
<li><a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>Returns the current number of concurrent connections on the server.</p>
<h3>server.getTicketKeys()<span><a class="mark" href="tls.html#tls_server_getticketkeys" id="tls_server_getticketkeys">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_getticketkeys.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v3.0.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> A 48-byte buffer containing the session ticket keys.</li>
</ul>
<p>Returns the session ticket keys.</p>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<h3>server.listen()<span><a class="mark" href="tls.html#tls_server_listen" id="tls_server_listen">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_listen.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<p>Starts the server listening for encrypted connections.
This method is identical to <a href="http://nodejs.cn/s/xGksiu" rel="nofollow"><code>server.listen()</code></a> from <a href="http://nodejs.cn/s/gBYjux" rel="nofollow"><code>net.Server</code></a>.</p>
<h3>server.setSecureContext(options)<span><a class="mark" href="tls.html#tls_server_setsecurecontext_options" id="tls_server_setsecurecontext_options">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_setsecurecontext_options.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.0.0</span>
</div>
<ul>
<li><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> An object containing any of the possible properties from
the <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> <code>options</code> arguments (e.g. <code>key</code>, <code>cert</code>,
<code>ca</code>, etc).</li>
</ul>
<p>The <code>server.setSecureContext()</code> method replaces the secure context of an
existing server. Existing connections to the server are not interrupted.</p>
<h3>server.setTicketKeys(keys)<span><a class="mark" href="tls.html#tls_server_setticketkeys_keys" id="tls_server_setticketkeys_keys">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/server_setticketkeys_keys.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v3.0.0</span>
</div>
<ul>
<li><code>keys</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> A 48-byte buffer containing the session ticket keys.</li>
</ul>
<p>Sets the session ticket keys.</p>
<p>Changes to the ticket keys are effective only for future server connections.
Existing or currently pending server connections will use the previous keys.</p>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<h2>tls.TLSSocket &#x7C7B;<span><a class="mark" href="tls.html#tls_class_tls_tlssocket" id="tls_class_tls_tlssocket">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/class_tls_tlssocket.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li>Extends: <a href="http://nodejs.cn/s/wsJ1o1" target="_blank" rel="nofollow" class="type">&lt;net.Socket&gt;</a></li>
</ul>
<p>Performs transparent encryption of written data and all required TLS
negotiation.</p>
<p>Instances of <code>tls.TLSSocket</code> implement the duplex <a href="http://nodejs.cn/s/t73H94" rel="nofollow">Stream</a> interface.</p>
<p>Methods that return TLS connection metadata (e.g.
<a href="http://nodejs.cn/s/zQ1LhW" rel="nofollow"><code>tls.TLSSocket.getPeerCertificate()</code></a> will only return data while the
connection is open.</p>
<h3>new tls.TLSSocket(socket[, options])<span><a class="mark" href="tls.html#tls_new_tls_tlssocket_socket_options" id="tls_new_tls_tlssocket_socket_options">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/new_tls_tlssocket_socket_options.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v12.2.0</td>
<td><p>The <code>enableTrace</code> option is now supported.</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>ALPN options are supported now.</p></td></tr>
<tr><td>v0.11.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>socket</code> <a href="http://nodejs.cn/s/wsJ1o1" target="_blank" rel="nofollow" class="type">&lt;net.Socket&gt;</a> | <a href="http://nodejs.cn/s/2iRabr" target="_blank" rel="nofollow" class="type">&lt;stream.Duplex&gt;</a>
On the server side, any <code>Duplex</code> stream. On the client side, any
instance of <a href="http://nodejs.cn/s/wsJ1o1" rel="nofollow"><code>net.Socket</code></a> (for generic <code>Duplex</code> stream support
on the client side, <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> must be used).</li>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>enableTrace</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>isServer</code>: The SSL/TLS protocol is asymmetrical, TLSSockets must know if
they are to behave as a server or a client. If <code>true</code> the TLS socket will be
instantiated as a server. <strong>Default:</strong> <code>false</code>.</li>
<li><code>server</code> <a href="http://nodejs.cn/s/gBYjux" target="_blank" rel="nofollow" class="type">&lt;net.Server&gt;</a> A <a href="http://nodejs.cn/s/gBYjux" rel="nofollow"><code>net.Server</code></a> instance.</li>
<li><code>requestCert</code>: Whether to authenticate the remote peer by requesting a
certificate. Clients always request a server certificate. Servers
(<code>isServer</code> is true) may set <code>requestCert</code> to true to request a client
certificate.</li>
<li><code>rejectUnauthorized</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>ALPNProtocols</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>SNICallback</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>session</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> A <code>Buffer</code> instance containing a TLS session.</li>
<li><code>requestOCSP</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code>, specifies that the OCSP status request
extension will be added to the client hello and an <code>&apos;OCSPResponse&apos;</code> event
will be emitted on the socket before establishing a secure communication</li>
<li><code>secureContext</code>: TLS context object created with
<a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>. If a <code>secureContext</code> is <em>not</em> provided, one
will be created by passing the entire <code>options</code> object to
<code>tls.createSecureContext()</code>.</li>
<li>...: <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> options that are used if the
<code>secureContext</code> option is missing. Otherwise, they are ignored.</li>
</ul>
</li>
</ul>
<p>Construct a new <code>tls.TLSSocket</code> object from an existing TCP socket.</p>
<h3>&apos;keylog&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_keylog_1" id="tls_event_keylog_1">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_keylog_1.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.3.0</span>
</div>
<ul>
<li><code>line</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> Line of ASCII text, in NSS <code>SSLKEYLOGFILE</code> format.</li>
</ul>
<p>The <code>keylog</code> event is emitted on a client <code>tls.TLSSocket</code> when key material
is generated or received by the socket. This keying material can be stored
for debugging, as it allows captured TLS traffic to be decrypted. It may
be emitted multiple times, before or after the handshake completes.</p>
<p>A typical use case is to append received lines to a common text file, which
is later used by software (such as Wireshark) to decrypt the traffic:</p>
<pre><code class="language-js">const logFile = fs.createWriteStream(&apos;/tmp/ssl-keys.log&apos;, { flags: &apos;a&apos; });
// ...
tlsSocket.on(&apos;keylog&apos;, (line) =&gt; logFile.write(line));
</code></pre>
<h3>&apos;OCSPResponse&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_ocspresponse" id="tls_event_ocspresponse">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_ocspresponse.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.13</span>
</div>
<p>The <code>&apos;OCSPResponse&apos;</code> event is emitted if the <code>requestOCSP</code> option was set
when the <code>tls.TLSSocket</code> was created and an OCSP response has been received.
The listener callback is passed a single argument when called:</p>
<ul>
<li><code>response</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The server&apos;s OCSP response</li>
</ul>
<p>Typically, the <code>response</code> is a digitally signed object from the server&apos;s CA that
contains information about server&apos;s certificate revocation status.</p>
<h3>&apos;secureConnect&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_secureconnect" id="tls_event_secureconnect">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_secureconnect.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<p>The <code>&apos;secureConnect&apos;</code> event is emitted after the handshaking process for a new
connection has successfully completed. The listener callback will be called
regardless of whether or not the server&apos;s certificate has been authorized. It
is the client&apos;s responsibility to check the <code>tlsSocket.authorized</code> property to
determine if the server certificate was signed by one of the specified CAs. If
<code>tlsSocket.authorized === false</code>, then the error can be found by examining the
<code>tlsSocket.authorizationError</code> property. If ALPN was used, the
<code>tlsSocket.alpnProtocol</code> property can be checked to determine the negotiated
protocol.</p>
<h3>&apos;session&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_session" id="tls_event_session">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/event_session.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.10.0</span>
</div>
<ul>
<li><code>session</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>The <code>&apos;session&apos;</code> event is emitted on a client <code>tls.TLSSocket</code> when a new session
or TLS ticket is available. This may or may not be before the handshake is
complete, depending on the TLS protocol version that was negotiated. The event
is not emitted on the server, or if a new session was not created, for example,
when the connection was resumed. For some TLS protocol versions the event may be
emitted multiple times, in which case all the sessions can be used for
resumption.</p>
<p>On the client, the <code>session</code> can be provided to the <code>session</code> option of
<a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> to resume the connection.</p>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<p>Note: For TLSv1.2 and below, <a href="http://nodejs.cn/s/uxuw4u" rel="nofollow"><code>tls.TLSSocket.getSession()</code></a> can be called once
the handshake is complete.  For TLSv1.3, only ticket based resumption is allowed
by the protocol, multiple tickets are sent, and the tickets aren&apos;t sent until
later, after the handshake completes, so it is necessary to wait for the
<code>&apos;session&apos;</code> event to get a resumable session.  Applications are
recommended to use the <code>&apos;session&apos;</code> event instead of <code>getSession()</code> to ensure
they will work for all TLS protocol versions.  Applications that only expect to
get or use 1 session should listen for this event only once:</p>
<pre><code class="language-js">tlsSocket.once(&apos;session&apos;, (session) =&gt; {
  // The session can be used immediately or later.
  tls.connect({
    session: session,
    // Other connect options...
  });
});
</code></pre>
<h3>tlsSocket.address()<span><a class="mark" href="tls.html#tls_tlssocket_address" id="tls_tlssocket_address">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_address.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>Returns the bound <code>address</code>, the address <code>family</code> name, and <code>port</code> of the
underlying socket as reported by the operating system:
<code>{ port: 12346, family: &apos;IPv4&apos;, address: &apos;127.0.0.1&apos; }</code>.</p>
<h3>tlsSocket.authorizationError<span><a class="mark" href="tls.html#tls_tlssocket_authorizationerror" id="tls_tlssocket_authorizationerror">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_authorizationerror.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<p>Returns the reason why the peer&apos;s certificate was not been verified. This
property is set only when <code>tlsSocket.authorized === false</code>.</p>
<h3>tlsSocket.authorized<span><a class="mark" href="tls.html#tls_tlssocket_authorized" id="tls_tlssocket_authorized">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_authorized.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>Returns <code>true</code> if the peer certificate was signed by one of the CAs specified
when creating the <code>tls.TLSSocket</code> instance, otherwise <code>false</code>.</p>
<h3>tlsSocket.disableRenegotiation()<span><a class="mark" href="tls.html#tls_tlssocket_disablerenegotiation" id="tls_tlssocket_disablerenegotiation">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_disablerenegotiation.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.4.0</span>
</div>
<p>Disables TLS renegotiation for this <code>TLSSocket</code> instance. Once called, attempts
to renegotiate will trigger an <code>&apos;error&apos;</code> event on the <code>TLSSocket</code>.</p>
<h3>tlsSocket.enableTrace()<span><a class="mark" href="tls.html#tls_tlssocket_enabletrace" id="tls_tlssocket_enabletrace">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_enabletrace.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.2.0</span>
</div>
<p>When enabled, TLS packet trace information is written to <code>stderr</code>. This can be
used to debug TLS connection problems.</p>
<p>Note: The format of the output is identical to the output of <code>openssl s_client -trace</code> or <code>openssl s_server -trace</code>. While it is produced by OpenSSL&apos;s
<code>SSL_trace()</code> function, the format is undocumented, can change without notice,
and should not be relied on.</p>
<h3>tlsSocket.encrypted<span><a class="mark" href="tls.html#tls_tlssocket_encrypted" id="tls_tlssocket_encrypted">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_encrypted.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<p>Always returns <code>true</code>. This may be used to distinguish TLS sockets from regular
<code>net.Socket</code> instances.</p>
<h3>tlsSocket.getCertificate()<span><a class="mark" href="tls.html#tls_tlssocket_getcertificate" id="tls_tlssocket_getcertificate">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getcertificate.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.2.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>Returns an object representing the local certificate. The returned object has
some properties corresponding to the fields of the certificate.</p>
<p>See <a href="http://nodejs.cn/s/zQ1LhW" rel="nofollow"><code>tls.TLSSocket.getPeerCertificate()</code></a> for an example of the certificate
structure.</p>
<p>If there is no local certificate, an empty object will be returned. If the
socket has been destroyed, <code>null</code> will be returned.</p>
<h3>tlsSocket.getCipher()<span><a class="mark" href="tls.html#tls_tlssocket_getcipher" id="tls_tlssocket_getcipher">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getcipher.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v12.0.0</td>
<td><p>Return the minimum cipher version, instead of a fixed string (<code>&apos;TLSv1/SSLv3&apos;</code>).</p></td></tr>
<tr><td>v0.11.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>name</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The name of the cipher suite.</li>
<li><code>version</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The minimum TLS protocol version supported by this cipher
suite.</li>
</ul>
</li>
</ul>
<p>Returns an object containing information on the negotiated cipher suite.</p>
<p>For example: <code>{ name: &apos;AES256-SHA&apos;, version: &apos;TLSv1.2&apos; }</code>.</p>
<p>See
<a href="https://www.openssl.org/docs/man1.1.1/man3/SSL_CIPHER_get_name.html">SSL_CIPHER_get_name</a>
for more information.</p>
<h3>tlsSocket.getEphemeralKeyInfo()<span><a class="mark" href="tls.html#tls_tlssocket_getephemeralkeyinfo" id="tls_tlssocket_getephemeralkeyinfo">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getephemeralkeyinfo.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v5.0.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></li>
</ul>
<p>Returns an object representing the type, name, and size of parameter of
an ephemeral key exchange in <a href="http://nodejs.cn/s/Jw7jEb" rel="nofollow">Perfect Forward Secrecy</a> on a client
connection. It returns an empty object when the key exchange is not
ephemeral. As this is only supported on a client socket; <code>null</code> is returned
if called on a server socket. The supported types are <code>&apos;DH&apos;</code> and <code>&apos;ECDH&apos;</code>. The
<code>name</code> property is available only when type is <code>&apos;ECDH&apos;</code>.</p>
<p>For example: <code>{ type: &apos;ECDH&apos;, name: &apos;prime256v1&apos;, size: 256 }</code>.</p>
<h3>tlsSocket.getFinished()<span><a class="mark" href="tls.html#tls_tlssocket_getfinished" id="tls_tlssocket_getfinished">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getfinished.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.9.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/8ym6ow" target="_blank" rel="nofollow" class="type">&lt;undefined&gt;</a> The latest <code>Finished</code> message that has been
sent to the socket as part of a SSL/TLS handshake, or <code>undefined</code> if
no <code>Finished</code> message has been sent yet.</li>
</ul>
<p>As the <code>Finished</code> messages are message digests of the complete handshake
(with a total of 192 bits for TLS 1.0 and more for SSL 3.0), they can
be used for external authentication procedures when the authentication
provided by SSL/TLS is not desired or is not enough.</p>
<p>Corresponds to the <code>SSL_get_finished</code> routine in OpenSSL and may be used
to implement the <code>tls-unique</code> channel binding from <a href="http://nodejs.cn/s/Koa3CP" rel="nofollow">RFC 5929</a>.</p>
<h3>tlsSocket.getPeerCertificate([detailed])<span><a class="mark" href="tls.html#tls_tlssocket_getpeercertificate_detailed" id="tls_tlssocket_getpeercertificate_detailed">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getpeercertificate_detailed.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><code>detailed</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> Include the full certificate chain if <code>true</code>, otherwise
include just the peer&apos;s certificate.</li>
<li>Returns: <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> A certificate object.</li>
</ul>
<p>Returns an object representing the peer&apos;s certificate. If the peer does not
provide a certificate, an empty object will be returned. If the socket has been
destroyed, <code>null</code> will be returned.</p>
<p>If the full certificate chain was requested, each certificate will include an
<code>issuerCertificate</code> property containing an object representing its issuer&apos;s
certificate.</p>
<h4>&#x8BC1;&#x4E66;&#x5BF9;&#x8C61;<span><a class="mark" href="tls.html#tls_certificate_object" id="tls_certificate_object">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/certificate_object.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v11.4.0</td>
<td><p>Support Elliptic Curve public key info.</p></td></tr>
</tbody></table>
</details>
</div>
<p>A certificate object has properties corresponding to the fields of the
certificate.</p>
<ul>
<li><code>raw</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The DER encoded X.509 certificate data.</li>
<li><code>subject</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> The certificate subject, described in terms of
 Country (<code>C:</code>), StateOrProvince (<code>ST</code>), Locality (<code>L</code>), Organization (<code>O</code>),
OrganizationalUnit (<code>OU</code>), and CommonName (<code>CN</code>). The CommonName is typically
a DNS name with TLS certificates. Example:
<code>{C: &apos;UK&apos;, ST: &apos;BC&apos;, L: &apos;Metro&apos;, O: &apos;Node Fans&apos;, OU: &apos;Docs&apos;, CN: &apos;example.com&apos;}</code>.</li>
<li><code>issuer</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> The certificate issuer, described in the same terms as the
 <code>subject</code>.</li>
<li><code>valid_from</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The date-time the certificate is valid from.</li>
<li><code>valid_to</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The date-time the certificate is valid to.</li>
<li><code>serialNumber</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The certificate serial number, as a hex string.
 Example: <code>&apos;B9B0D332A1AA5635&apos;</code>.</li>
<li><code>fingerprint</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The SHA-1 digest of the DER encoded certificate. It is
returned as a <code>:</code> separated hexadecimal string. Example: <code>&apos;2A:7A:C2:DD:...&apos;</code>.</li>
<li><code>fingerprint256</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The SHA-256 digest of the DER encoded certificate.
 It is returned as a <code>:</code> separated hexadecimal string. Example:
<code>&apos;2A:7A:C2:DD:...&apos;</code>.</li>
<li><code>ext_key_usage</code> <a href="http://nodejs.cn/s/ZJSz23" target="_blank" rel="nofollow" class="type">&lt;Array&gt;</a> (Optional) The extended key usage, a set of OIDs.</li>
<li><code>subjectaltname</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> (Optional) A string containing concatenated names
for the subject, an alternative to the <code>subject</code> names.</li>
<li><code>infoAccess</code> <a href="http://nodejs.cn/s/ZJSz23" target="_blank" rel="nofollow" class="type">&lt;Array&gt;</a> (Optional) An array describing the AuthorityInfoAccess,
 used with OCSP.</li>
<li><code>issuerCertificate</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> (Optional) The issuer certificate object. For
 self-signed certificates, this may be a circular reference.</li>
</ul>
<p>The certificate may contain information about the public key, depending on
the key type.</p>
<p>For RSA keys, the following properties may be defined:</p>
<ul>
<li><code>bits</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> The RSA bit size. Example: <code>1024</code>.</li>
<li><code>exponent</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The RSA exponent, as a string in hexadecimal number
notation. Example: <code>&apos;0x010001&apos;</code>.</li>
<li><code>modulus</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The RSA modulus, as a hexadecimal string. Example:
 <code>&apos;B56CE45CB7...&apos;</code>.</li>
<li><code>pubkey</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The public key.</li>
</ul>
<p>For EC keys, the following properties may be defined:</p>
<ul>
<li><code>pubkey</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> The public key.</li>
<li><code>bits</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> The key size in bits. Example: <code>256</code>.</li>
<li><code>asn1Curve</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> (Optional) The ASN.1 name of the OID of the elliptic
curve. Well-known curves are identified by an OID. While it is unusual, it is
possible that the curve is identified by its mathematical properties, in which
case it will not have an OID. Example: <code>&apos;prime256v1&apos;</code>.</li>
<li><code>nistCurve</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> (Optional) The NIST name for the elliptic curve, if it
has one (not all well-known curves have been assigned names by NIST). Example:
<code>&apos;P-256&apos;</code>.</li>
</ul>
<p>Example certificate:</p>
<pre><code class="language-text">{ subject:
   { OU: [ &apos;Domain Control Validated&apos;, &apos;PositiveSSL Wildcard&apos; ],
     CN: &apos;*.nodejs.org&apos; },
  issuer:
   { C: &apos;GB&apos;,
     ST: &apos;Greater Manchester&apos;,
     L: &apos;Salford&apos;,
     O: &apos;COMODO CA Limited&apos;,
     CN: &apos;COMODO RSA Domain Validation Secure Server CA&apos; },
  subjectaltname: &apos;DNS:*.nodejs.org, DNS:nodejs.org&apos;,
  infoAccess:
   { &apos;CA Issuers - URI&apos;:
      [ &apos;http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt&apos; ],
     &apos;OCSP - URI&apos;: [ &apos;http://ocsp.comodoca.com&apos; ] },
  modulus: &apos;B56CE45CB740B09A13F64AC543B712FF9EE8E4C284B542A1708A27E82A8D151CA178153E12E6DDA15BF70FFD96CB8A88618641BDFCCA03527E665B70D779C8A349A6F88FD4EF6557180BD4C98192872BCFE3AF56E863C09DDD8BC1EC58DF9D94F914F0369102B2870BECFA1348A0838C9C49BD1C20124B442477572347047506B1FCD658A80D0C44BCC16BC5C5496CFE6E4A8428EF654CD3D8972BF6E5BFAD59C93006830B5EB1056BBB38B53D1464FA6E02BFDF2FF66CD949486F0775EC43034EC2602AEFBF1703AD221DAA2A88353C3B6A688EFE8387811F645CEED7B3FE46E1F8B9F59FAD028F349B9BC14211D5830994D055EEA3D547911E07A0ADDEB8A82B9188E58720D95CD478EEC9AF1F17BE8141BE80906F1A339445A7EB5B285F68039B0F294598A7D1C0005FC22B5271B0752F58CCDEF8C8FD856FB7AE21C80B8A2CE983AE94046E53EDE4CB89F42502D31B5360771C01C80155918637490550E3F555E2EE75CC8C636DDE3633CFEDD62E91BF0F7688273694EEEBA20C2FC9F14A2A435517BC1D7373922463409AB603295CEB0BB53787A334C9CA3CA8B30005C5A62FC0715083462E00719A8FA3ED0A9828C3871360A73F8B04A4FC1E71302844E9BB9940B77E745C9D91F226D71AFCAD4B113AAF68D92B24DDB4A2136B55A1CD1ADF39605B63CB639038ED0F4C987689866743A68769CC55847E4A06D6E2E3F1&apos;,
  exponent: &apos;0x10001&apos;,
  pubkey: &lt;Buffer ... &gt;,
  valid_from: &apos;Aug 14 00:00:00 2017 GMT&apos;,
  valid_to: &apos;Nov 20 23:59:59 2019 GMT&apos;,
  fingerprint: &apos;01:02:59:D9:C3:D2:0D:08:F7:82:4E:44:A4:B4:53:C5:E2:3A:87:4D&apos;,
  fingerprint256: &apos;69:AE:1A:6A:D4:3D:C6:C1:1B:EA:C6:23:DE:BA:2A:14:62:62:93:5C:7A:EA:06:41:9B:0B:BC:87:CE:48:4E:02&apos;,
  ext_key_usage: [ &apos;1.3.6.1.5.5.7.3.1&apos;, &apos;1.3.6.1.5.5.7.3.2&apos; ],
  serialNumber: &apos;66593D57F20CBC573E433381B5FEC280&apos;,
  raw: &lt;Buffer ... &gt; }
</code></pre>
<h3>tlsSocket.getPeerFinished()<span><a class="mark" href="tls.html#tls_tlssocket_getpeerfinished" id="tls_tlssocket_getpeerfinished">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getpeerfinished.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.9.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/8ym6ow" target="_blank" rel="nofollow" class="type">&lt;undefined&gt;</a> The latest <code>Finished</code> message that is expected
or has actually been received from the socket as part of a SSL/TLS handshake,
or <code>undefined</code> if there is no <code>Finished</code> message so far.</li>
</ul>
<p>As the <code>Finished</code> messages are message digests of the complete handshake
(with a total of 192 bits for TLS 1.0 and more for SSL 3.0), they can
be used for external authentication procedures when the authentication
provided by SSL/TLS is not desired or is not enough.</p>
<p>Corresponds to the <code>SSL_get_peer_finished</code> routine in OpenSSL and may be used
to implement the <code>tls-unique</code> channel binding from <a href="http://nodejs.cn/s/Koa3CP" rel="nofollow">RFC 5929</a>.</p>
<h3>tlsSocket.getProtocol()<span><a class="mark" href="tls.html#tls_tlssocket_getprotocol" id="tls_tlssocket_getprotocol">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getprotocol.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v5.7.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/334hvC" target="_blank" rel="nofollow" class="type">&lt;null&gt;</a></li>
</ul>
<p>Returns a string containing the negotiated SSL/TLS protocol version of the
current connection. The value <code>&apos;unknown&apos;</code> will be returned for connected
sockets that have not completed the handshaking process. The value <code>null</code> will
be returned for server sockets or disconnected client sockets.</p>
<p>Protocol versions are:</p>
<ul>
<li><code>&apos;SSLv3&apos;</code></li>
<li><code>&apos;TLSv1&apos;</code></li>
<li><code>&apos;TLSv1.1&apos;</code></li>
<li><code>&apos;TLSv1.2&apos;</code></li>
<li><code>&apos;TLSv1.3&apos;</code></li>
</ul>
<p>See the OpenSSL <a href="http://nodejs.cn/s/GqcYyf" rel="nofollow"><code>SSL_get_version</code></a> documentation for more information.</p>
<h3>tlsSocket.getSession()<span><a class="mark" href="tls.html#tls_tlssocket_getsession" id="tls_tlssocket_getsession">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getsession.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>Returns the TLS session data or <code>undefined</code> if no session was
negotiated. On the client, the data can be provided to the <code>session</code> option of
<a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> to resume the connection. On the server, it may be useful
for debugging.</p>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<p>Note: <code>getSession()</code> works only for TLSv1.2 and below. For TLSv1.3, applications
must use the <a href="http://nodejs.cn/s/GHDdMj" rel="nofollow"><code>&apos;session&apos;</code></a> event (it also works for TLSv1.2 and below).</p>
<h3>tlsSocket.getSharedSigalgs()<span><a class="mark" href="tls.html#tls_tlssocket_getsharedsigalgs" id="tls_tlssocket_getsharedsigalgs">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_getsharedsigalgs.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.11.0</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/ZJSz23" target="_blank" rel="nofollow" class="type">&lt;Array&gt;</a> List of signature algorithms shared between the server and
the client in the order of decreasing preference.</li>
</ul>
<p>See
<a href="https://www.openssl.org/docs/man1.1.1/man3/SSL_get_shared_sigalgs.html">SSL_get_shared_sigalgs</a>
for more information.</p>
<h3>tlsSocket.getTLSTicket()<span><a class="mark" href="tls.html#tls_tlssocket_gettlsticket" id="tls_tlssocket_gettlsticket">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_gettlsticket.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>For a client, returns the TLS session ticket if one is available, or
<code>undefined</code>. For a server, always returns <code>undefined</code>.</p>
<p>It may be useful for debugging.</p>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<h3>tlsSocket.isSessionReused()<span><a class="mark" href="tls.html#tls_tlssocket_issessionreused" id="tls_tlssocket_issessionreused">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_issessionreused.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.5.6</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> if the session was reused, <code>false</code> otherwise.</li>
</ul>
<p>See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</p>
<h3>tlsSocket.localAddress<span><a class="mark" href="tls.html#tls_tlssocket_localaddress" id="tls_tlssocket_localaddress">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_localaddress.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>Returns the string representation of the local IP address.</p>
<h3>tlsSocket.localPort<span><a class="mark" href="tls.html#tls_tlssocket_localport" id="tls_tlssocket_localport">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_localport.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>Returns the numeric representation of the local port.</p>
<h3>tlsSocket.remoteAddress<span><a class="mark" href="tls.html#tls_tlssocket_remoteaddress" id="tls_tlssocket_remoteaddress">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_remoteaddress.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>Returns the string representation of the remote IP address. For example,
<code>&apos;74.125.127.100&apos;</code> or <code>&apos;2001:4860:a005::68&apos;</code>.</p>
<h3>tlsSocket.remoteFamily<span><a class="mark" href="tls.html#tls_tlssocket_remotefamily" id="tls_tlssocket_remotefamily">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_remotefamily.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul>
<p>Returns the string representation of the remote IP family. <code>&apos;IPv4&apos;</code> or <code>&apos;IPv6&apos;</code>.</p>
<h3>tlsSocket.remotePort<span><a class="mark" href="tls.html#tls_tlssocket_remoteport" id="tls_tlssocket_remoteport">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_remoteport.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.4</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a></li>
</ul>
<p>Returns the numeric representation of the remote port. For example, <code>443</code>.</p>
<h3>tlsSocket.renegotiate(options, callback)<span><a class="mark" href="tls.html#tls_tlssocket_renegotiate_options_callback" id="tls_tlssocket_renegotiate_options_callback">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_renegotiate_options_callback.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.8</span>
</div>
<ul>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>rejectUnauthorized</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If not <code>false</code>, the server certificate is
verified against the list of supplied CAs. An <code>&apos;error&apos;</code> event is emitted if
verification fails; <code>err.code</code> contains the OpenSSL error code. <strong>Default:</strong>
<code>true</code>.</li>
<li><code>requestCert</code></li>
</ul>
</li>
<li>
<p><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> If <code>renegotiate()</code> returned <code>true</code>, callback is
attached once to the <code>&apos;secure&apos;</code> event. If <code>renegotiate()</code> returned <code>false</code>,
<code>callback</code> will be called in the next tick with an error, unless the
<code>tlsSocket</code> has been destroyed, in which case <code>callback</code> will not be called
at all.</p>
</li>
<li>
<p>Returns: <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> if renegotiation was initiated, <code>false</code> otherwise.</p>
</li>
</ul>
<p>The <code>tlsSocket.renegotiate()</code> method initiates a TLS renegotiation process.
Upon completion, the <code>callback</code> function will be passed a single argument
that is either an <code>Error</code> (if the request failed) or <code>null</code>.</p>
<p>This method can be used to request a peer&apos;s certificate after the secure
connection has been established.</p>
<p>When running as the server, the socket will be destroyed with an error after
<code>handshakeTimeout</code> timeout.</p>
<p>For TLSv1.3, renegotiation cannot be initiated, it is not supported by the
protocol.</p>
<h3>tlsSocket.setMaxSendFragment(size)<span><a class="mark" href="tls.html#tls_tlssocket_setmaxsendfragment_size" id="tls_tlssocket_setmaxsendfragment_size">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tlssocket_setmaxsendfragment_size.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.11</span>
</div>
<ul>
<li><code>size</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> The maximum TLS fragment size. The maximum value is <code>16384</code>.
<strong>Default:</strong> <code>16384</code>.</li>
<li>Returns: <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>The <code>tlsSocket.setMaxSendFragment()</code> method sets the maximum TLS fragment size.
Returns <code>true</code> if setting the limit succeeded; <code>false</code> otherwise.</p>
<p>Smaller fragment sizes decrease the buffering latency on the client: larger
fragments are buffered by the TLS layer until the entire fragment is received
and its integrity is verified; large fragments can span multiple roundtrips
and their processing can be delayed due to packet loss or reordering. However,
smaller fragments add extra TLS framing bytes and CPU overhead, which may
decrease overall server throughput.</p>
<h2>tls.checkServerIdentity(hostname, cert)<span><a class="mark" href="tls.html#tls_tls_checkserveridentity_hostname_cert" id="tls_tls_checkserveridentity_hostname_cert">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_checkserveridentity_hostname_cert.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.8.4</span>
</div>
<ul>
<li><code>hostname</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The host name or IP address to verify the certificate
against.</li>
<li><code>cert</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> A <a href="http://nodejs.cn/s/NskfHT" rel="nofollow">certificate object</a> representing the peer&apos;s certificate.</li>
<li>Returns: <a href="http://nodejs.cn/s/qZ873x" target="_blank" rel="nofollow" class="type">&lt;Error&gt;</a> | <a href="http://nodejs.cn/s/8ym6ow" target="_blank" rel="nofollow" class="type">&lt;undefined&gt;</a></li>
</ul>
<p>Verifies the certificate <code>cert</code> is issued to <code>hostname</code>.</p>
<p>Returns <a href="http://nodejs.cn/s/qZ873x" target="_blank" rel="nofollow" class="type">&lt;Error&gt;</a> object, populating it with <code>reason</code>, <code>host</code>, and <code>cert</code> on
failure. On success, returns <a href="http://nodejs.cn/s/8ym6ow" target="_blank" rel="nofollow" class="type">&lt;undefined&gt;</a>.</p>
<p>This function can be overwritten by providing alternative function as part of
the <code>options.checkServerIdentity</code> option passed to <code>tls.connect()</code>. The
overwriting function can call <code>tls.checkServerIdentity()</code> of course, to augment
the checks done with additional verification.</p>
<p>This function is only called if the certificate passed all other checks, such as
being issued by trusted CA (<code>options.ca</code>).</p>
<h2>tls.connect(options[, callback])<span><a class="mark" href="tls.html#tls_tls_connect_options_callback" id="tls_tls_connect_options_callback">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_connect_options_callback.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v12.9.0</td>
<td><p>Support the <code>allowHalfOpen</code> option.</p></td></tr>
<tr><td>v12.4.0</td>
<td><p>The <code>hints</code> option is now supported.</p></td></tr>
<tr><td>v12.2.0</td>
<td><p>The <code>enableTrace</code> option is now supported.</p></td></tr>
<tr><td>v11.8.0</td>
<td><p>The <code>timeout</code> option is supported now.</p></td></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>lookup</code> option is supported now.</p></td></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>ALPNProtocols</code> option can be a <code>TypedArray</code> or <code>DataView</code> now.</p></td></tr>
<tr><td>v5.3.0, v4.7.0</td>
<td><p>The <code>secureContext</code> option is supported now.</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>ALPN options are supported now.</p></td></tr>
<tr><td>v0.11.3</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.3</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>enableTrace</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>host</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Host the client should connect to. <strong>Default:</strong>
<code>&apos;localhost&apos;</code>.</li>
<li><code>port</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Port the client should connect to.</li>
<li><code>path</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Creates Unix socket connection to path. If this option is
specified, <code>host</code> and <code>port</code> are ignored.</li>
<li><code>socket</code> <a href="http://nodejs.cn/s/2iRabr" target="_blank" rel="nofollow" class="type">&lt;stream.Duplex&gt;</a> Establish secure connection on a given socket
rather than creating a new socket. Typically, this is an instance of
<a href="http://nodejs.cn/s/wsJ1o1" rel="nofollow"><code>net.Socket</code></a>, but any <code>Duplex</code> stream is allowed.
If this option is specified, <code>path</code>, <code>host</code> and <code>port</code> are ignored,
except for certificate validation. Usually, a socket is already connected
when passed to <code>tls.connect()</code>, but it can be connected later.
Connection/disconnection/destruction of <code>socket</code> is the user&apos;s
responsibility; calling <code>tls.connect()</code> will not cause <code>net.connect()</code> to be
called.</li>
<li><code>allowHalfOpen</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If the <code>socket</code> option is missing, indicates
whether or not to allow the internally created socket to be half-open,
otherwise the option is ignored. See the <code>allowHalfOpen</code> option of
<a href="http://nodejs.cn/s/wsJ1o1" rel="nofollow"><code>net.Socket</code></a> for details. <strong>Default:</strong> <code>false</code>.</li>
<li><code>rejectUnauthorized</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If not <code>false</code>, the server certificate is
verified against the list of supplied CAs. An <code>&apos;error&apos;</code> event is emitted if
verification fails; <code>err.code</code> contains the OpenSSL error code. <strong>Default:</strong>
<code>true</code>.</li>
<li><code>ALPNProtocols</code>: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView&gt;</a>
An array of strings, <code>Buffer</code>s or <code>TypedArray</code>s or <code>DataView</code>s, or a
single <code>Buffer</code> or <code>TypedArray</code> or <code>DataView</code> containing the supported ALPN
protocols. <code>Buffer</code>s should have the format <code>[len][name][len][name]...</code>
e.g. <code>&apos;\x08http/1.1\x08http/1.0&apos;</code>, where the <code>len</code> byte is the length of the
next protocol name. Passing an array is usually much simpler, e.g.
<code>[&apos;http/1.1&apos;, &apos;http/1.0&apos;]</code>. Protocols earlier in the list have higher
preference than those later.</li>
<li><code>servername</code>: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Server name for the SNI (Server Name Indication) TLS
extension. It is the name of the host being connected to, and must be a host
name, and not an IP address. It can be used by a multi-homed server to
choose the correct certificate to present to the client, see the
<code>SNICallback</code> option to <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a>.</li>
<li><code>checkServerIdentity(servername, cert)</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> A callback function
to be used (instead of the builtin <code>tls.checkServerIdentity()</code> function)
when checking the server&apos;s hostname (or the provided <code>servername</code> when
explicitly set) against the certificate. This should return an <a href="http://nodejs.cn/s/qZ873x" target="_blank" rel="nofollow" class="type">&lt;Error&gt;</a> if
verification fails. The method should return <code>undefined</code> if the <code>servername</code>
and <code>cert</code> are verified.</li>
<li><code>session</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> A <code>Buffer</code> instance, containing TLS session.</li>
<li><code>minDHSize</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Minimum size of the DH parameter in bits to accept a
TLS connection. When a server offers a DH parameter with a size less
than <code>minDHSize</code>, the TLS connection is destroyed and an error is thrown.
<strong>Default:</strong> <code>1024</code>.</li>
<li><code>secureContext</code>: TLS context object created with
<a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>. If a <code>secureContext</code> is <em>not</em> provided, one
will be created by passing the entire <code>options</code> object to
<code>tls.createSecureContext()</code>.</li>
<li>...: <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> options that are used if the
<code>secureContext</code> option is missing, otherwise they are ignored.</li>
<li>...: Any <a href="http://nodejs.cn/s/787XLt" rel="nofollow"><code>socket.connect()</code></a> option not already listed.</li>
</ul>
</li>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a></li>
<li>Returns: <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a></li>
</ul>
<p>The <code>callback</code> function, if specified, will be added as a listener for the
<a href="http://nodejs.cn/s/s5uun9" rel="nofollow"><code>&apos;secureConnect&apos;</code></a> event.</p>
<p><code>tls.connect()</code> returns a <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> object.</p>
<p>The following illustrates a client for the echo server example from</p>
<pre><code class="language-js">// Assumes an echo server that is listening on port 8000.
const tls = require(&apos;tls&apos;);
const fs = require(&apos;fs&apos;);

const options = {
  // Necessary only if the server requires client certificate authentication.
  key: fs.readFileSync(&apos;client-key.pem&apos;),
  cert: fs.readFileSync(&apos;client-cert.pem&apos;),

  // Necessary only if the server uses a self-signed certificate.
  ca: [ fs.readFileSync(&apos;server-cert.pem&apos;) ],

  // Necessary only if the server&apos;s cert isn&apos;t for &quot;localhost&quot;.
  checkServerIdentity: () =&gt; { return null; },
};

const socket = tls.connect(8000, options, () =&gt; {
  console.log(&apos;client connected&apos;,
              socket.authorized ? &apos;authorized&apos; : &apos;unauthorized&apos;);
  process.stdin.pipe(socket);
  process.stdin.resume();
});
socket.setEncoding(&apos;utf8&apos;);
socket.on(&apos;data&apos;, (data) =&gt; {
  console.log(data);
});
socket.on(&apos;end&apos;, () =&gt; {
  console.log(&apos;server ends connection&apos;);
});
</code></pre>
<h2>tls.connect(path[, options][, callback])<span><a class="mark" href="tls.html#tls_tls_connect_path_options_callback" id="tls_tls_connect_path_options_callback">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_connect_path_options_callback.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.3</span>
</div>
<ul>
<li><code>path</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Default value for <code>options.path</code>.</li>
<li><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> See <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>.</li>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> See <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>.</li>
<li>Returns: <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a></li>
</ul>
<p>Same as <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> except that <code>path</code> can be provided
as an argument instead of an option.</p>
<p>A path option, if specified, will take precedence over the path argument.</p>
<h2>tls.connect(port[, host][, options][, callback])<span><a class="mark" href="tls.html#tls_tls_connect_port_host_options_callback" id="tls_tls_connect_port_host_options_callback">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_connect_port_host_options_callback.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.3</span>
</div>
<ul>
<li><code>port</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Default value for <code>options.port</code>.</li>
<li><code>host</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Default value for <code>options.host</code>.</li>
<li><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> See <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>.</li>
<li><code>callback</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> See <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>.</li>
<li>Returns: <a href="http://nodejs.cn/s/dLcPX8" target="_blank" rel="nofollow" class="type">&lt;tls.TLSSocket&gt;</a></li>
</ul>
<p>Same as <a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a> except that <code>port</code> and <code>host</code> can be provided
as arguments instead of options.</p>
<p>A port or host option, if specified, will take precedence over any port or host
argument.</p>
<h2>tls.createSecureContext([options])<span><a class="mark" href="tls.html#tls_tls_createsecurecontext_options" id="tls_tls_createsecurecontext_options">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_createsecurecontext_options.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v12.12.0</td>
<td><p>Added <code>privateKeyIdentifier</code> and <code>privateKeyEngine</code> options to get private key from an OpenSSL engine.</p></td></tr>
<tr><td>v12.11.0</td>
<td><p>Added <code>sigalgs</code> option to override supported signature algorithms.</p></td></tr>
<tr><td>v12.0.0</td>
<td><p>TLSv1.3 support added.</p></td></tr>
<tr><td>v11.5.0</td>
<td><p>The <code>ca:</code> option now supports <code>BEGIN TRUSTED CERTIFICATE</code>.</p></td></tr>
<tr><td>v11.4.0</td>
<td><p>The <code>minVersion</code> and <code>maxVersion</code> can be used to restrict the allowed TLS protocol versions.</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>The <code>ecdhCurve</code> cannot be set to <code>false</code> anymore due to a change in OpenSSL.</p></td></tr>
<tr><td>v9.3.0</td>
<td><p>The <code>options</code> parameter can now include <code>clientCertEngine</code>.</p></td></tr>
<tr><td>v9.0.0</td>
<td><p>The <code>ecdhCurve</code> option can now be multiple <code>&apos;:&apos;</code> separated curve names or <code>&apos;auto&apos;</code>.</p></td></tr>
<tr><td>v7.3.0</td>
<td><p>If the <code>key</code> option is an array, individual entries do not need a <code>passphrase</code> property anymore. <code>Array</code> entries can also just be <code>string</code>s or <code>Buffer</code>s now.</p></td></tr>
<tr><td>v5.2.0</td>
<td><p>The <code>ca</code> option can now be a single string containing multiple CA certificates.</p></td></tr>
<tr><td>v0.11.13</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.13</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>ca</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> Optionally override the trusted CA
certificates. Default is to trust the well-known CAs curated by Mozilla.
Mozilla&apos;s CAs are completely replaced when CAs are explicitly specified
using this option. The value can be a string or <code>Buffer</code>, or an <code>Array</code> of
strings and/or <code>Buffer</code>s. Any string or <code>Buffer</code> can contain multiple PEM
CAs concatenated together. The peer&apos;s certificate must be chainable to a CA
trusted by the server for the connection to be authenticated. When using
certificates that are not chainable to a well-known CA, the certificate&apos;s CA
must be explicitly specified as a trusted or the connection will fail to
authenticate.
If the peer uses a certificate that doesn&apos;t match or chain to one of the
default CAs, use the <code>ca</code> option to provide a CA certificate that the peer&apos;s
certificate can match or chain to.
For self-signed certificates, the certificate is its own CA, and must be
provided.
For PEM encoded certificates, supported types are &quot;TRUSTED CERTIFICATE&quot;,
&quot;X509 CERTIFICATE&quot;, and &quot;CERTIFICATE&quot;.
See also <a href="http://nodejs.cn/s/sLEZ8w" rel="nofollow"><code>tls.rootCertificates</code></a>.</li>
<li><code>cert</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> Cert chains in PEM format. One cert
chain should be provided per private key. Each cert chain should consist of
the PEM formatted certificate for a provided private <code>key</code>, followed by the
PEM formatted intermediate certificates (if any), in order, and not
including the root CA (the root CA must be pre-known to the peer, see <code>ca</code>).
When providing multiple cert chains, they do not have to be in the same
order as their private keys in <code>key</code>. If the intermediate certificates are
not provided, the peer will not be able to validate the certificate, and the
handshake will fail.</li>
<li><code>sigalgs</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Colon-separated list of supported signature algorithms.
The list can contain digest algorithms (<code>SHA256</code>, <code>MD5</code> etc.), public key
algorithms (<code>RSA-PSS</code>, <code>ECDSA</code> etc.), combination of both (e.g
&apos;RSA+SHA384&apos;) or TLS v1.3 scheme names (e.g. <code>rsa_pss_pss_sha512</code>).
See <a href="https://www.openssl.org/docs/man1.1.1/man3/SSL_CTX_set1_sigalgs_list.html">OpenSSL man pages</a>
for more info.</li>
<li><code>ciphers</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Cipher suite specification, replacing the default. For
more information, see <a href="http://nodejs.cn/s/uGpxjS" rel="nofollow">modifying the default cipher suite</a>. Permitted
ciphers can be obtained via <a href="http://nodejs.cn/s/pFbdbN" rel="nofollow"><code>tls.getCiphers()</code></a>. Cipher names must be
uppercased in order for OpenSSL to accept them.</li>
<li><code>clientCertEngine</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Name of an OpenSSL engine which can provide the
client certificate.</li>
<li><code>crl</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> PEM formatted CRLs (Certificate
Revocation Lists).</li>
<li><code>dhparam</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> Diffie Hellman parameters, required for
<a href="http://nodejs.cn/s/Jw7jEb" rel="nofollow">Perfect Forward Secrecy</a>. Use <code>openssl dhparam</code> to create the parameters.
The key length must be greater than or equal to 1024 bits or else an error
will be thrown. Although 1024 bits is permissible, use 2048 bits or larger
for stronger security. If omitted or invalid, the parameters are silently
discarded and DHE ciphers will not be available.</li>
<li><code>ecdhCurve</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> A string describing a named curve or a colon separated
list of curve NIDs or names, for example <code>P-521:P-384:P-256</code>, to use for
ECDH key agreement. Set to <code>auto</code> to select the
curve automatically. Use <a href="http://nodejs.cn/s/y7wsHA" rel="nofollow"><code>crypto.getCurves()</code></a> to obtain a list of
available curve names. On recent releases, <code>openssl ecparam -list_curves</code>
will also display the name and description of each available elliptic curve.
<strong>Default:</strong> <a href="http://nodejs.cn/s/zYaxGd" rel="nofollow"><code>tls.DEFAULT_ECDH_CURVE</code></a>.</li>
<li><code>honorCipherOrder</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> Attempt to use the server&apos;s cipher suite
preferences instead of the client&apos;s. When <code>true</code>, causes
<code>SSL_OP_CIPHER_SERVER_PREFERENCE</code> to be set in <code>secureOptions</code>, see
<a href="http://nodejs.cn/s/z3Veho" rel="nofollow">OpenSSL Options</a> for more information.</li>
<li><code>key</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object[]&gt;</a> Private keys in PEM format.
PEM allows the option of private keys being encrypted. Encrypted keys will
be decrypted with <code>options.passphrase</code>. Multiple keys using different
algorithms can be provided either as an array of unencrypted key strings or
buffers, or an array of objects in the form
<code>{pem: &lt;string|buffer&gt;[, passphrase: &lt;string&gt;]}</code>. The object form can only
occur in an array. <code>object.passphrase</code> is optional. Encrypted keys will be
decrypted with <code>object.passphrase</code> if provided, or <code>options.passphrase</code> if
it is not.</li>
<li><code>privateKeyEngine</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Name of an OpenSSL engine to get private key
from. Should be used together with <code>privateKeyIdentifier</code>.</li>
<li><code>privateKeyIdentifier</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Identifier of a private key managed by
an OpenSSL engine. Should be used together with <code>privateKeyEngine</code>.
Should not be set together with <code>key</code>, because both options define a
private key in different ways.</li>
<li><code>maxVersion</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Optionally set the maximum TLS version to allow. One
of <code>&apos;TLSv1.3&apos;</code>, <code>&apos;TLSv1.2&apos;</code>, <code>&apos;TLSv1.1&apos;</code>, or <code>&apos;TLSv1&apos;</code>. Cannot be specified
along with the <code>secureProtocol</code> option, use one or the other.
<strong>Default:</strong> <a href="http://nodejs.cn/s/Xb9tv1" rel="nofollow"><code>tls.DEFAULT_MAX_VERSION</code></a>.</li>
<li><code>minVersion</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Optionally set the minimum TLS version to allow. One
of <code>&apos;TLSv1.3&apos;</code>, <code>&apos;TLSv1.2&apos;</code>, <code>&apos;TLSv1.1&apos;</code>, or <code>&apos;TLSv1&apos;</code>. Cannot be specified
along with the <code>secureProtocol</code> option, use one or the other. It is not
recommended to use less than TLSv1.2, but it may be required for
interoperability.
<strong>Default:</strong> <a href="http://nodejs.cn/s/5d2oxB" rel="nofollow"><code>tls.DEFAULT_MIN_VERSION</code></a>.</li>
<li><code>passphrase</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Shared passphrase used for a single private key and/or
a PFX.</li>
<li><code>pfx</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object[]&gt;</a> PFX or PKCS12 encoded
private key and certificate chain. <code>pfx</code> is an alternative to providing
<code>key</code> and <code>cert</code> individually. PFX is usually encrypted, if it is,
<code>passphrase</code> will be used to decrypt it. Multiple PFX can be provided either
as an array of unencrypted PFX buffers, or an array of objects in the form
<code>{buf: &lt;string|buffer&gt;[, passphrase: &lt;string&gt;]}</code>. The object form can only
occur in an array. <code>object.passphrase</code> is optional. Encrypted PFX will be
decrypted with <code>object.passphrase</code> if provided, or <code>options.passphrase</code> if
it is not.</li>
<li><code>secureOptions</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Optionally affect the OpenSSL protocol behavior,
which is not usually necessary. This should be used carefully if at all!
Value is a numeric bitmask of the <code>SSL_OP_*</code> options from
<a href="http://nodejs.cn/s/z3Veho" rel="nofollow">OpenSSL Options</a>.</li>
<li><code>secureProtocol</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Legacy mechanism to select the TLS protocol
version to use, it does not support independent control of the minimum and
maximum version, and does not support limiting the protocol to TLSv1.3.  Use
<code>minVersion</code> and <code>maxVersion</code> instead.  The possible values are listed as
<a href="http://nodejs.cn/s/CipgPu" rel="nofollow">SSL_METHODS</a>, use the function names as strings.  For example, use
<code>&apos;TLSv1_1_method&apos;</code> to force TLS version 1.1, or <code>&apos;TLS_method&apos;</code> to allow any
TLS protocol version up to TLSv1.3.  It is not recommended to use TLS
versions less than 1.2, but it may be required for interoperability.
<strong>Default:</strong> none, see <code>minVersion</code>.</li>
<li><code>sessionIdContext</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Opaque identifier used by servers to ensure
session state is not shared between applications. Unused by clients.</li>
</ul>
</li>
</ul>
<p><a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a> sets the default value of the <code>honorCipherOrder</code> option
to <code>true</code>, other APIs that create secure contexts leave it unset.</p>
<p><a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a> uses a 128 bit truncated SHA1 hash value generated
from <code>process.argv</code> as the default value of the <code>sessionIdContext</code> option, other
APIs that create secure contexts have no default value.</p>
<p>The <code>tls.createSecureContext()</code> method creates a <code>SecureContext</code> object. It is
usable as an argument to several <code>tls</code> APIs, such as <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a>
and <a href="http://nodejs.cn/s/NTuj6A" rel="nofollow"><code>server.addContext()</code></a>, but has no public methods.</p>
<p>A key is <em>required</em> for ciphers that make use of certificates. Either <code>key</code> or
<code>pfx</code> can be used to provide it.</p>
<p>If the <code>ca</code> option is not given, then Node.js will default to using
<a href="http://nodejs.cn/s/jtCebP" rel="nofollow">Mozilla&apos;s publicly trusted list of CAs</a>.</p>
<h2>tls.createServer([options][, secureConnectionListener])<span><a class="mark" href="tls.html#tls_tls_createserver_options_secureconnectionlistener" id="tls_tls_createserver_options_secureconnectionlistener">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_createserver_options_secureconnectionlistener.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v12.3.0</td>
<td><p>The <code>options</code> parameter now supports <code>net.createServer()</code> options.</p></td></tr>
<tr><td>v9.3.0</td>
<td><p>The <code>options</code> parameter can now include <code>clientCertEngine</code>.</p></td></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>ALPNProtocols</code> option can be a <code>TypedArray</code> or <code>DataView</code> now.</p></td></tr>
<tr><td>v5.0.0</td>
<td><p>ALPN options are supported now.</p></td></tr>
<tr><td>v0.3.2</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>ALPNProtocols</code>: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer[]&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray[]&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView[]&gt;</a> | <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> | <a href="http://nodejs.cn/s/oh3CkV" target="_blank" rel="nofollow" class="type">&lt;TypedArray&gt;</a> | <a href="http://nodejs.cn/s/yCdVkD" target="_blank" rel="nofollow" class="type">&lt;DataView&gt;</a>
An array of strings, <code>Buffer</code>s or <code>TypedArray</code>s or <code>DataView</code>s, or a single
<code>Buffer</code> or <code>TypedArray</code> or <code>DataView</code> containing the supported ALPN
protocols. <code>Buffer</code>s should have the format <code>[len][name][len][name]...</code>
e.g. <code>0x05hello0x05world</code>, where the first byte is the length of the next
protocol name. Passing an array is usually much simpler, e.g.
<code>[&apos;hello&apos;, &apos;world&apos;]</code>. (Protocols should be ordered by their priority.)</li>
<li><code>clientCertEngine</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Name of an OpenSSL engine which can provide the
client certificate.</li>
<li><code>enableTrace</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code>, <a href="http://nodejs.cn/s/aMymdY" rel="nofollow"><code>tls.TLSSocket.enableTrace()</code></a> will be
called on new connections. Tracing can be enabled after the secure
connection is established, but this option must be used to trace the secure
connection setup. <strong>Default:</strong> <code>false</code>.</li>
<li><code>handshakeTimeout</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Abort the connection if the SSL/TLS handshake
does not finish in the specified number of milliseconds.
A <code>&apos;tlsClientError&apos;</code> is emitted on the <code>tls.Server</code> object whenever
a handshake times out. <strong>Default:</strong> <code>120000</code> (120 seconds).</li>
<li><code>rejectUnauthorized</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If not <code>false</code> the server will reject any
connection which is not authorized with the list of supplied CAs. This
option only has an effect if <code>requestCert</code> is <code>true</code>. <strong>Default:</strong> <code>true</code>.</li>
<li><code>requestCert</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code> the server will request a certificate from
clients that connect and attempt to verify that certificate. <strong>Default:</strong>
<code>false</code>.</li>
<li><code>sessionTimeout</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> The number of seconds after which a TLS session
created by the server will no longer be resumable. See
<a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information. <strong>Default:</strong> <code>300</code>.</li>
<li><code>SNICallback(servername, cb)</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a> A function that will be called if
the client supports SNI TLS extension. Two arguments will be passed when
called: <code>servername</code> and <code>cb</code>. <code>SNICallback</code> should invoke <code>cb(null, ctx)</code>,
where <code>ctx</code> is a <code>SecureContext</code> instance. (<code>tls.createSecureContext(...)</code>
can be used to get a proper <code>SecureContext</code>.) If <code>SNICallback</code> wasn&apos;t
provided the default callback with high-level API will be used (see below).</li>
<li><code>ticketKeys</code>: <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> 48-bytes of cryptographically strong pseudo-random
data. See <a href="http://nodejs.cn/s/9E4QWV" rel="nofollow">Session Resumption</a> for more information.</li>
<li>...: Any <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> option can be provided. For
servers, the identity options (<code>pfx</code> or <code>key</code>/<code>cert</code>) are usually required.</li>
<li>...: Any <a href="http://nodejs.cn/s/e8cikS" rel="nofollow"><code>net.createServer()</code></a> option can be provided.</li>
</ul>
</li>
<li><code>secureConnectionListener</code> <a href="http://nodejs.cn/s/ceTQa6" target="_blank" rel="nofollow" class="type">&lt;Function&gt;</a></li>
<li>Returns: <a href="http://nodejs.cn/s/eaRaiL" target="_blank" rel="nofollow" class="type">&lt;tls.Server&gt;</a></li>
</ul>
<p>Creates a new <a href="http://nodejs.cn/s/eaRaiL" rel="nofollow"><code>tls.Server</code></a>. The <code>secureConnectionListener</code>, if provided, is
automatically set as a listener for the <a href="http://nodejs.cn/s/LwRoDo" rel="nofollow"><code>&apos;secureConnection&apos;</code></a> event.</p>
<p>The <code>ticketKeys</code> options is automatically shared between <code>cluster</code> module
workers.</p>
<p>The following illustrates a simple echo server:</p>
<pre><code class="language-js">const tls = require(&apos;tls&apos;);
const fs = require(&apos;fs&apos;);

const options = {
  key: fs.readFileSync(&apos;server-key.pem&apos;),
  cert: fs.readFileSync(&apos;server-cert.pem&apos;),

  // This is necessary only if using client certificate authentication.
  requestCert: true,

  // This is necessary only if the client uses a self-signed certificate.
  ca: [ fs.readFileSync(&apos;client-cert.pem&apos;) ]
};

const server = tls.createServer(options, (socket) =&gt; {
  console.log(&apos;server connected&apos;,
              socket.authorized ? &apos;authorized&apos; : &apos;unauthorized&apos;);
  socket.write(&apos;welcome!\n&apos;);
  socket.setEncoding(&apos;utf8&apos;);
  socket.pipe(socket);
});
server.listen(8000, () =&gt; {
  console.log(&apos;server bound&apos;);
});
</code></pre>
<p>The server can be tested by connecting to it using the example client from
<a href="http://nodejs.cn/s/4Pd5zB" rel="nofollow"><code>tls.connect()</code></a>.</p>
<h2>tls.getCiphers()<span><a class="mark" href="tls.html#tls_tls_getciphers" id="tls_tls_getciphers">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_getciphers.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.10.2</span>
</div>
<ul>
<li>Returns: <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a></li>
</ul>
<p>Returns an array with the names of the supported TLS ciphers. The names are
lower-case for historical reasons, but must be uppercased to be used in
the <code>ciphers</code> option of <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>.</p>
<p>Cipher names that start with <code>&apos;tls_&apos;</code> are for TLSv1.3, all the others are for
TLSv1.2 and below.</p>
<pre><code class="language-js">console.log(tls.getCiphers()); // [&apos;aes128-gcm-sha256&apos;, &apos;aes128-sha&apos;, ...]
</code></pre>
<h2>tls.rootCertificates<span><a class="mark" href="tls.html#tls_tls_rootcertificates" id="tls_tls_rootcertificates">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_rootcertificates.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v12.3.0</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a></li>
</ul>
<p>An immutable array of strings representing the root certificates (in PEM format)
used for verifying peer certificates. This is the default value of the <code>ca</code>
option to <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>.</p>
<h2>tls.DEFAULT_ECDH_CURVE<span><a class="mark" href="tls.html#tls_tls_default_ecdh_curve" id="tls_tls_default_ecdh_curve">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_default_ecdh_curve.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>Default value changed to <code>&apos;auto&apos;</code>.</p></td></tr>
<tr><td>v0.11.13</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.13</span></p></td></tr>
</tbody></table>
</details>
</div>
<p>The default curve name to use for ECDH key agreement in a tls server. The
default value is <code>&apos;auto&apos;</code>. See <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a> for further
information.</p>
<h2>tls.DEFAULT_MAX_VERSION<span><a class="mark" href="tls.html#tls_tls_default_max_version" id="tls_tls_default_max_version">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_default_max_version.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.4.0</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The default value of the <code>maxVersion</code> option of
<a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>. It can be assigned any of the supported TLS
protocol versions, <code>&apos;TLSv1.3&apos;</code>, <code>&apos;TLSv1.2&apos;</code>, <code>&apos;TLSv1.1&apos;</code>, or <code>&apos;TLSv1&apos;</code>.
<strong>Default:</strong> <code>&apos;TLSv1.3&apos;</code>, unless changed using CLI options. Using
<code>--tls-max-v1.2</code> sets the default to <code>&apos;TLSv1.2&apos;</code>.  Using <code>--tls-max-v1.3</code> sets
the default to <code>&apos;TLSv1.3&apos;</code>. If multiple of the options are provided, the
highest maximum is used.</li>
</ul>
<h2>tls.DEFAULT_MIN_VERSION<span><a class="mark" href="tls.html#tls_tls_default_min_version" id="tls_tls_default_min_version">#</a></span></h2><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/tls/tls_default_min_version.md" class="tip_en">&#x63D0;&#x4EA4;&#x4FEE;&#x6539;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v11.4.0</span>
</div>
<ul>
<li><a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The default value of the <code>minVersion</code> option of
<a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a>. It can be assigned any of the supported TLS
protocol versions, <code>&apos;TLSv1.3&apos;</code>, <code>&apos;TLSv1.2&apos;</code>, <code>&apos;TLSv1.1&apos;</code>, or <code>&apos;TLSv1&apos;</code>.
<strong>Default:</strong> <code>&apos;TLSv1.2&apos;</code>, unless changed using CLI options. Using
<code>--tls-min-v1.0</code> sets the default to <code>&apos;TLSv1&apos;</code>. Using <code>--tls-min-v1.1</code> sets
the default to <code>&apos;TLSv1.1&apos;</code>. Using <code>--tls-min-v1.3</code> sets the default to
<code>&apos;TLSv1.3&apos;</code>. If multiple of the options are provided, the lowest minimum is
used.</li>
</ul>
<h2>&#x5E9F;&#x5F03;&#x7684; API<span><a class="mark" href="tls.html#tls_deprecated_apis" id="tls_deprecated_apis">#</a></span></h2>
<h3>CryptoStream &#x7C7B;<span><a class="mark" href="tls.html#tls_class_cryptostream" id="tls_class_cryptostream">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.4</span><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.11.3</span>
</div>
<p></p><div class="api_stability api_stability_0"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 0</a> - &#x5E9F;&#x5F03;: &#x6539;&#x4E3A;&#x4F7F;&#x7528; <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> &#x3002;</div><p></p>
<p>The <code>tls.CryptoStream</code> class represents a stream of encrypted data. This class
is deprecated and should no longer be used.</p>
<h4>cryptoStream.bytesWritten<span><a class="mark" href="tls.html#tls_cryptostream_byteswritten" id="tls_cryptostream_byteswritten">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.4</span><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.11.3</span>
</div>
<p>The <code>cryptoStream.bytesWritten</code> property returns the total number of bytes
written to the underlying socket <em>including</em> the bytes required for the
implementation of the TLS protocol.</p>
<h3>SecurePair &#x7C7B;<span><a class="mark" href="tls.html#tls_class_securepair" id="tls_class_securepair">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.11.3</span>
</div>
<p></p><div class="api_stability api_stability_0"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 0</a> - &#x5E9F;&#x5F03;: &#x6539;&#x4E3A;&#x4F7F;&#x7528; <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> &#x3002;</div><p></p>
<p>Returned by <a href="http://nodejs.cn/s/gcFbe4" rel="nofollow"><code>tls.createSecurePair()</code></a>.</p>
<h4>&apos;secure&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="tls.html#tls_event_secure" id="tls_event_secure">#</a></span></h4><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.11.3</span>
</div>
<p>The <code>&apos;secure&apos;</code> event is emitted by the <code>SecurePair</code> object once a secure
connection has been established.</p>
<p>As with checking for the server
<a href="tls.html#tls_event_secureconnection"><code>&apos;secureConnection&apos;</code></a>
event, <code>pair.cleartext.authorized</code> should be inspected to confirm whether the
certificate used is properly authorized.</p>
<h3>tls.createSecurePair([context][, isServer][, requestCert][, rejectUnauthorized][, options])<span><a class="mark" href="tls.html#tls_tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options" id="tls_tls_createsecurepair_context_isserver_requestcert_rejectunauthorized_options">#</a></span></h3><p class="tip_wrap"><span class="tip_no_trans">&#x6682;&#x65E0;&#x4E2D;&#x82F1;&#x5BF9;&#x7167;</span></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v5.0.0</td>
<td><p>ALPN options are supported now.</p></td></tr>
<tr><td>v0.11.3</td>
<td><p><span>&#x5E9F;&#x5F03;&#x4E8E;: v0.11.3</span></p></td></tr>
<tr><td>v0.3.2</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.3.2</span></p></td></tr>
</tbody></table>
</details>
</div>
<p></p><div class="api_stability api_stability_0"><a target="_blank" rel="nofollow" href="documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 0</a> - &#x5E9F;&#x5F03;: &#x6539;&#x4E3A;&#x4F7F;&#x7528; <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a> &#x3002;</div><p></p>
<ul>
<li><code>context</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> A secure context object as returned by
<code>tls.createSecureContext()</code></li>
<li><code>isServer</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> to specify that this TLS connection should be
opened as a server.</li>
<li><code>requestCert</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> <code>true</code> to specify whether a server should request a
certificate from a connecting client. Only applies when <code>isServer</code> is <code>true</code>.</li>
<li><code>rejectUnauthorized</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If not <code>false</code> a server automatically reject
clients with invalid certificates. Only applies when <code>isServer</code> is <code>true</code>.</li>
<li>
<p><code>options</code></p>
<ul>
<li><code>enableTrace</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>secureContext</code>: A TLS context object from <a href="http://nodejs.cn/s/Di4SrM" rel="nofollow"><code>tls.createSecureContext()</code></a></li>
<li><code>isServer</code>: If <code>true</code> the TLS socket will be instantiated in server-mode.
<strong>Default:</strong> <code>false</code>.</li>
<li><code>server</code> <a href="http://nodejs.cn/s/gBYjux" target="_blank" rel="nofollow" class="type">&lt;net.Server&gt;</a> A <a href="http://nodejs.cn/s/gBYjux" rel="nofollow"><code>net.Server</code></a> instance</li>
<li><code>requestCert</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>rejectUnauthorized</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>ALPNProtocols</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>SNICallback</code>: See <a href="http://nodejs.cn/s/igCzp7" rel="nofollow"><code>tls.createServer()</code></a></li>
<li><code>session</code> <a href="http://nodejs.cn/s/6x1hD3" target="_blank" rel="nofollow" class="type">&lt;Buffer&gt;</a> A <code>Buffer</code> instance containing a TLS session.</li>
<li><code>requestOCSP</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code>, specifies that the OCSP status request
extension will be added to the client hello and an <code>&apos;OCSPResponse&apos;</code> event
will be emitted on the socket before establishing a secure communication.</li>
</ul>
</li>
</ul>
<p>Creates a new secure pair object with two streams, one of which reads and writes
the encrypted data and the other of which reads and writes the cleartext data.
Generally, the encrypted stream is piped to/from an incoming encrypted data
stream and the cleartext one is used as a replacement for the initial encrypted
stream.</p>
<p><code>tls.createSecurePair()</code> returns a <code>tls.SecurePair</code> object with <code>cleartext</code> and
<code>encrypted</code> stream properties.</p>
<p>Using <code>cleartext</code> has the same API as <a href="http://nodejs.cn/s/dLcPX8" rel="nofollow"><code>tls.TLSSocket</code></a>.</p>
<p>The <code>tls.createSecurePair()</code> method is now deprecated in favor of
<code>tls.TLSSocket()</code>. For example, the code:</p>
<pre><code class="language-js">pair = tls.createSecurePair(/* ... */);
pair.encrypted.pipe(socket);
socket.pipe(pair.encrypted);
</code></pre>
<p>can be replaced by:</p>
<pre><code class="language-js">secureSocket = tls.TLSSocket(socket, options);
</code></pre>
<p>where <code>secureSocket</code> has the same API as <code>pair.cleartext</code>.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- 搜索弹窗 -->
  <!-- <div id="search_modal"></div> -->
  <!-- js -->
  <!--[if lt IE 10]><script src="/static/lib/placeholders.js?20170426"></script><![endif]-->
  
  <script>
    document.write('<script src="http://nodejs.cn/api/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756325981"><\/script>');
  </script>

</body></html>