<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>child_process.fork(modulePath[, args][, options]) | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/child_process/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756295873" rel="stylesheet">')
  </script>
</head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-child_process">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>child_process.fork(modulePath[, args][, options])</h1>
          <div id="gtoc">
            <ul>
              <li>v12.14.0</li>
              <li>
                <a href="../child_process.html#child_process_child_process_fork_modulepath_args_options" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/child_process/child_process_fork_modulepath_args_options.md" rel="nofollow" target="_blank">提交修改</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>

        <div id="biz_item"></div>
  
        <div id="apicontent">
          <div id="content_left"><div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>stdio</code> option can now be a string.</p></td></tr>
<tr><td>v6.4.0</td>
<td><p>The <code>stdio</code> option is supported now.</p></td></tr>
<tr><td>v0.5.0</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.5.0</span></p></td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>modulePath</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x8981;&#x5728;&#x5B50;&#x8FDB;&#x7A0B;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x6A21;&#x5757;&#x3002;</li>
<li><code>args</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> &#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x7684;&#x5217;&#x8868;&#x3002;</li>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>cwd</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x5F53;&#x524D;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x3002;</li>
<li><code>detached</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> &#x51C6;&#x5907;&#x5B50;&#x8FDB;&#x7A0B;&#x72EC;&#x7ACB;&#x4E8E;&#x5176;&#x7236;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x3002;&#x5177;&#x4F53;&#x884C;&#x4E3A;&#x53D6;&#x51B3;&#x4E8E;&#x5E73;&#x53F0;&#xFF0C;&#x53C2;&#x9605; <a href="http://nodejs.cn/s/Zz33Wb" rel="nofollow"><code>options.detached</code></a>&#x3002;</li>
<li><code>env</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> &#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x503C;:</strong> <code>process.env</code>&#x3002;</li>
<li><code>execPath</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x3002;</li>
<li><code>execArgv</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> &#x4F20;&#x7ED9;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x53C2;&#x6570;&#x7684;&#x5217;&#x8868;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x503C;:</strong> <code>process.execArgv</code>&#x3002;</li>
<li><code>silent</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> &#x5982;&#x679C;&#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x5B50;&#x8FDB;&#x7A0B;&#x7684; stdin&#x3001;stdout &#x548C; stderr &#x5C06;&#x4F1A;&#x88AB;&#x8F93;&#x9001;&#x5230;&#x7236;&#x8FDB;&#x7A0B;&#xFF0C;&#x5426;&#x5219;&#x5B83;&#x4EEC;&#x5C06;&#x4F1A;&#x7EE7;&#x627F;&#x81EA;&#x7236;&#x8FDB;&#x7A0B;&#xFF0C;&#x8BE6;&#x89C1; <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> &#x7684; <a href="http://nodejs.cn/s/ixmPX9" rel="nofollow"><code>stdio</code></a> &#x4E2D;&#x7684; <code>&apos;pipe&apos;</code> &#x548C; <code>&apos;inherit&apos;</code> &#x9009;&#x9879;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x503C;:</strong> <code>false</code>&#x3002;</li>
<li><code>stdio</code> <a href="http://nodejs.cn/s/ZJSz23" target="_blank" rel="nofollow" class="type">&lt;Array&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> &#x53C2;&#x9605; <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> &#x7684; <a href="http://nodejs.cn/s/ixmPX9" rel="nofollow"><code>stdio</code></a>&#x3002;&#x5F53;&#x63D0;&#x4F9B;&#x6B64;&#x9009;&#x9879;&#x65F6;&#xFF0C;&#x5219;&#x5B83;&#x8986;&#x76D6; <code>silent</code> &#x9009;&#x9879;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;&#x6570;&#x7EC4;&#x53D8;&#x91CF;&#xFF0C;&#x5219;&#x5B83;&#x5FC5;&#x987B;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x503C;&#x4E3A; <code>&apos;ipc&apos;</code> &#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x4F1A;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;&#x4F8B;&#x5982; <code>[0, 1, 2, &apos;ipc&apos;]</code>&#x3002;</li>
<li><code>windowsVerbatimArguments</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> &#x5728; Windows &#x4E0A;&#x4E0D;&#x4E3A;&#x53C2;&#x6570;&#x52A0;&#x4E0A;&#x5F15;&#x53F7;&#x6216;&#x8F6C;&#x4E49;&#x3002;&#x5728; Unix &#x4E0A;&#x5219;&#x5FFD;&#x7565;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x503C;:</strong> <code>false</code>&#x3002;</li>
<li><code>uid</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> &#x8BBE;&#x7F6E;&#x8FDB;&#x7A0B;&#x7684;&#x7528;&#x6237;&#x6807;&#x8BC6;&#xFF0C;&#x53C2;&#x9605; <a href="http://nodejs.cn/s/bUGgha" rel="nofollow"><code>setuid(2)</code></a>&#x3002;</li>
<li><code>gid</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> &#x8BBE;&#x7F6E;&#x8FDB;&#x7A0B;&#x7684;&#x7FA4;&#x7EC4;&#x6807;&#x8BC6;&#xFF0C;&#x53C2;&#x9605; <a href="http://nodejs.cn/s/64HRVx" rel="nofollow"><code>setgid(2)</code></a>&#x3002;</li>
</ul>
</li>
<li>&#x8FD4;&#x56DE;: <a href="http://nodejs.cn/s/yQBM4n" target="_blank" rel="nofollow" class="type">&lt;ChildProcess&gt;</a></li>
</ul><p><code>child_process.fork()</code> &#x65B9;&#x6CD5;&#x662F; <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> &#x7684;&#x4E00;&#x4E2A;&#x7279;&#x4F8B;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x884D;&#x751F;&#x65B0;&#x7684; Node.js &#x8FDB;&#x7A0B;&#x3002;
&#x4E0E; <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> &#x4E00;&#x6837;&#x8FD4;&#x56DE; <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> &#x5BF9;&#x8C61;&#x3002;
&#x8FD4;&#x56DE;&#x7684; <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> &#x5C06;&#x4F1A;&#x5185;&#x7F6E;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x901A;&#x4FE1;&#x901A;&#x9053;&#xFF0C;&#x5141;&#x8BB8;&#x6D88;&#x606F;&#x5728;&#x7236;&#x8FDB;&#x7A0B;&#x548C;&#x5B50;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x6765;&#x56DE;&#x4F20;&#x9012;&#x3002;
&#x8BE6;&#x89C1; <a href="http://nodejs.cn/s/Eggixm" rel="nofollow"><code>subprocess.send()</code></a>&#x3002;</p><p>&#x8BB0;&#x4F4F;&#xFF0C;&#x884D;&#x751F;&#x7684; Node.js &#x5B50;&#x8FDB;&#x7A0B;&#x72EC;&#x7ACB;&#x4E8E;&#x7236;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F46;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x7684; IPC &#x901A;&#x4FE1;&#x901A;&#x9053;&#x9664;&#x5916;&#x3002;
&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5E26;&#x6709;&#x81EA;&#x5DF1;&#x7684; V8 &#x5B9E;&#x4F8B;&#x3002;
&#x7531;&#x4E8E;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x8D44;&#x6E90;&#x5206;&#x914D;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5EFA;&#x8BAE;&#x884D;&#x751F;&#x5927;&#x91CF;&#x7684; Node.js &#x5B50;&#x8FDB;&#x7A0B;&#x3002;</p><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; <code>child_process.fork()</code> &#x5C06;&#x4F1A;&#x4F7F;&#x7528;&#x7236;&#x8FDB;&#x7A0B;&#x7684; <a href="http://nodejs.cn/s/MCrAya" rel="nofollow"><code>process.execPath</code></a> &#x6765;&#x884D;&#x751F;&#x65B0;&#x7684; Node.js &#x5B9E;&#x4F8B;&#x3002;
<code>options</code> &#x5BF9;&#x8C61;&#x4E2D;&#x7684; <code>execPath</code> &#x5C5E;&#x6027;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x6267;&#x884C;&#x8DEF;&#x5F84;&#x3002;</p><p>&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684; <code>execPath</code> &#x542F;&#x52A8;&#x7684; Node.js &#x8FDB;&#x7A0B;&#x5C06;&#x4F1A;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF08;&#x5728;&#x5B50;&#x8FDB;&#x7A0B;&#x4E0A;&#x4F7F;&#x7528;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>NODE_CHANNEL_FD</code> &#x6807;&#x8BC6;&#xFF09;&#x4E0E;&#x7236;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x3002;</p><p>&#x4E0E; <a href="http://nodejs.cn/s/mbvoBz" rel="nofollow"><code>fork(2)</code></a> &#x7684; POSIX &#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#xFF0C; <code>child_process.fork()</code> &#x4E0D;&#x4F1A;&#x514B;&#x9686;&#x5F53;&#x524D;&#x7684;&#x8FDB;&#x7A0B;&#x3002;</p><p><a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> &#x4E2D;&#x53EF;&#x7528;&#x7684; <code>shell</code> &#x9009;&#x9879;&#x5728; <code>child_process.fork()</code> &#x4E2D;&#x4E0D;&#x652F;&#x6301;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x5219;&#x5C06;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p></div>
          <div id="content_right"><div class="api_metadata">
<details class="changelog"><summary>History</summary>
<table>
<tbody><tr><th>Version</th><th>Changes</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>stdio</code> option can now be a string.</p></td></tr>
<tr><td>v6.4.0</td>
<td><p>The <code>stdio</code> option is supported now.</p></td></tr>
<tr><td>v0.5.0</td>
<td><p><span>Added in: v0.5.0</span></p></td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>modulePath</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> The module to run in the child.</li>
<li><code>args</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> List of string arguments.</li>
<li>
<p><code>options</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>cwd</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Current working directory of the child process.</li>
<li><code>detached</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> Prepare child to run independently of its parent
process. Specific behavior depends on the platform, see
<a href="http://nodejs.cn/s/Zz33Wb" rel="nofollow"><code>options.detached</code></a>).</li>
<li><code>env</code> <a href="http://nodejs.cn/s/jzn6Ao" target="_blank" rel="nofollow" class="type">&lt;Object&gt;</a> Environment key-value pairs.  <strong>Default:</strong> <code>process.env</code>.</li>
<li><code>execPath</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> Executable used to create the child process.</li>
<li><code>execArgv</code> <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string[]&gt;</a> List of string arguments passed to the executable.
<strong>Default:</strong> <code>process.execArgv</code>.</li>
<li><code>silent</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> If <code>true</code>, stdin, stdout, and stderr of the child will be
piped to the parent, otherwise they will be inherited from the parent, see
the <code>&apos;pipe&apos;</code> and <code>&apos;inherit&apos;</code> options for <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a>&apos;s
<a href="http://nodejs.cn/s/ixmPX9" rel="nofollow"><code>stdio</code></a> for more details. <strong>Default:</strong> <code>false</code>.</li>
<li><code>stdio</code> <a href="http://nodejs.cn/s/ZJSz23" target="_blank" rel="nofollow" class="type">&lt;Array&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a> See <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a>&apos;s <a href="http://nodejs.cn/s/ixmPX9" rel="nofollow"><code>stdio</code></a>.
When this option is provided, it overrides <code>silent</code>. If the array variant
is used, it must contain exactly one item with value <code>&apos;ipc&apos;</code> or an error
will be thrown. For instance <code>[0, 1, 2, &apos;ipc&apos;]</code>.</li>
<li><code>windowsVerbatimArguments</code> <a href="http://nodejs.cn/s/jFbvuT" target="_blank" rel="nofollow" class="type">&lt;boolean&gt;</a> No quoting or escaping of arguments is
done on Windows. Ignored on Unix. <strong>Default:</strong> <code>false</code>.</li>
<li><code>uid</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Sets the user identity of the process (see <a href="http://nodejs.cn/s/bUGgha" rel="nofollow"><code>setuid(2)</code></a>).</li>
<li><code>gid</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> Sets the group identity of the process (see <a href="http://nodejs.cn/s/64HRVx" rel="nofollow"><code>setgid(2)</code></a>).</li>
</ul>
</li>
<li>Returns: <a href="http://nodejs.cn/s/yQBM4n" target="_blank" rel="nofollow" class="type">&lt;ChildProcess&gt;</a></li>
</ul><p>The <code>child_process.fork()</code> method is a special case of
<a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> used specifically to spawn new Node.js processes.
Like <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a>, a <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> object is returned. The
returned <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> will have an additional communication channel
built-in that allows messages to be passed back and forth between the parent and
child. See <a href="http://nodejs.cn/s/Eggixm" rel="nofollow"><code>subprocess.send()</code></a> for details.</p><p>Keep in mind that spawned Node.js child processes are
independent of the parent with exception of the IPC communication channel
that is established between the two. Each process has its own memory, with
their own V8 instances. Because of the additional resource allocations
required, spawning a large number of child Node.js processes is not
recommended.</p><p>By default, <code>child_process.fork()</code> will spawn new Node.js instances using the
<a href="http://nodejs.cn/s/MCrAya" rel="nofollow"><code>process.execPath</code></a> of the parent process. The <code>execPath</code> property in the
<code>options</code> object allows for an alternative execution path to be used.</p><p>Node.js processes launched with a custom <code>execPath</code> will communicate with the
parent process using the file descriptor (fd) identified using the
environment variable <code>NODE_CHANNEL_FD</code> on the child process.</p><p>Unlike the <a href="http://nodejs.cn/s/mbvoBz" rel="nofollow"><code>fork(2)</code></a> POSIX system call, <code>child_process.fork()</code> does not clone the
current process.</p><p>The <code>shell</code> option available in <a href="http://nodejs.cn/s/CKoDGf" rel="nofollow"><code>child_process.spawn()</code></a> is not supported by
<code>child_process.fork()</code> and will be ignored if set.</p></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="http://nodejs.cn/api/child_process/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756295873"><\/script>');
  </script>
</body>
</html>