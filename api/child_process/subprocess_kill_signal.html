<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>subprocess.kill([signal]) | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="http://static.nodejs.cn/_static/img/favicon.png"><link rel="stylesheet" href="/api/api.css">
  <script>
    document.write('<link href="http://nodejs.cn/api/child_process/'&#32;+&#32;(location.port?'':'//static.nodejs.cn')&#32;+&#32;'/_static/css/api.css?1576756295933" rel="stylesheet">')
  </script>
</head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-child_process">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>subprocess.kill([signal])</h1>
          <div id="gtoc">
            <ul>
              <li>v12.14.0</li>
              <li>
                <a href="../child_process.html#child_process_subprocess_kill_signal" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="https://github.com/nodejscn/node-api-cn/edit/master/child_process/subprocess_kill_signal.md" rel="nofollow" target="_blank">提交修改</a>
              </li>
              <li>
                <a href="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>

        <div id="biz_item"></div>
  
        <div id="apicontent">
          <div id="content_left"><div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.1.90</span>
</div><ul>
<li><code>signal</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul><p><code>subprocess.kill()</code> &#x65B9;&#x6CD5;&#x4F1A;&#x5411;&#x5B50;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#x3002;
&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x5B9A;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x8FDB;&#x7A0B;&#x5C06;&#x4F1A;&#x53D1;&#x9001; <code>&apos;SIGTERM&apos;</code> &#x4FE1;&#x53F7;&#x3002;
&#x53C2;&#x9605; <a href="http://nodejs.cn/s/Fj3tfw" rel="nofollow"><code>signal(7)</code></a> &#x4E86;&#x89E3;&#x53EF;&#x7528;&#x7684;&#x4FE1;&#x53F7;&#x5217;&#x8868;&#x3002;</p><pre><code class="language-js">const { spawn } = require(&apos;child_process&apos;);
const grep = spawn(&apos;grep&apos;, [&apos;ssh&apos;]);

grep.on(&apos;close&apos;, (code, signal) =&gt; {
  console.log(`&#x5B50;&#x8FDB;&#x7A0B;&#x56E0;&#x6536;&#x5230;&#x4FE1;&#x53F7; ${signal} &#x800C;&#x7EC8;&#x6B62;`);
});

// &#x53D1;&#x9001; SIGHUP &#x5230;&#x8FDB;&#x7A0B;&#x3002;
grep.kill(&apos;SIGHUP&apos;);
</code></pre><p>&#x5982;&#x679C;&#x4FE1;&#x53F7;&#x6CA1;&#x6709;&#x88AB;&#x9001;&#x8FBE;&#xFF0C;&#x5219; <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> &#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1; <a href="http://nodejs.cn/s/zPWBLU" rel="nofollow"><code>&apos;error&apos;</code></a> &#x4E8B;&#x4EF6;&#x3002;
&#x5411;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x9000;&#x51FA;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;&#x4FE1;&#x53F7;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F46;&#x53EF;&#x80FD;&#x6709;&#x65E0;&#x6CD5;&#x9884;&#x6599;&#x7684;&#x540E;&#x679C;&#x3002;
&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x8FDB;&#x7A0B;&#x7684;&#x6807;&#x8BC6;&#x7B26; PID &#x5DF2;&#x7ECF;&#x88AB;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x7ED9;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#xFF0C;&#x5219;&#x4FE1;&#x53F7;&#x5C06;&#x4F1A;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x8BE5;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;&#x8FD9;&#x53EF;&#x80FD;&#x4EA7;&#x751F;&#x610F;&#x5916;&#x7684;&#x7ED3;&#x679C;&#x3002;</p><p>&#x867D;&#x7136;&#x8BE5;&#x51FD;&#x6570;&#x88AB;&#x79F0;&#x4E3A; <code>kill</code>&#xFF0C;&#x4F46;&#x4F20;&#x7ED9;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x4FE1;&#x53F7;&#x53EF;&#x80FD;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x4F1A;&#x7EC8;&#x6B62;&#x8BE5;&#x8FDB;&#x7A0B;&#x3002;</p><p>&#x53C2;&#x9605; <a href="http://nodejs.cn/s/KDV7jD" rel="nofollow"><code>kill(2)</code></a>&#x3002;</p><p>&#x5728; Linux &#x4E0A;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#x5728;&#x8BD5;&#x56FE;&#x6740;&#x6B7B;&#x5176;&#x7236;&#x8FDB;&#x7A0B;&#x65F6;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x7EC8;&#x6B62;&#x3002;
&#x5F53;&#x5728; shell &#x4E2D;&#x8FD0;&#x884C;&#x65B0;&#x8FDB;&#x7A0B;&#x3001;&#x6216;&#x4F7F;&#x7528; <code>ChildProcess</code> &#x7684; <code>shell</code> &#x9009;&#x9879;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;</p><pre><code class="language-js">&apos;use strict&apos;;
const { spawn } = require(&apos;child_process&apos;);

const subprocess = spawn(
  &apos;sh&apos;,
  [
    &apos;-c&apos;,
    `node -e &quot;setInterval(() =&gt; {
      console.log(process.pid, &apos;is alive&apos;)
    }, 500);&quot;`
  ], {
    stdio: [&apos;inherit&apos;, &apos;inherit&apos;, &apos;inherit&apos;]
  }
);

setTimeout(() =&gt; {
  subprocess.kill(); // &#x4E0D;&#x4F1A;&#x7EC8;&#x6B62; shell &#x4E2D;&#x7684; Node.js &#x8FDB;&#x7A0B;&#x3002;
}, 2000);
</code></pre></div>
          <div id="content_right"><div class="api_metadata">
<span>Added in: v0.1.90</span>
</div><ul>
<li><code>signal</code> <a href="http://nodejs.cn/s/SXbo1v" target="_blank" rel="nofollow" class="type">&lt;number&gt;</a> | <a href="http://nodejs.cn/s/9Tw2bK" target="_blank" rel="nofollow" class="type">&lt;string&gt;</a></li>
</ul><p>The <code>subprocess.kill()</code> method sends a signal to the child process. If no
argument is given, the process will be sent the <code>&apos;SIGTERM&apos;</code> signal. See
<a href="http://nodejs.cn/s/Fj3tfw" rel="nofollow"><code>signal(7)</code></a> for a list of available signals.</p><pre><code class="language-js">const { spawn } = require(&apos;child_process&apos;);
const grep = spawn(&apos;grep&apos;, [&apos;ssh&apos;]);

grep.on(&apos;close&apos;, (code, signal) =&gt; {
  console.log(
    `child process terminated due to receipt of signal ${signal}`);
});

// Send SIGHUP to process.
grep.kill(&apos;SIGHUP&apos;);
</code></pre><p>The <a href="http://nodejs.cn/s/uALgct" rel="nofollow"><code>ChildProcess</code></a> object may emit an <a href="http://nodejs.cn/s/zPWBLU" rel="nofollow"><code>&apos;error&apos;</code></a> event if the signal
cannot be delivered. Sending a signal to a child process that has already exited
is not an error but may have unforeseen consequences. Specifically, if the
process identifier (PID) has been reassigned to another process, the signal will
be delivered to that process instead which can have unexpected results.</p><p>While the function is called <code>kill</code>, the signal delivered to the child process
may not actually terminate the process.</p><p>See <a href="http://nodejs.cn/s/KDV7jD" rel="nofollow"><code>kill(2)</code></a> for reference.</p><p>On Linux, child processes of child processes will not be terminated
when attempting to kill their parent. This is likely to happen when running a
new process in a shell or with the use of the <code>shell</code> option of <code>ChildProcess</code>:</p><pre><code class="language-js">&apos;use strict&apos;;
const { spawn } = require(&apos;child_process&apos;);

const subprocess = spawn(
  &apos;sh&apos;,
  [
    &apos;-c&apos;,
    `node -e &quot;setInterval(() =&gt; {
      console.log(process.pid, &apos;is alive&apos;)
    }, 500);&quot;`
  ], {
    stdio: [&apos;inherit&apos;, &apos;inherit&apos;, &apos;inherit&apos;]
  }
);

setTimeout(() =&gt; {
  subprocess.kill(); // Does not terminate the Node.js process in the shell.
}, 2000);
</code></pre></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="http://nodejs.cn/api/child_process/'&#32;+&#32;(location.port&#32;?&#32;''&#32;:&#32;'//static.nodejs.cn')&#32;+&#32;'/_static/js/api.js?1576756295933"><\/script>');
  </script>
</body>
</html>